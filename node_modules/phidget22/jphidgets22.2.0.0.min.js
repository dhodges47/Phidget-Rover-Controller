"use strict";(function(){function t(){return Date.now()-d}function e(e){0===T&&console.log("debug("+t()+"): "+e)}function n(t){for(var e=0,n=new Uint8Array(4*t.length),i=0;i!=t.length;i++){var a=t.charCodeAt(i);if(a<128)n[e++]=a;else{if(a<2048)n[e++]=a>>6|192;else{if(a>55295&&a<56320){if(++i==t.length)throw"UTF-8 encode: incomplete surrogate pair";var r=t.charCodeAt(i);if(r<56320||r>57343)throw"UTF-8 encode: second char code 0x"+r.toString(16)+" at index "+i+" in surrogate pair out of range";a=65536+((1023&a)<<10)+(1023&r),n[e++]=a>>18|240,n[e++]=a>>12&63|128}else n[e++]=a>>12|224;n[e++]=a>>6&63|128}n[e++]=63&a|128}}return n.subarray(0,e)}function i(t){for(var e="",n=0;n<t.length;){var i=t[n++];if(i>127){if(i>191&&i<224){if(n>=t.length)throw"UTF-8 decode: incomplete 2-byte sequence";i=(31&i)<<6|63&t[n]}else if(i>223&&i<240){if(n+1>=t.length)throw"UTF-8 decode: incomplete 3-byte sequence";i=(15&i)<<12|(63&t[n])<<6|63&t[++n]}else{if(!(i>239&&i<248))throw"UTF-8 decode: unknown multibyte start 0x"+i.toString(16)+" at index "+(n-1);if(n+2>=t.length)throw"UTF-8 decode: incomplete 4-byte sequence";i=(7&i)<<18|(63&t[n])<<12|(63&t[++n])<<6|63&t[++n]}++n}if(i<=65535)e+=String.fromCharCode(i);else{if(!(i<=1114111))throw"UTF-8 decode: code point 0x"+i.toString(16)+" exceeds UTF-16 reach";i-=65536,e+=String.fromCharCode(i>>10|55296),e+=String.fromCharCode(1023&i|56320)}}return e}var a=("undefined"!=typeof require,"undefined"!=typeof module&&module.exports);if(a)var r=require("url"),o=require("net"),s=require("crypto"),h=require("btoa");String.startsWith||(String.prototype.startsWith=function(t){return 0===this.indexOf(t)});var c=1,p={},u={},E=1,d=Date.now(),T=1,l=function(){function d(t,e){return Math.floor(Math.random()*(e-t))+t}function T(t){if(a){var e=s.randomBytes(t);return h(e).substring(t)}var e=new Int8Array(t);if(window.crypto)window.crypto.getRandomValues(e);else if(window.msCrypto)window.msCrypto.getRandomValues(e);else{Math.seedrandom();for(var n=0;n<t;n++)e[n]=d(0,256)}return window.btoa(e.buffer).substring(t)}function l(t,e){return Promise.reject(new Et(t,e))}function g(t){var e=gt[t].substring(7);return f[e]?f[e]:null}function P(t){for(var e in p)if(p[e].matchPhidget(t))return}function v(t){for(var e in u){var n=u[e];if(n.attaching!==!0&&n.isopen!==!0)if(void 0===t){if(P(n)===!0)return}else if(t.match(n))return void t.open(n)["catch"](function(t){this.onError?this.onError(t.errorCode,t.message):console.error(t)}.bind(n))}}function y(t){var e=Pt[t.type];for(var n in e)if(n=e[n],!(n.v[0]>t.version||n.v[1]<=t.version)){if("VINT"===t.type){if(n.i!==t.vintID)continue}else{if(n.i!==t.productID)continue;if(void 0!==n.n&&n.n!=t.interfaceNum)continue}return n}throw new Et(k.EPHIDGET_UNEXPECTED,"Couldn't find device in device list!!")}function I(t,e){var n=0;for(var i in t.phiddev.ch){if(i=t.phiddev.ch[i],e.uniqueIndex<n+i.n)return i;n+=i.n}throw new Et(k.EPHIDGET_UNEXPECTED,"Couldn't find channel in channel list!!")}var f={},C="jPhidget";if(a)var _="www,nodejs";else var _="www";var D=2,S=0,A="phidgetclient",O={Connect:10,Command:20,Device:30},R={HandShakeC0:10,HandShakeS0:11,AuthC0:30,AuthS0:31,AuthC1:32,AuthS1:33,Reply:40,KeepAlive:41,Attach:50,Detach:55,Open:60,Close:65,BridgePkt:70,Channel:80},N={Magic:1346914608,Request:1,Reply:2,Event:4};setInterval(function(){v()},1e3),setInterval(function(){for(var e in u){var n=u[e];n.isopen||void 0!=n.openTimeout&&t()-n.openTime>n.openTimeout&&n.openTimedOut()}},500),f.getLibraryVersion=function(){return"Phidget 22 1.0.0"},f.getJSLibraryVersion=function(){return"2.0.0"},f.Connections=p;var H=function(t,e,n,i,a,r){"undefined"!=typeof r?this.buffer=this.render(t,e,n,i,a,r):"undefined"!=typeof t&&(this.hdrlen=this.parse(t))};H.prototype.toString=function(){return"{flags:0x"+this.flags.toString(16)+" len:"+this.len+" reqseq:"+this.reqseq+" repseq:"+this.repseq+" type:"+this.type+" subtype:"+this.stype+"}"},H.prototype.parse=function(t){if(this.magic=t[3]<<24|t[2]<<16|t[1]<<8|t[0],this.len=t[7]<<24|t[6]<<16|t[5]<<8|t[4],this.flags=t[9]<<8|t[8],this.reqseq=t[11]<<8|t[10],this.repseq=t[13]<<8|t[12],this.type=t[14],this.stype=t[15],this.magic!=N.Magic)throw"Bad Request Magic";return 16},H.prototype.render=function(t,e,n,i,a,r){var o=new Uint8Array(16);return o[3]=N.Magic>>24&255,o[2]=N.Magic>>16&255,o[1]=N.Magic>>8&255,o[0]=255&N.Magic,o[7]=t>>24&255,o[6]=t>>16&255,o[5]=t>>8&255,o[4]=255&t,o[9]=e>>8&255,o[8]=255&e,o[11]=n>>8&255,o[10]=255&n,o[13]=i>>8&255,o[12]=255&i,o[14]=a,o[15]=r,o};var m={ENCODER_IO_MODE_PUSH_PULL:1,ENCODER_IO_MODE_LINE_DRIVER_2K2:2,ENCODER_IO_MODE_LINE_DRIVER_10K:3,ENCODER_IO_MODE_OPEN_COLLECTOR_2K2:4,ENCODER_IO_MODE_OPEN_COLLECTOR_10K:5};f.EncoderIOMode=m;var k={EPHIDGET_OK:0,EPHIDGET_PERM:1,EPHIDGET_NOENT:2,EPHIDGET_TIMEOUT:3,EPHIDGET_KEEPALIVE:58,EPHIDGET_INTERRUPTED:4,EPHIDGET_IO:5,EPHIDGET_NOMEMORY:6,EPHIDGET_ACCESS:7,EPHIDGET_FAULT:8,EPHIDGET_BUSY:9,EPHIDGET_EXIST:10,EPHIDGET_NOTDIR:11,EPHIDGET_ISDIR:12,EPHIDGET_INVALID:13,EPHIDGET_NFILE:14,EPHIDGET_MFILE:15,EPHIDGET_NOSPC:16,EPHIDGET_FBIG:17,EPHIDGET_ROFS:18,EPHIDGET_RO:19,EPHIDGET_UNSUPPORTED:20,EPHIDGET_INVALIDARG:21,EPHIDGET_AGAIN:22,EPHIDGET_NOTEMPTY:26,EPHIDGET_UNEXPECTED:28,EPHIDGET_DUPLICATE:27,EPHIDGET_BADPASSWORD:37,EPHIDGET_NETUNAVAIL:45,EPHIDGET_CONNREF:35,EPHIDGET_CONNRESET:46,EPHIDGET_HOSTUNREACH:48,EPHIDGET_NODEV:40,EPHIDGET_WRONGDEVICE:50,EPHIDGET_PIPE:41,EPHIDGET_RESOLV:44,EPHIDGET_UNKNOWNVAL:51,EPHIDGET_NOTATTACHED:52,EPHIDGET_INVALIDPACKET:53,EPHIDGET_2BIG:54,EPHIDGET_BADVERSION:55,EPHIDGET_CLOSED:56,EPHIDGET_NOTCONFIGURED:57,EPHIDGET_EOF:31};f.PhidgetReturnCode=k;var B={EEPHIDGET_BADVERSION:1,EEPHIDGET_BUSY:2,EEPHIDGET_NETWORK:3,EEPHIDGET_DISPATCH:4,EEPHIDGET_OK:4096,EEPHIDGET_OVERRUN:4098,EEPHIDGET_PACKETLOST:4099,EEPHIDGET_WRAP:4100,EEPHIDGET_OVERTEMP:4101,EEPHIDGET_OVERCURRENT:4102,EEPHIDGET_OUTOFRANGE:4103,EEPHIDGET_BADPOWER:4104,EEPHIDGET_SATURATION:4105,EEPHIDGET_OVERVOLTAGE:4107,EEPHIDGET_FAILSAFE:4108,EEPHIDGET_VOLTAGEERROR:4109,EEPHIDGET_ENERGYDUMP:4110,EEPHIDGET_MOTORSTALL:4111};f.ErrorEventCode=B;var G={PHIDID_NOTHING:0,PHIDID_INTERFACEKIT_4_8_8:1,PHIDID_1000:2,PHIDID_1001:3,PHIDID_1002:4,PHIDID_1008:5,PHIDID_1010_1013_1018_1019:6,PHIDID_1011:7,PHIDID_1012:8,PHIDID_1014:9,PHIDID_1015:10,PHIDID_1016:11,PHIDID_1017:12,PHIDID_1023:13,PHIDID_1024:14,PHIDID_1030:15,PHIDID_1031:16,PHIDID_1032:17,PHIDID_1040:18,PHIDID_1041:19,PHIDID_1042:20,PHIDID_1043:21,PHIDID_1044:22,PHIDID_1045:23,PHIDID_1046:24,PHIDID_1047:25,PHIDID_1048:26,PHIDID_1049:27,PHIDID_1051:28,PHIDID_1052:29,PHIDID_1053:30,PHIDID_1054:31,PHIDID_1055:32,PHIDID_1056:33,PHIDID_1057:34,PHIDID_1058:35,PHIDID_1059:36,PHIDID_1060:37,PHIDID_1061:38,PHIDID_1062:39,PHIDID_1063:40,PHIDID_1064:41,PHIDID_1065:42,PHIDID_1066:43,PHIDID_1067:44,PHIDID_1202_1203:45,PHIDID_1204:46,PHIDID_1215__1218:47,PHIDID_1219__1222:48,PHIDID_ADP1000:49,PHIDID_ADP1001:50,PHIDID_DAQ1000:51,PHIDID_DAQ1200:52,PHIDID_DAQ1300:53,PHIDID_DAQ1301:54,PHIDID_DAQ1400:55,PHIDID_DAQ1500:56,PHIDID_DCC1000:57,PHIDID_DST1000:58,PHIDID_DST1200:59,PHIDID_ENC1000:60,PHIDID_HIN1000:61,PHIDID_HIN1001:62,PHIDID_HIN1100:63,PHIDID_HUB0000:64,PHIDID_HUB0001:65,PHIDID_HUB0002:66,PHIDID_HUB0004:67,PHIDID_HUB0005:68,PHIDID_HUM1000:69,PHIDID_LCD1100:70,PHIDID_LED1000:71,PHIDID_LUX1000:72,PHIDID_MOT1100:73,PHIDID_MOT1101:74,PHIDID_OUT1000:75,PHIDID_OUT1001:76,PHIDID_OUT1002:77,PHIDID_OUT1100:78,PHIDID_PRE1000:79,PHIDID_RCC1000:80,PHIDID_REL1000:81,PHIDID_REL1100:82,PHIDID_REL1101:83,PHIDID_SAF1000:84,PHIDID_SND1000:85,PHIDID_STC1000:86,PHIDID_TMP1000:87,PHIDID_TMP1100:88,PHIDID_TMP1101:89,PHIDID_TMP1200:90,PHIDID_TMP1300:91,PHIDID_VCP1000:92,PHIDID_VCP1001:93,PHIDID_VCP1002:94,PHIDID_DIGITALINPUT_PORT:95,PHIDID_DIGITALOUTPUT_PORT:96,PHIDID_VOLTAGEINPUT_PORT:97,PHIDID_VOLTAGERATIOINPUT_PORT:98,PHIDID_GENERICUSB:99,PHIDID_GENERICVINT:100,PHIDID_FIRMWARE_UPGRADE_USB:101,PHIDID_FIRMWARE_UPGRADE_STM32F0:102,PHIDID_FIRMWARE_UPGRADE_STM8S:103,PHIDID_FIRMWARE_UPGRADE_SPI:104,PHIDID_VCP1100:105,PHIDID_VINTSERVO_S2313M:106,PHIDID_DCC1100:108,PHIDID_HIN1101:109,PHIDID_DCC1001:110,PHIDID_DICTIONARY:111,PHIDID_VINTSERVO_S3317M:112,PHIDID_VINTSERVO_S4309M:113,PHIDID_VINTSERVO_S4309R:114,PHIDID_STC1001:115,PHIDID_USBSWITCH:116};f.DeviceID=G;var L={PHIDGET_LOG_CRITICAL:1,PHIDGET_LOG_ERROR:2,PHIDGET_LOG_WARNING:3,PHIDGET_LOG_INFO:4,PHIDGET_LOG_DEBUG:5,PHIDGET_LOG_VERBOSE:6};f.LogLevel=L;var V={PHIDCLASS_NOTHING:0,PHIDCLASS_ACCELEROMETER:1,PHIDCLASS_ADVANCEDSERVO:2,PHIDCLASS_ANALOG:3,PHIDCLASS_BRIDGE:4,PHIDCLASS_ENCODER:5,PHIDCLASS_FREQUENCYCOUNTER:6,PHIDCLASS_GPS:7,PHIDCLASS_HUB:8,PHIDCLASS_INTERFACEKIT:9,PHIDCLASS_IR:10,PHIDCLASS_LED:11,PHIDCLASS_MESHDONGLE:12,PHIDCLASS_MOTORCONTROL:13,PHIDCLASS_PHSENSOR:14,PHIDCLASS_RFID:15,PHIDCLASS_SERVO:16,PHIDCLASS_SPATIAL:17,PHIDCLASS_STEPPER:18,PHIDCLASS_TEMPERATURESENSOR:19,PHIDCLASS_TEXTLCD:20,PHIDCLASS_VINT:21,PHIDCLASS_GENERIC:22,PHIDCLASS_FIRMWAREUPGRADE:23,PHIDCLASS_DICTIONARY:24};f.DeviceClass=V;var M={PHIDCHCLASS_NOTHING:0,PHIDCHCLASS_ACCELEROMETER:1,PHIDCHCLASS_CURRENTINPUT:2,PHIDCHCLASS_DATAADAPTER:3,PHIDCHCLASS_DCMOTOR:4,PHIDCHCLASS_DIGITALINPUT:5,PHIDCHCLASS_DIGITALOUTPUT:6,PHIDCHCLASS_DISTANCESENSOR:7,PHIDCHCLASS_ENCODER:8,PHIDCHCLASS_FREQUENCYCOUNTER:9,PHIDCHCLASS_GPS:10,PHIDCHCLASS_LCD:11,PHIDCHCLASS_GYROSCOPE:12,PHIDCHCLASS_HUB:13,PHIDCHCLASS_CAPACITIVETOUCH:14,PHIDCHCLASS_HUMIDITYSENSOR:15,PHIDCHCLASS_IR:16,PHIDCHCLASS_LIGHTSENSOR:17,PHIDCHCLASS_MAGNETOMETER:18,PHIDCHCLASS_MESHDONGLE:19,PHIDCHCLASS_PHSENSOR:37,PHIDCHCLASS_POWERGUARD:20,PHIDCHCLASS_PRESSURESENSOR:21,PHIDCHCLASS_RCSERVO:22,PHIDCHCLASS_RESISTANCEINPUT:23,PHIDCHCLASS_RFID:24,PHIDCHCLASS_SOUNDSENSOR:25,PHIDCHCLASS_SPATIAL:26,PHIDCHCLASS_STEPPER:27,PHIDCHCLASS_TEMPERATURESENSOR:28,PHIDCHCLASS_VOLTAGEINPUT:29,PHIDCHCLASS_VOLTAGEOUTPUT:30,PHIDCHCLASS_VOLTAGERATIOINPUT:31,PHIDCHCLASS_FIRMWAREUPGRADE:32,PHIDCHCLASS_GENERIC:33,PHIDCHCLASS_MOTORPOSITIONCONTROLLER:34,PHIDCHCLASS_BLDCMOTOR:35,PHIDCHCLASS_DICTIONARY:36};f.ChannelClass=M;var w={PHIDCHSUBCLASS_NONE:1,PHIDCHSUBCLASS_DIGITALOUTPUT_DUTY_CYCLE:16,PHIDCHSUBCLASS_DIGITALOUTPUT_LED_DRIVER:17,PHIDCHSUBCLASS_TEMPERATURESENSOR_RTD:32,PHIDCHSUBCLASS_TEMPERATURESENSOR_THERMOCOUPLE:33,PHIDCHSUBCLASS_VOLTAGEINPUT_SENSOR_PORT:48,PHIDCHSUBCLASS_VOLTAGERATIOINPUT_SENSOR_PORT:64,PHIDCHSUBCLASS_VOLTAGERATIOINPUT_BRIDGE:65,PHIDCHSUBCLASS_LCD_GRAPHIC:80,PHIDCHSUBCLASS_LCD_TEXT:81,PHIDCHSUBCLASS_ENCODER_MODE_SETTABLE:96,PHIDCHSUBCLASS_RCSERVO_EMBEDDED:112};f.ChannelSubclass=w;var U={MESHMODE_ROUTER:1,MESHMODE_SLEEPYENDDEVICE:2};f.MeshMode=U;var b={POWER_SUPPLY_OFF:1,POWER_SUPPLY_12V:2,POWER_SUPPLY_24V:3};f.PowerSupply=b;var x={RTD_WIRE_SETUP_2WIRE:1,RTD_WIRE_SETUP_3WIRE:2,RTD_WIRE_SETUP_4WIRE:3};f.RTDWireSetup=x;var F={INPUT_MODE_NPN:1,INPUT_MODE_PNP:2};f.InputMode=F;var Y={FAN_MODE_OFF:1,FAN_MODE_ON:2,FAN_MODE_AUTO:3};f.FanMode=Y;var W={PHIDUNIT_NONE:0,PHIDUNIT_BOOLEAN:1,PHIDUNIT_PERCENT:2,PHIDUNIT_DECIBEL:3,PHIDUNIT_MILLIMETER:4,PHIDUNIT_CENTIMETER:5,PHIDUNIT_METER:6,PHIDUNIT_GRAM:7,PHIDUNIT_KILOGRAM:8,PHIDUNIT_MILLIAMPERE:9,PHIDUNIT_AMPERE:10,PHIDUNIT_KILOPASCAL:11,PHIDUNIT_VOLT:12,PHIDUNIT_DEGREE_CELCIUS:13,PHIDUNIT_LUX:14,PHIDUNIT_GAUSS:15,PHIDUNIT_PH:16,PHIDUNIT_WATT:17};f.Unit=W;var q={LED_FORWARD_VOLTAGE_1_7V:1,LED_FORWARD_VOLTAGE_2_75V:2,LED_FORWARD_VOLTAGE_3_2V:3,LED_FORWARD_VOLTAGE_3_9V:4,LED_FORWARD_VOLTAGE_4_0V:5,LED_FORWARD_VOLTAGE_4_8V:6,LED_FORWARD_VOLTAGE_5_0V:7,LED_FORWARD_VOLTAGE_5_6V:8};f.LEDForwardVoltage=q;var K={FILTER_TYPE_ZERO_CROSSING:1,FILTER_TYPE_LOGIC_LEVEL:2};f.FilterType=K;var j={PORT_MODE_VINT_PORT:0,PORT_MODE_DIGITAL_INPUT:1,PORT_MODE_DIGITAL_OUTPUT:2,PORT_MODE_VOLTAGE_INPUT:3,PORT_MODE_VOLTAGE_RATIO_INPUT:4};f.PortMode=j;var X={IR_ENCODING_UNKNOWN:1,IR_ENCODING_SPACE:2,IR_ENCODING_PULSE:3,IR_ENCODING_BIPHASE:4,IR_ENCODING_RC5:5,IR_ENCODING_RC6:6};f.Encoding=X;var z={IR_LENGTH_UNKNOWN:1,IR_LENGTH_CONSTANT:2,IR_LENGTH_VARIABLE:3};f.Length=z;var Q={FONT_User1:1,FONT_User2:2,FONT_6x10:3,FONT_5x8:4,FONT_6x12:5};f.LCDFont=Q;var Z={SCREEN_SIZE_NONE:1,SCREEN_SIZE_1x8:2,SCREEN_SIZE_2x8:3,SCREEN_SIZE_1x16:4,SCREEN_SIZE_2x16:5,SCREEN_SIZE_4x16:6,SCREEN_SIZE_2x20:7,SCREEN_SIZE_4x20:8,SCREEN_SIZE_2x24:9,SCREEN_SIZE_1x40:10,SCREEN_SIZE_2x40:11,SCREEN_SIZE_4x40:12,SCREEN_SIZE_64x128:13};f.LCDScreenSize=Z;var J={PIXEL_STATE_OFF:0,PIXEL_STATE_ON:1,PIXEL_STATE_INVERT:2};f.LCDPixelState=J;var $={PHIDGETSERVER_NONE:0,PHIDGETSERVER_DEVICELISTENER:1,PHIDGETSERVER_DEVICE:2,PHIDGETSERVER_DEVICEREMOTE:3,PHIDGETSERVER_WWWLISTENER:4,PHIDGETSERVER_WWW:5,PHIDGETSERVER_WWWREMOTE:6,PHIDGETSERVER_SBC:7};f.PhidgetServerType=$;var tt={RCSERVO_VOLTAGE_5V:1,RCSERVO_VOLTAGE_6V:2,RCSERVO_VOLTAGE_7_4V:3};f.RCServoVoltage=tt;var et={PROTOCOL_EM4100:1,PROTOCOL_ISO11785_FDX_B:2,PROTOCOL_PHIDGETS:3};f.RFIDProtocol=et;var nt={SPL_RANGE_102dB:1,SPL_RANGE_82dB:2};f.SPLRange=nt;var it={CONTROL_MODE_STEP:0,CONTROL_MODE_RUN:1};f.ControlMode=it;var at={RTD_TYPE_PT100_3850:1,RTD_TYPE_PT1000_3850:2,RTD_TYPE_PT100_3920:3,RTD_TYPE_PT1000_3920:4};f.RTDType=at;var rt={THERMOCOUPLE_TYPE_J:1,THERMOCOUPLE_TYPE_K:2,THERMOCOUPLE_TYPE_E:3,THERMOCOUPLE_TYPE_T:4};f.ThermocoupleType=rt;var ot={VOLTAGE_RANGE_10mV:1,VOLTAGE_RANGE_40mV:2,VOLTAGE_RANGE_200mV:3,VOLTAGE_RANGE_312_5mV:4,VOLTAGE_RANGE_400mV:5,VOLTAGE_RANGE_1000mV:6,VOLTAGE_RANGE_2V:7,VOLTAGE_RANGE_5V:8,VOLTAGE_RANGE_15V:9,VOLTAGE_RANGE_40V:10,VOLTAGE_RANGE_AUTO:11};f.VoltageRange=ot;var st={SENSOR_TYPE_VOLTAGE:0,SENSOR_TYPE_1114:11140,SENSOR_TYPE_1117:11170,SENSOR_TYPE_1123:11230,SENSOR_TYPE_1127:11270,SENSOR_TYPE_1130_PH:11301,SENSOR_TYPE_1130_ORP:11302,SENSOR_TYPE_1132:11320,SENSOR_TYPE_1133:11330,SENSOR_TYPE_1135:11350,SENSOR_TYPE_1142:11420,SENSOR_TYPE_1143:11430,SENSOR_TYPE_3500:35e3,SENSOR_TYPE_3501:35010,SENSOR_TYPE_3502:35020,SENSOR_TYPE_3503:35030,SENSOR_TYPE_3507:35070,SENSOR_TYPE_3508:35080,SENSOR_TYPE_3509:35090,SENSOR_TYPE_3510:35100,SENSOR_TYPE_3511:35110,SENSOR_TYPE_3512:35120,SENSOR_TYPE_3513:35130,SENSOR_TYPE_3514:35140,SENSOR_TYPE_3515:35150,SENSOR_TYPE_3516:35160,SENSOR_TYPE_3517:35170,SENSOR_TYPE_3518:35180,SENSOR_TYPE_3519:35190,SENSOR_TYPE_3584:35840,SENSOR_TYPE_3585:35850,SENSOR_TYPE_3586:35860,SENSOR_TYPE_3587:35870,SENSOR_TYPE_3588:35880,SENSOR_TYPE_3589:35890};f.VoltageSensorType=st;var ht={VOLTAGE_OUTPUT_RANGE_10V:1,VOLTAGE_OUTPUT_RANGE_5V:2};f.VoltageOutputRange=ht;var ct={BRIDGE_GAIN_1:1,BRIDGE_GAIN_2:2,BRIDGE_GAIN_4:3,BRIDGE_GAIN_8:4,BRIDGE_GAIN_16:5,BRIDGE_GAIN_32:6,BRIDGE_GAIN_64:7,BRIDGE_GAIN_128:8};f.BridgeGain=ct;var pt={SENSOR_TYPE_VOLTAGERATIO:0,SENSOR_TYPE_1101_SHARP_2D120X:11011,SENSOR_TYPE_1101_SHARP_2Y0A21:11012,SENSOR_TYPE_1101_SHARP_2Y0A02:11013,SENSOR_TYPE_1102:11020,SENSOR_TYPE_1103:11030,SENSOR_TYPE_1104:11040,SENSOR_TYPE_1105:11050,SENSOR_TYPE_1106:11060,SENSOR_TYPE_1107:11070,SENSOR_TYPE_1108:11080,SENSOR_TYPE_1109:11090,SENSOR_TYPE_1110:11100,SENSOR_TYPE_1111:11110,SENSOR_TYPE_1112:11120,SENSOR_TYPE_1113:11130,SENSOR_TYPE_1115:11150,SENSOR_TYPE_1116:11160,SENSOR_TYPE_1118_AC:11181,SENSOR_TYPE_1118_DC:11182,SENSOR_TYPE_1119_AC:11191,SENSOR_TYPE_1119_DC:11192,SENSOR_TYPE_1120:11200,SENSOR_TYPE_1121:11210,SENSOR_TYPE_1122_AC:11221,SENSOR_TYPE_1122_DC:11222,SENSOR_TYPE_1124:11240,SENSOR_TYPE_1125_HUMIDITY:11251,SENSOR_TYPE_1125_TEMPERATURE:11252,SENSOR_TYPE_1126:11260,SENSOR_TYPE_1128:11280,SENSOR_TYPE_1129:11290,SENSOR_TYPE_1131:11310,SENSOR_TYPE_1134:11340,SENSOR_TYPE_1136:11360,SENSOR_TYPE_1137:11370,SENSOR_TYPE_1138:11380,SENSOR_TYPE_1139:11390,SENSOR_TYPE_1140:11400,SENSOR_TYPE_1141:11410,SENSOR_TYPE_1146:11460,SENSOR_TYPE_3120:31200,SENSOR_TYPE_3121:31210,SENSOR_TYPE_3122:31220,SENSOR_TYPE_3123:31230,SENSOR_TYPE_3130:31300,SENSOR_TYPE_3520:35200,SENSOR_TYPE_3521:35210,SENSOR_TYPE_3522:35220};f.VoltageRatioSensorType=pt;var ut={0:"Success",1:"Not Permitted",2:"No Such Entity",3:"Timed Out",58:"Keep Alive Failure",4:"Op Interrupted",5:"IO Issue",6:"Memory Issue",7:"Access (Permission) Issue",8:"Address Issue",9:"Resource Busy",10:"Object Exists",11:"Object is not a directory",12:"Object is a directory",13:"Invalid",14:"Too many open files in system",15:"Too many open files",16:"Not enough space",17:"File too Big",18:"Read Only Filesystem",19:"Read Only Object",20:"Operation Not Supported",21:"Invalid Argument",22:"Try again",26:"No Empty",28:"Unexpected Error",27:"Duplicate",37:"Bad Credential",45:"Network Unavailable",35:"Connection Refused",46:"Connection Reset",48:"No route to host",40:"No Such Device",50:"Wrong Device",41:"Broken Pipe",44:"Name Resolution Failure",51:"Unknown or Invalid Value",52:"Device not Attached",53:"Invalid or Unexpected Packet",54:"Argument List Too Long",55:"Bad Version",56:"Closed",57:"Not Configured",31:"End of File"},Et=function(t,e){this.name="PhidgetError",this.errorCode=t,this.message=e||ut[t],this.stack=(new Error).stack};Et.prototype=Error.prototype,f.PhidgetError=Et;var dt={BP_SETSTATUS:0,BP_ACCELERATIONCHANGE:1,BP_ANGULARRATEUPDATE:2,BP_BACKEMFCHANGE:3,BP_CLEAR:4,BP_CODE:5,BP_COPY:6,BP_COUNTCHANGE:7,BP_CURRENTCHANGE:8,BP_DATA:9,BP_DATAINTERVALCHANGE:10,BP_DBCHANGE:11,BP_DISTANCECHANGE:12,BP_DRAWLINE:13,BP_DRAWPIXEL:14,BP_DRAWRECT:15,BP_DUTYCYCLECHANGE:16,BP_ERROREVENT:17,BP_FIELDSTRENGTHCHANGE:18,BP_FLUSH:19,BP_FREQUENCYCHANGE:20,BP_FREQUENCYDATA:21,BP_HUMIDITYCHANGE:22,BP_ILLUMINANCECHANGE:23,BP_INITIALIZE:24,BP_LEARN:25,BP_MANCHESTER:26,BP_MINDATAINTERVALCHANGE:27,BP_PACKET:28,BP_POSITIONCHANGE:29,BP_POSITIONFIXSTATUSCHANGE:30,BP_PRESSURECHANGE:31,BP_RAWDATA:32,BP_REPEAT:33,BP_OPENRESET:34,BP_RESETCORRECTIONPARAMETERS:35,BP_RESISTANCECHANGE:36,BP_SAVECORRECTIONPARAMETERS:37,BP_SAVEFRAMEBUFFER:38,BP_SENDPACKET:39,BP_SETACCELERATION:40,BP_SETANTENNAON:41,BP_SETBACKEMFSENSINGSTATE:42,BP_SETBACKLIGHT:43,BP_SETBRAKINGDUTYCYCLE:44,BP_SETBRIDGEGAIN:45,BP_SETCHANGETRIGGER:46,BP_SETCHARACTERBITMAP:47,BP_SETCONTRAST:48,BP_SETCONTROLMODE:49,BP_SETCORRECTIONPARAMETERS:50,BP_SETCURRENTLIMIT:51,BP_SETCURSORBLINK:52,BP_SETCURSORON:53,BP_SETDATAINTERVAL:54,BP_SETDUTYCYCLE:55,BP_SETENABLED:56,BP_SETENGAGED:57,BP_SETFANMODE:58,BP_SETFILTERTYPE:59,BP_SETFIRMWAREUPGRADEFLAG:60,BP_SETFONTSIZE:61,BP_SETFRAMEBUFFER:62,BP_SETHOLDINGCURRENTLIMIT:63,BP_SETINPUTMODE:64,BP_SETIOMODE:65,BP_SETSENSITIVITY:66,BP_SETLEDCURRENTLIMIT:67,BP_SETLEDFORWARDVOLTAGE:68,BP_SETMAXPULSEWIDTH:69,BP_SETMINPULSEWIDTH:70,BP_SETOVERVOLTAGE:71,BP_SETPORTMODE:72,BP_SETPORTPOWER:73,BP_SETPOWERSUPPLY:74,BP_SETSONARQUIETMODE:75,BP_SETRTDTYPE:76,BP_SETRTDWIRESETUP:77,BP_SETSCREENSIZE:78,BP_SETSENSORTYPE:79,BP_SETSLEEP:80,BP_SETSPEEDRAMPINGSTATE:81,BP_SETSTATE:82,BP_SETTARGETPOSITION:83,BP_SETTHERMOCOUPLETYPE:84,BP_SETVELOCITYLIMIT:85,BP_SETVOLTAGE:86,BP_SETVOLTAGERANGE:87,BP_SONARUPDATE:88,BP_SPATIALDATA:89,BP_STATECHANGE:90,BP_STOPPED:91,BP_TAG:92,BP_TAGLOST:93,BP_TARGETPOSITIONREACHED:94,BP_TEMPERATURECHANGE:95,BP_TOUCHINPUTVALUECHANGE:96,BP_TRANSMIT:97,BP_TRANSMITRAW:98,BP_TRANSMITREPEAT:99,BP_VELOCITYCHANGE:100,BP_VOLTAGECHANGE:101,BP_VOLTAGERATIOCHANGE:102,BP_WRITE:103,BP_WRITEBITMAP:104,BP_WRITETEXT:105,BP_ZERO:106,BP_SETCALIBRATIONVALUES:107,BP_TIME:108,BP_DATE:109,BP_HEADINGCHANGE:110,BP_CLOSERESET:111,BP_SENDFIRMWARE:112,BP_PROGRESSCHANGE:113,BP_DEVICEINFO:114,BP_SENSORCHANGE:115,BP_SETSPLRANGE:116,BP_DATAIN:117,BP_DATAOUT:118,BP_SETCURRENTREGULATORGAIN:119,BP_SETDEADBAND:120,BP_BRAKINGSTRENGTHCHANGE:121,BP_SETSENSORVALUECHANGETRIGGER:122,BP_DICTIONARYADD:123,BP_DICTIONARYADDED:124,BP_DICTIONARYUPDATE:125,BP_DICTIONARYUPDATED:126,BP_DICTIONARYREMOVE:127,BP_DICTIONARYREMOVED:128,BP_DICTIONARYGET:129,BP_DICTIONARYSET:130,BP_DICTIONARYREMOVEALL:131,BP_DICTIONARYSCAN:132,BP_PHCHANGE:133,BP_SETCORRECTIONTEMPERATURE:134,BP_SETKP:135,BP_SETKD:136,BP_TOUCHINPUTEND:137,BP_REBOOTFIRMWAREUPGRADE:138,BP_REBOOT:139,BP_WRITELABEL:140,BP_SETSTALLVELOCITY:141,BP_SETKI:142,BP_ENABLE:143},Tt=function(t,e,n){this.conn=t,this.req=e,n?(this.version=n.v,this.source=n.s,this.flags=n.f,this.vpkt=n.p,this.chid=n.O,this.channel=t.getChannel(this.chid),this.channelIndex=n.X,this.entryCount=n.c,this.entries=n.e):(this.version=0,this.source=2,this.flags=0,this.entryCount=0,this.entries={})};Tt.prototype.NUMBER=1,Tt.prototype.FLOAT=2,Tt.prototype.STRING=3,Tt.prototype.ARRAY=4,Tt.prototype.JSON=5,Tt.prototype.F_EVENT=1,Tt.prototype.isEvent=function(){return!!(this.flags&this.F_EVENT)},Tt.prototype.validType=function(t){switch(t){case"c":case"h":case"u":case"uh":case"ul":case"d":case"l":case"f":case"g":case"s":case"R":case"I":case"U":case"J":return!0;default:return!1}},Tt.prototype.entryType=function(t){switch(t.type){case"c":case"h":case"uh":case"d":case"u":case"l":case"ul":return this.NUMBER;case"f":case"g":return this.FLOAT;case"s":return this.STRING;case"R":case"I":case"G":case"U":return this.ARRAY;case"J":return this.JSON;default:return-1}},Tt.prototype.convertType=function(t){switch(this.entryType(t)){case this.NUMBER:var e=parseInt(t.value);if(!isNaN(e))return e;if("boolean"==typeof t.value)return t.value?1:0;break;case this.FLOAT:var e=parseFloat(t.value);if(!isNaN(e))return e;if("boolean"==typeof t.value)return t.value?1:0;break;case this.STRING:return"string"!=typeof t.value?""+t.value:t.value;case this.JSON:if("object"==typeof t.value)return t.value;break;case this.ARRAY:if(Array.isArray(t.value))return t.value}throw"invalid value ["+t.value+"] for type ["+t.type+"]"},Tt.prototype.set=function(t){if("undefined"==typeof t)throw"invalid argument";if("undefined"==typeof t.name)throw"missing name";if("undefined"==typeof t.type)throw"missing type";if("undefined"==typeof t.value)throw"missing value";if(t.name in this.entries)throw"value ["+t.name+"] already set";if(!this.validType(t.type))throw"invalid type ["+t.type+"]";var e=this.convertType(t),n={t:t.type,v:e};this.entries[t.name]=n,this.entryCount++},Tt.prototype.send=function(t,e){if("string"==typeof e&&(e=this[e]),!t.isopen)return Promise.reject(new Et(k.EPHIDGET_NOTATTACHED));var n=JSON.stringify({v:this.version,s:this.source,f:this.flags,p:e,I:t.parent.phid,X:t.uniqueIndex,c:this.entryCount,e:this.entries});return t.conn.sendRequest(0,0,0,O.Device,R.BridgePkt,n)},Tt.prototype.deliver=function(){if(!this.channel)throw"Bridge packet missing channel";if(this.channel.isopen===!1)return void e("deliver event to closed channel");try{this.isEvent()||0===this.vpkt||this.conn.sendReply(this.req.reqseq,this.req.type,this.req.stype,[]),this.channel.userphid.bridgeInput(this)}catch(t){throw t}},Tt.prototype.get=function(t){if(this.entries.hasOwnProperty(t))return this.entries[t].v};var lt={0:"PhidgetNone",1:"PhidgetAccelerometer",2:"PhidgetAdvancedServo",3:"PhidgetAnalog",4:"PhidgetBridge",5:"PhidgetEncoder",6:"PhidgetFrequencyCounter",7:"PhidgetGPS",8:"PhidgetHub",9:"PhidgetInterfaceKit",10:"PhidgetIR",11:"PhidgetLED",12:"PhidgetMeshDongle",13:"PhidgetMotorControl",14:"PhidgetPHSensor",15:"PhidgetRFID",16:"PhidgetServo",17:"PhidgetSpatial",18:"PhidgetStepper",19:"PhidgetTemperatureSensor",20:"PhidgetTextLCD",21:"PhidgetVINT",22:"PhidgetGeneric",23:"PhidgetFirmwareUpgrade",24:"PhidgetDictionary"},gt={0:"PhidgetNone",1:"PhidgetAccelerometer",2:"PhidgetCurrentInput",3:"PhidgetDataAdapter",4:"PhidgetDCMotor",5:"PhidgetDigitalInput",6:"PhidgetDigitalOutput",7:"PhidgetDistanceSensor",8:"PhidgetEncoder",9:"PhidgetFrequencyCounter",10:"PhidgetGPS",11:"PhidgetLCD",12:"PhidgetGyroscope",13:"PhidgetHub",14:"PhidgetCapacitiveTouch",15:"PhidgetHumiditySensor",16:"PhidgetIR",17:"PhidgetLightSensor",18:"PhidgetMagnetometer",19:"PhidgetMeshDongle",37:"PhidgetPHSensor",20:"PhidgetPowerGuard",21:"PhidgetPressureSensor",22:"PhidgetRCServo",23:"PhidgetResistanceInput",24:"PhidgetRFID",25:"PhidgetSoundSensor",26:"PhidgetSpatial",27:"PhidgetStepper",28:"PhidgetTemperatureSensor",29:"PhidgetVoltageInput",30:"PhidgetVoltageOutput",31:"PhidgetVoltageRatioInput",32:"PhidgetFirmwareUpgrade",33:"PhidgetGeneric",34:"PhidgetMotorPositionController",35:"PhidgetBLDCMotor",36:"PhidgetDictionary"},Pt={VINT:[{i:1,c:21,v:[100,200],s:"DIGITALINPUT_PORT",ch:[{n:1,s:1}]},{i:2,c:21,v:[100,200],s:"DIGITALOUTPUT_PORT",ch:[{n:1,s:16}]},{i:3,c:21,v:[100,200],s:"VOLTAGEINPUT_PORT",ch:[{n:1,s:48}]},{i:4,c:21,v:[100,200],s:"VOLTAGERATIOINPUT_PORT",ch:[{n:1,s:64}]},{i:29,c:21,v:[100,200],s:"ADP1000",ch:[{n:1,s:1},{n:1,s:1}]},{i:23,c:21,v:[100,200],s:"ADP1001",ch:[{n:1,s:1}]},{i:50,c:21,v:[100,200],s:"DAQ1000",ch:[{n:8,s:64},{n:8,s:48}]},{i:41,c:21,v:[100,200],s:"OUT1000",ch:[{n:1,s:1}]},{i:42,c:21,v:[100,200],s:"OUT1001",ch:[{n:1,s:1}]},{i:43,c:21,v:[100,200],s:"OUT1002",ch:[{n:1,s:1}]},{i:28,c:21,v:[100,200],s:"DAQ1200",ch:[{n:4,s:1}]},{i:25,c:21,v:[100,200],s:"OUT1100",ch:[{n:4,s:16}]},{i:32,c:21,v:[100,200],s:"DAQ1300",ch:[{n:4,s:1}]},{i:54,c:21,v:[100,200],s:"DAQ1301",ch:[{n:16,s:1}]},{i:34,c:21,v:[100,200],s:"DAQ1400",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:24,c:21,v:[100,200],s:"DAQ1500",ch:[{n:2,s:65}]},{i:64,c:21,v:[100,200],s:"VCP1100",ch:[{n:1,s:1}]},{i:47,c:21,v:[100,200],s:"DCC1000",ch:[{n:1,s:1},{n:1,s:96},{n:1,s:64},{n:1,s:1},{n:1,s:1}]},{i:47,c:21,v:[200,300],s:"DCC1000",ch:[{n:1,s:1},{n:1,s:96},{n:1,s:64},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:68,c:21,v:[100,200],s:"DCC1001",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:65,c:21,v:[100,200],s:"DCC1100",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:45,c:21,v:[100,200],s:"DST1000",ch:[{n:1,s:1}]},{i:46,c:21,v:[100,200],s:"DST1200",ch:[{n:1,s:1}]},{i:18,c:21,v:[100,200],s:"ENC1000",ch:[{n:1,s:96}]},{i:67,c:21,v:[100,200],s:"HIN1101",ch:[{n:1,s:1},{n:1,s:1}]},{i:36,c:21,v:[100,200],s:"HIN1000",ch:[{n:7,s:1}]},{i:56,c:21,v:[100,200],s:"HIN1001",ch:[{n:4,s:1},{n:1,s:1}]},{i:37,c:21,v:[100,200],s:"HIN1100",ch:[{n:2,s:1},{n:1,s:1}]},{i:20,c:21,v:[100,200],s:"HUM1000",ch:[{n:1,s:1},{n:1,s:1}]},{i:40,c:21,v:[100,200],s:"LCD1100",ch:[{n:1,s:80}]},{i:39,c:21,v:[100,200],s:"LED1000",ch:[{n:32,s:17}]},{i:33,c:21,v:[100,200],s:"LUX1000",ch:[{n:1,s:1}]},{i:51,c:21,v:[100,200],s:"MOT1100",ch:[{n:1,s:1}]},{i:51,c:21,v:[200,300],s:"MOT1100",ch:[{n:1,s:1}]},{i:52,c:21,v:[100,200],s:"MOT1101",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:17,c:21,v:[100,200],s:"PRE1000",ch:[{n:1,s:1}]},{i:49,c:21,v:[100,200],s:"RCC1000",ch:[{n:16,s:1}]},{i:57,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:58,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:59,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:60,c:21,v:[100,200],s:"VINTSERVO_S4309R",ch:[{n:1,s:1}]},{i:44,c:21,v:[100,200],s:"REL1000",ch:[{n:4,s:1}]},{i:26,c:21,v:[100,200],s:"REL1100",ch:[{n:4,s:16}]},{i:27,c:21,v:[100,200],s:"REL1101",ch:[{n:16,s:16}]},{i:38,c:21,v:[100,200],s:"SAF1000",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:35,c:21,v:[100,200],s:"SND1000",ch:[{n:1,s:1}]},{i:48,c:21,v:[100,200],s:"STC1000",ch:[{n:1,s:1}]},{i:69,c:21,v:[100,200],s:"STC1001",ch:[{n:1,s:1}]},{i:19,c:21,v:[100,200],s:"TMP1000",ch:[{n:1,s:1}]},{i:55,c:21,v:[100,200],s:"TMP1100",ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:21,c:21,v:[100,200],s:"TMP1101",ch:[{n:4,s:33},{n:1,s:1},{n:4,s:1}]},{i:16,c:21,v:[100,200],s:"TMP1200",ch:[{n:1,s:32},{n:1,s:1}]},{i:22,c:21,v:[100,200],s:"TMP1300",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:53,c:21,v:[100,200],s:"VCP1000",ch:[{n:1,s:1}]},{i:31,c:21,v:[100,200],s:"VCP1001",ch:[{n:1,s:1}]},{i:30,c:21,v:[100,200],s:"VCP1002",ch:[{n:1,s:1}]},{i:4093,c:21,v:[100,200],s:"FIRMWARE_UPGRADE_STM32F0",ch:[{n:1,s:1}]},{i:4094,c:21,v:[100,200],s:"FIRMWARE_UPGRADE_STM8S",ch:[{n:1,s:1}]},{i:2457,c:21,v:[100,200],s:"GenericVINT",ch:[{n:4,s:1}]}],USB:[{i:33281,c:9,v:[0,101],s:"ifkit488",n:0,ch:[{n:4,s:64},{n:8,s:1},{n:8,s:1}]},{i:33025,c:16,v:[200,201],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[200,201],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[300,313],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[313,400],s:"1000",n:0,ch:[{n:1,s:1}]},{i:33028,c:16,v:[200,201],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[200,201],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[300,313],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[313,400],s:"1001",n:0,ch:[{n:4,s:1}]},{i:55,c:3,v:[100,200],s:"1002",n:0,ch:[{n:4,s:1}]},{i:113,c:1,v:[0,200],s:"1008",n:0,ch:[{n:1,s:1}]},{i:54,c:9,v:[0,200],s:"1011",n:0,ch:[{n:2,s:48},{n:2,s:64},{n:2,s:1},{n:2,s:1}]},{i:68,c:9,v:[0,601],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:68,c:9,v:[601,602],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:68,c:9,v:[602,700],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:69,c:9,v:[0,821],s:"1013",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:69,c:9,v:[821,900],s:"1013/1018/1019",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:64,c:9,v:[0,704],s:"1014",n:0,ch:[{n:4,s:1}]},{i:64,c:9,v:[704,800],s:"1014",n:0,ch:[{n:4,s:1}]},{i:118,c:9,v:[0,9999],s:"1015",n:0,ch:[{n:1,s:1}]},{i:119,c:9,v:[0,9999],s:"1016",n:0,ch:[{n:1,s:1}]},{i:129,c:9,v:[0,9999],s:"1017",n:0,ch:[{n:8,s:1}]},{i:69,c:9,v:[900,1e3],s:"1010/1018/1019",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:48,c:15,v:[0,104],s:"1023",n:0,ch:[{n:1,s:1}]},{i:48,c:15,v:[104,200],s:"1023",n:0,ch:[{n:1,s:1}]},{i:49,c:15,v:[200,201],s:"1023",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:49,c:15,v:[201,300],s:"1023",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:52,c:15,v:[100,200],s:"1024",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:74,c:11,v:[100,300],s:"1030",n:0,ch:[{n:64,s:17}]},{i:76,c:11,v:[100,200],s:"1031",n:0,ch:[{n:64,s:17}]},{i:76,c:11,v:[200,300],s:"1032",n:0,ch:[{n:64,s:17}]},{i:121,c:7,v:[0,9999],s:"1040",n:0,ch:[{n:1,s:1}]},{i:127,c:17,v:[200,300],s:"1041",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[300,400],s:"1042",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:127,c:17,v:[300,400],s:"1043",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[400,500],s:"1044",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:60,c:19,v:[100,200],s:"1045",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:59,c:4,v:[100,102],s:"1046",n:0,ch:[{n:4,s:65}]},{i:59,c:4,v:[102,200],s:"1046",n:0,ch:[{n:4,s:65}]},{i:79,c:5,v:[100,200],s:"1047",n:0,ch:[{n:4,s:1},{n:4,s:1}]},{i:50,c:19,v:[100,200],s:"1048",n:0,ch:[{n:4,s:33},{n:1,s:1},{n:4,s:1}]},{i:127,c:17,v:[0,200],s:"1049",n:0,ch:[{n:1,s:1}]},{i:112,c:19,v:[0,200],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1}]},{i:112,c:19,v:[200,300],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:112,c:19,v:[300,400],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:112,c:19,v:[400,500],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[0,101],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[101,110],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[110,300],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:113,c:1,v:[300,400],s:"1053",n:0,ch:[{n:1,s:1}]},{i:53,c:6,v:[0,200],s:"1054",n:0,ch:[{n:2,s:1}]},{i:77,c:10,v:[100,200],s:"1055",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[0,200],s:"1056",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:51,c:17,v:[200,300],s:"1056",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:128,c:5,v:[300,400],s:"1057",n:0,ch:[{n:1,s:1}]},{i:116,c:14,v:[100,200],s:"1058",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:126,c:1,v:[400,500],s:"1059",n:0,ch:[{n:1,s:1}]},{i:88,c:13,v:[100,200],s:"1060",n:0,ch:[{n:2,s:1},{n:4,s:1}]},{i:58,c:2,v:[100,200],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:58,c:2,v:[200,300],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:58,c:2,v:[300,400],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:122,c:18,v:[100,200],s:"1062",n:0,ch:[{n:4,s:1}]},{i:123,c:18,v:[100,200],s:"1063",n:0,ch:[{n:1,s:1},{n:4,s:1},{n:1,s:1}]},{i:89,c:13,v:[100,200],s:"1064",n:0,ch:[{n:2,s:1},{n:2,s:1}]},{i:62,c:13,v:[100,200],s:"1065",n:0,ch:[{n:1,s:1},{n:2,s:1},{n:1,s:1},{n:2,s:48},{n:1,s:1},{n:2,s:64},{n:1,s:1}]},{i:130,c:2,v:[100,200],s:"1066",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:123,c:18,v:[200,300],s:"1067",n:0,ch:[{n:1,s:1}]},{i:125,c:9,v:[0,120],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:9,v:[120,200],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:20,v:[0,200],s:"1202/1203",n:1,ch:[{n:1,s:81}]},{i:125,c:9,v:[200,300],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:20,v:[200,9999],s:"1202/1203",n:1,ch:[{n:1,s:81}]},{i:61,c:20,v:[0,9999],s:"1204",n:0,ch:[{n:2,s:81}]},{i:82,c:20,v:[0,9999],s:"1215/1216/1217/1218",n:0,ch:[{n:1,s:81}]},{i:83,c:20,v:[0,9999],s:"1219/1220/1221/1222",
n:0,ch:[{n:1,s:81},{n:8,s:1},{n:8,s:1}]},{i:63,c:8,v:[100,200],s:"HUB0000",n:0,ch:[{n:1,s:1}]},{i:65,c:12,v:[100,200],s:"HUB0002",n:0,ch:[{n:1,s:1}]},{i:152,c:23,v:[0,9999],s:"FIRMWARE_UPGRADE_M3",n:0,ch:[{n:1,s:1}]},{i:153,c:22,v:[0,9999],s:"GenericDevice",n:0,ch:[{n:1,s:1}]},{i:154,c:9,v:[100,200],s:"USBSWITCH",n:0,ch:[{n:2,s:1},{n:2,s:1},{n:2,s:1},{n:2,s:1},{n:4,s:1},{n:4,s:1},{n:4,s:1},{n:4,s:1}]},{i:72,c:22,v:[0,0],s:"textled4x8",n:0,ch:[]},{i:73,c:22,v:[0,0],s:"textled1x8",n:0,ch:[]},{i:33280,c:22,v:[0,0],s:"ifkit288",n:0,ch:[]},{i:34048,c:22,v:[0,0],s:"power",n:0,ch:[]},{i:81,c:22,v:[0,0],s:"ifkit057",n:0,ch:[]},{i:96,c:22,v:[0,0],s:"ifkit3232",n:0,ch:[]},{i:114,c:22,v:[0,0],s:"1050",n:0,ch:[]}],MESH:[{i:1,c:8,v:[100,200],s:"HUB0001",ch:[{n:1,s:1}]}],SPI:[{i:1,c:8,v:[100,200],s:"HUB0004",ch:[{n:1,s:1}]},{i:2,c:23,v:[0,9999],s:"FIRMWARE_UPGRADE_M3",ch:[{n:1,s:1}]}],LIGHTNING:[{i:66,c:8,v:[100,200],s:"HUB0005",ch:[{n:1,s:1}]}],VIRTUAL:[{i:0,c:24,v:[100,200],s:"Dictionary",ch:[{n:1,s:1}]}]},vt=function(t,e){this.conn=t,this.type=e.type,this.phid=e.phid,this.parent=t.getDevice(e.parent),this.pphid=e.parent,this.vendorID=e.vendorID,this.productID=e.productID,this.deviceID=e.deviceID,this.serialNumber=e.serialNumber,this.label=e.label,this.version=e.version,this.interfaceNum=e.interfaceNum,this.index=e.index,this.hubPort=e.hubPort,this.isHubPort=0!==e.isHubPort,this.desc=e.desc,this.name=e.name,this.fwstr=e.fwstr,"VINT"===this.type&&(this.vintID=e.vintID),this.phiddev=y(e),this["class"]=this.phiddev.c,this.sku=this.phiddev.s};vt.prototype.toString=function(){return"DEV["+this.pphid+"/"+this.phid+"] "+this.name};var yt=function(t,e,n){this.listeners=[],this.conn=t,this.isopen=!1,this.isHubPort=e.isHubPort,this.parent=e,this.chid=n.chid,this.name=n.name,this.channelname=n.channelname,this.channelname.startsWith("Phidget")?this.cname=this.channelname.substring(7):this.cname=this.channelname,this["class"]=n["class"],this.uniqueIndex=n.uniqueIndex,this.index=n.index,this.cpversion=n.version,this.phidch=I(e,n),this.subclass=this.phidch.subcls};yt.prototype.getKey=function(){var t=this.parent.serialNumber+"_"+this.cname+"_"+this.index;return"VINT"===this.parent.type&&(t+=this.parent.hubPort+"_"+this.isHubPort),t},yt.prototype.getName=function(){return this.name},yt.prototype.match=function(t){return t["class"]===this["class"]&&((void 0==t._serialNumber||t._serialNumber===-1||t._serialNumber==this.parent.serialNumber)&&((void 0==t._channel||t._channel==this.index)&&((void 0==t._hubPort||t._hubPort===-1||t._hubPort==this.parent.hubPort)&&((void 0===t._isHubPort||t._isHubPort===this.isHubPort)&&((void 0===t._deviceLabel||null===t._deviceLabel||t._deviceLabel===this.parent.label)&&(e("matched:"+t+" -> "+this),!0))))))},yt.prototype.onDetach=function(){this.isopen&&(this.detaching=!0,this.userphid._close(this.userphid),delete this.userphid.channel,this.isopen=!1,delete this.userphid,delete this.detaching)},yt.prototype.closing=function(t){this.isopen&&this.userphid===t&&(this.userphid.isopen=!1,delete ch.userphid.channel,ch.isopen=!1,delete ch.userphid)},yt.prototype.open=function(t){var e=this;t.attaching=!0;var n=JSON.stringify({phid:this.parent.phid,channel:this.chid,"class":this["class"],index:this.uniqueIndex,version:this.cpversion});return new Promise(function(i,a){e.conn.sendRequest(0,0,0,O.Device,R.Open,n).then(function(n){t.attaching=!1,e.isopen=!0,e.userphid=t;var r=new Tt(e.conn,null,n);try{r.deliver()}catch(o){return void a(o)}t.wasOpened(e),i()})["catch"](function(t){a(t)})})},yt.prototype.close=function(){if(this.detaching)return Promise.resolve();var t=JSON.stringify({phid:this.parent.phid,index:this.uniqueIndex});return this.conn.sendRequest(0,0,0,O.Device,R.Close,t)},yt.prototype.toString=function(){return"CH["+this.parent.phid+"/"+this.cname+"("+this.index+")] "+this.name};var It=function(t,e){var n=this;this.name="Phidget",this._isHubPort=!1,this.id=E++,this.attaching=!1,this.useropen=!1,this.isopen=!1,this.isattached=!1,this.detaching=!1,t&&(this.channel=t),e&&(this.device=e),t&&!e&&(this.device=t.parent),e&&!t?this.isChannel=!1:this.isChannel=!0,this.manager=!1,(t||e)&&(this.manager=!0,this.isattached=!0),this.onAttach=function(t){},this.onDetach=function(t){},this.wasOpened=function(t){n.channel=t,n.device=t.parent,n.isopen=!0,n.isattached=!0,n.onopen(n)}};It.prototype.constructor=It,It.prototype.openTimedOut=function(){this.onclose(k.EPHIDGET_TIMEOUT,"Open timed out"),this.close()},It.prototype._close=function(){if(this.isopen)var t=this.channel.close();return delete this.openTimeout,delete this.openTime,void 0==this.channel||this.channel.detaching?this.useropen=!0:this.id in u&&delete u[this.id],this.isopen?(f.detaching=!0,f.isattached=!1,this.onDetach(this),f.detaching=!1,this.isopen=!1,delete this.channel,delete this.device):this.onclose(k.EPHIDGET_CLOSED,"Closed while waiting for open"),"undefined"!=typeof t?t:Promise.resolve()},It.prototype.handleSetStatus=function(t,e){"data"in this||(this.data={});for(var n in t.entries)this.data[n]=t.entries[n].v;if(this.data._class_version_!==e)throw new Et(k.EPHIDGET_BADVERSION,this.name+" version ("+this.data._class_version_+") does not match ("+e+")")},It.prototype.checkAttached=function(){if(!this.isattached&&!this.detaching)throw new Et(k.EPHIDGET_NOTATTACHED)},It.prototype.checkOpen=function(){if(!this.isopen)throw new Et(k.EPHIDGET_NOTATTACHED)},It.prototype.checkIsChannel=function(){if(!this.isChannel)throw new Et(k.EPHIDGET_UNSUPPORTED)},It.prototype.open=function(e){var n=this;if(this.useropen)return Promise.resolve(this);if(!this.isChannel)return Promise.reject(new Et(k.EPHIDGET_UNSUPPORTED));if(this.manager===!0&&(this.setChannel(this.getChannel()),this.setHubPort(this.getHubPort()),this.setDeviceSerialNumber(this.getDeviceSerialNumber()),this.setIsHubPortDevice(this.getIsHubPortDevice()),this.manager=!1),e){var i=parseInt(e);isNaN(i)||(this.openTimeout=i)}return u[this.id]=this,this.useropen=!0,this.openTime=t(),P(this),new Promise(function(t,e){n.onopen=function(){n.onAttach(n),t(n)},n.onclose=function(t,n){e(new Et(t,n))}})},It.prototype.close=function(){return e("closing phidget"),this.useropen=!1,this._close()},It.prototype.getAttached=function(){return this.isattached},It.prototype.getChannel=function(){return this.checkIsChannel(),this.isattached||this.detaching?this.channel.index:this._channel},It.prototype.setChannel=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._channel=t)},It.prototype.getChannelClass=function(){return this.checkIsChannel(),this.checkAttached(),this.channel["class"]},It.prototype.getChannelClassName=function(){return this.checkIsChannel(),this.checkAttached(),gt[this.channel["class"]]},It.prototype.getChannelName=function(){return this.checkIsChannel(),this.checkAttached(),this.channel.name},It.prototype.getChannelSubclass=function(){return this.checkIsChannel(),this.checkAttached(),this.channel.subclass},It.prototype.getDeviceClass=function(){return this.checkAttached(),this.device["class"]},It.prototype.getDeviceClassName=function(){return this.checkAttached(),lt[this.device["class"]]},It.prototype.getDeviceID=function(){return this.checkAttached(),this.device.deviceID},It.prototype.getDeviceLabel=function(){return this.isattached||this.detaching?this.device.label:(this.checkIsChannel(),this._deviceLabel?this._deviceLabel:"")},It.prototype.setDeviceLabel=function(t){this.checkIsChannel(),this._deviceLabel=t},It.prototype.getDeviceName=function(){return this.checkAttached(),this.device.name},It.prototype.getDeviceSerialNumber=function(){return this.isattached||this.detaching?this.device.serialNumber:(this.checkIsChannel(),this._serialNumber)},It.prototype.setDeviceSerialNumber=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._serialNumber=t)},It.prototype.getDeviceSKU=function(){return this.checkAttached(),this.device.sku},It.prototype.getDeviceVersion=function(){return this.checkAttached(),this.device.version},It.prototype.getHub=function(){this.checkAttached();for(var t=device;void 0!==t&&t["class"]!==V.PHIDCLASS_HUB;)t=t.parent;if(t)return new It(null,t)},It.prototype.getHubPort=function(){return this.isattached||this.detaching?this.device.hubPort:(this.checkIsChannel(),this._hubPort)},It.prototype.setHubPort=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._hubPort=t)},It.prototype.getIsChannel=function(){return this.isChannel},It.prototype.getIsHubPortDevice=function(){return this.isattached||this.detaching?this.device.isHubPort:(this.checkIsChannel(),this._isHubPort)},It.prototype.setIsHubPortDevice=function(t){this.checkIsChannel(),this._isHubPort=!!t},It.prototype.getParent=function(){if(this.checkAttached(),this.isChannel)var t=this.channel.parent;else var t=this.device.parent;if(t)return new It(null,t)},It.prototype.getDeviceDeviceVINTID=function(){return this.checkAttached(),this.device.vintID},It.prototype.getDeviceFirmwareUpgradeString=function(){switch(this.checkAttached(),this.device.type){case"USB":case"SPI":return this.device.fwstr;case"VINT":case"MESH":case"LIGHTNING":case"VIRTUAL":return this.device.sku}},It.prototype.writeDeviceLabel=function(t){this.checkIsChannel();var e=this;if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.send(this.channel,dt.BP_WRITELABEL).then(function(n){return e.device.label=t,n})},It.prototype.toString=function(){return this.name},f.Phidget=It;var ft=function(t){this.conn=t,this.isopen=!1,this.onDeviceAttach=function(t){},this.onDeviceDetach=function(t){},this.onAttach=function(t){},this.onDetach=function(t){}};ft.prototype["delete"]=function(){if(this.conn){var t=this.conn.Managers.indexOf(this);t!=-1&&this.conn.Managers.splice(t,1),delete this.conn}},ft.prototype.open=function(){if(this.conn){if(this.isopen)return Promise.resolve(this);for(var t in this.conn.Devices){t=this.conn.Devices[t];var e=new It(null,t);this.onDeviceAttach(e)}for(var n in this.conn.Channels){n=this.conn.Channels[n];var i=g(n["class"]),e=new i(n);this.onAttach(e)}return this.isopen=!0,Promise.resolve(this)}},ft.prototype.close=function(){this.conn&&(this.isopen=!1)},f.Manager=ft;var Ct=function(t){this.onmessage(t.data)},_t=function(t){var e=16,n=t.length,i=t;if(this.sockdatalen>0){var a=[this.sockdata,i];i=Buffer.concat(a,this.sockdata.length+i.length),this.sockdata=null,this.sockdatalen=0,n=i.length}if(n>=e)do{var r=new H(i);if(n===r.len+e)return void this.onmessage(i,r);if(n<r.len+e)break;var o=i.slice(0,r.len+e);i=i.slice(r.len+e),n-=o.length,this.onmessage(o,r)}while(n>=e);n>0&&(this.sockdata=i,this.sockdatalen=i.length)},Dt=function(n,o){if(a){var s=r.parse(n);if("ws:"===s.protocol)throw'websocket not supported with node.js, use "phid://server:port"';if("phid:"!==s.protocol)throw'expected phidget protocol, use "phid://server:port"';this.hostname=s.hostname,this.port=s.port}this.id=c++,p[this.id]=this,this.generation=0,this.TIMEOUT=5e3,this.connected=!1,this.stayopen=!1,this.name=n,this.uri=n,this.websocket=!1,this.ws=null,this.sock=null,this.sockdata=null,this.sockdatalen=0,this.nonceC=null,this.passwd="",this.Channels={},this.Devices={},this.DeviceList=[],this.Managers=[],this.reqseq=10,this.requests={},this.oChannel=null,this.cChannel=null,this.onError=function(t,e){console.error("Connection error: "+e+":0x"+t.toString(16))},this.onAuthenticationNeeded=function(){console.log("A password is required for this server. Handle the onAuthenticationNeeded event to return a password.")},o&&(o.name&&(this.name=o.name),o.onConnect&&"function"==typeof o.onConnect&&(this.onConnect=o.onConnect),o.onClose&&"function"==typeof o.onClose&&(this.onClose=o.onClose),o.onAuthenticationNeeded&&"function"==typeof o.onAuthenticationNeeded&&(this.onAuthenticationNeeded=o.onAuthenticationNeeded),o.onError&&"function"==typeof o.onError&&(this.onError=o.onError),o.passwd&&(this.passwd=o.passwd)),this.onattach=function(t){var e=new It(null,t);for(var n in this.Managers)this.Managers[n].isopen&&this.Managers[n].onDeviceAttach(e)},this.ondetach=function(t){var e=new It(null,t);for(var n in this.Managers)this.Managers[n].isopen&&this.Managers[n].onDeviceDetach(e)},this.onchannelattach=function(t){var e=g(t["class"]),n=new e(t);for(var i in this.Managers)this.Managers[i].isopen&&this.Managers[i].onAttach(n);v(t)},this.onchanneldetach=function(t){var e=new g(t["class"]),n=new e(t);for(var i in this.Managers)this.Managers[i].isopen&&this.Managers[i].onDetach(n);t.onDetach()},this.matchPhidget=function(t){for(var e in this.Channels)if(this.Channels[e].match(t))return this.Channels[e].open(t)["catch"](function(t){this.onError?this.onError(t.errorCode,t.message):console.error(t)}.bind(t)),!0;return!1},this.onevent=function(t){e("event:"+t)},this.onmessage=function(t,e){var n=new Uint8Array(t);if(e||(e=new H(n)),e.len>0){if(a)var r=t.slice(e.hdrlen);else var r=new Uint8Array(n.buffer,e.hdrlen,e.len);var o=i(r);t=JSON.parse(o)}this.connected?this.ondatamessage(t,e):this.onauthmessage(t,e)},this.checkRequests=function(){for(var e in this.requests)if(this.requests[e].generation==this.generation){var n=this.requests[e];if(t()-n.time>this.TIMEOUT)try{n.onTimeout()}catch(i){console.error(i)}finally{delete this.requests[e]}}else delete this.requests[e]},this._xid=setInterval(this.checkRequests.bind(this),2e3),f.onConnectionAdded&&f.onConnectionAdded(this)};Dt.prototype.setKeepAlive=function(t){var e=parseInt(t);if(isNaN(e))throw new Exception("invalid keep alive:"+t);this.TIMEOUT=e},Dt.prototype["delete"]=function(){return this.connected?(this.onError(k.EPHIDGET_BUSY,"close connection before deleting"),!1):(f.onConnectionRemoved&&f.onConnectionRemoved(this),delete p[this.id],!0)},Dt.prototype.createManager=function(t){var e=new ft(this);return t&&("onDeviceAttach"in t&&"function"==typeof t.onDeviceAttach&&(e.onDeviceAttach=t.onDeviceAttach),"onDeviceDetach"in t&&"function"==typeof t.onDeviceDetach&&(e.onDeviceDetach=t.onDeviceDetach),"onAttach"in t&&"function"==typeof t.onAttach&&(e.onAttach=t.onAttach),"onDetach"in t&&"function"==typeof t.onDetach&&(e.onDetach=t.onDetach)),this.Managers.push(e),e},Dt.prototype.getChannel=function(t){if(void 0===this.Channels[t])throw new Et(k.EPHIDGET_UNEXPECTED,"invalid channel id:"+t);return this.Channels[t]},Dt.prototype.getDevice=function(t){return this.Devices[t]?this.Devices[t]:null},Dt.prototype.close=function(){return this.stayopen=!1,this.closesocket()},Dt.prototype.closesocket=function(){if(this.connected=!1,void 0!=this.ws)try{this.ws.close()}catch(t){}else if(void 0!=this.sock)try{this.sock.destroy(),this.sock.unref()}catch(t){}return this.ws=void 0,this.sock=void 0,this.generation++,Promise.resolve()},Dt.prototype.send=function(t,e){var n=this,i=!1;return new Promise(function(a,r){try{if(n.websocket)n.ws&&n.ws.readyState==WebSocket.OPEN||r(new Et(k.EPHIDGET_UNEXPECTED,"invalid websocket state")),n.ws.send(t),e.length>0&&n.ws.send(e);else{n.sock||r(new Et(k.EPHIDGET_UNEXPECTED,"invalid socket"));for(var o=new Buffer(t.byteLength),s=0;s<t.length;s++)o[s]=t[s];n.sock.write(o),e.length>0&&n.sock.write(e)}}catch(h){i=!0,r(new Et(k.EPHIDGET_UNEXPECTED,h.message))}finally{i||a()}})},Dt.prototype.getNextRequestSequence=function(){return this.reqseq>=65535&&(this.reqseq=10),this.reqseq++,this.reqseq},Dt.prototype.sendRequest=function(e,i,a,r,o,s){var h=this;return 0===i&&(i=this.getNextRequestSequence()),new Promise(function(c,p){if(h.requests[i]={generation:h.generation,time:t(),onReply:function(t){void 0!==t.E?0!==t.E?p(new Et(t.E)):c(t.R):c(t)},onTimeout:function(){p(new Et(k.EPHIDGET_TIMEOUT))},onError:function(t,e){p(new Et(t,e))}},h.websocket){var u=n(s),E=new H(u.length,e,i,a,r,o);h.send(E.buffer,u)["catch"](function(t){p(t)})}else{var E=new H(s.length,e,i,a,r,o);h.send(E.buffer,s)["catch"](function(t){p(t)})}})},Dt.prototype.sendReply=function(t,e,i,a){var r=2,o=this.getNextRequestSequence();if(this.websocket){var s=n(a),h=new H(s.length,r,o,t,e,i);return this.send(h.buffer,s)}var h=new H(a.length,r,o,t,e,i);return this.send(h.buffer,a)},Dt.prototype.maintainConnection=function(){this.connected=!0,this.stayopen=!0,void 0===this.connectionMaintainer&&(this.connectionMaintainer=setInterval(function(){var t=this;this.connected!==!0&&this.stayopen===!0&&this.connect()["catch"](function(e){t.onError(e.errorCode,e.message)})}.bind(this),4e3))},Dt.prototype.connect=function(){if(this.connected===!0)return Promise.resolve(this);var t=this;return new Promise(function(e,n){function i(){t.handshake().then(function(){t.maintainConnection(),e()})["catch"](function(t){n(t)})}try{if(a){if(t.sock){try{t.sock.close()}catch(r){}delete t.sock}t.sock=new o.Socket,t.sock.on("data",_t.bind(t)),t.sock.on("close",t.doclose.bind(t)),t.sock.on("error",function(t){console.error("socket error",t),this.doclose()}.bind(t)),t.sock.on("connect",i.bind(t)),t.sock.connect({host:t.hostname,port:t.port})}else{if(t.ws){try{t.ws.close()}catch(r){}delete t.ws}t.websocket=!0,t.ws=new WebSocket(t.uri),t.ws.onopen=i.bind(t),t.ws.onclose=t.doclose.bind(t),t.ws.onmessage=Ct.bind(t),t.ws.onerror=function(t){console.error("socket error (server unavailable?)",t),this.doclose()}.bind(t),t.ws.binaryType="arraybuffer"}}catch(r){n(new Et(k.EPHIDGET_UNEXPECTED,r.message))}})},Dt.prototype.doclose=function(){for(;this.DeviceList.length>0;)this.deviceDetach(this.DeviceList[this.DeviceList.length-1]);this.closesocket()},Dt.prototype.onauthmessage=function(t,e){void 0===this.authdata?console.error("packet recieved while not connected and authdata is not defined"):this.authdata(t)},Dt.prototype.ondatamessage=function(t,e){var n=this.requests[e.repseq];if(n&&(delete this.requests[e.repseq],n.onReply(t)),e.flags&N.Reply)return void(void 0===n&&this.onError(k.EPHIDGET_UNEXPECTED,"No handler registered for reply: "+e));switch(e.type){case O.Command:var i=this.handleCommand(e,t);break;case O.Device:var i=this.handleDevice(e,t);break;case O.Channel:var i=this.handleChannel(e,t);break;default:var i=l(k.EPHIDGET_INVALID,"Unknown request type:"+e.type)}if(i){var a=this;i["catch"](function(t){a.onError(t.errorCode,t.message)})}},Dt.prototype.handleCommand=function(t,e){switch(t.stype){case R.KeepAlive:return this.sendReply(t.reqseq,O.Command,R.KeepAlive,[]);default:return l(k.EPHIDGET_UNEXPECTED,"Unknown command subrequest:"+t.stype)}},Dt.prototype.handleDevice=function(t,e){switch(t.stype){case R.Attach:return this.handleDeviceAttach(t,e);case R.Detach:return this.handleDeviceDetach(t,e);case R.BridgePkt:return this.handleBridgePacket(t,e);case R.Channel:return this.handleChannel(t,e);default:return l(k.EPHIDGET_UNEXPECTED,"Unknown device subrequest:"+t.stype)}},Dt.prototype.handleDeviceAttach=function(t,e){var n=new vt(this,e);return n.phid in this.Devices?l(k.EPHIDGET_DUPLICATE,"duplicate device:"+n):(this.Devices[n.phid]=n,this.DeviceList.push(n),this.onattach(n),Promise.resolve())},Dt.prototype.handleDeviceDetach=function(t,e){var n;return n=this.getDevice(e.phid),n!==-1&&this.deviceDetach(n),Promise.resolve()},Dt.prototype.deviceDetach=function(t){if(!(t.phid in this.Devices))return l(k.EPHIDGET_NOENT,"no such device:"+t);for(var e in this.Channels)this.Channels[e].parent===t&&(this.onchanneldetach(this.Channels[e]),delete this.Channels[e]);return this.ondetach(t),delete this.Devices[t.phid],this.DeviceList.splice(this.DeviceList.indexOf(t),1),Promise.resolve()},Dt.prototype.handleChannel=function(t,e){var n,i;return n=this.getDevice(e.parent),null===n?l(k.EPHIDGET_UNEXPECTED,"missing channel parent"):(i=new yt(this,n,e),this.Channels[i.chid]=i,this.onchannelattach(i),Promise.resolve())},Dt.prototype.handleBridgePacket=function(t,e){var n=new Tt(this,t,e);return n.deliver()},Dt.prototype.handshake=function(){var t=this;return new Promise(function(e,n){function i(){var e=JSON.stringify({name:C,type:_,pmajor:D,pminor:S}),i=new H(e.length,0,0,0,O.Connect,R.HandShakeC0);t.send(i.buffer,e)["catch"](function(t){n(t)})}function a(t){if(0!==t.result)return void n(new Et(t.result,"server rejected handshake"));this.nonceC=T(16);var i=JSON.stringify({ident:A,nonceC:this.nonceC}),a=new H(i.length,0,0,0,O.Connect,R.AuthC0);this.send(a.buffer,i)["catch"](function(t){n(t)}),this.authdata=function(t){if(0!==t.result)return void n(new Et(t.result,"authentication failed"));if(this.nonceC!=t.nonceC)return void n(new Et(k.EPHIDGET_UNEXPECTED,"Authentication Failure: nonce do not match ("+this.nonceC+") vs ("+t.nonceC+")"));var i=A+this.passwd+this.nonceC+t.nonceS+t.salt,r=this.hash(i),o=JSON.stringify({nonceC:this.nonceC,nonceS:t.nonceS,proof:r});a=new H(o.length,0,0,0,O.Connect,R.AuthC1),this.send(a.buffer,o)["catch"](function(t){n(t)}),this.authdata=function(t){if(0!=t.E){if(this.onAuthenticationNeeded){var i=this.onAuthenticationNeeded();if(void 0!==i&&"string"==typeof i)return this.passwd=i,delete this.authdata,void setTimeout(function(){this.connect().then(function(){e()})["catch"](function(t){n(t)})}.bind(this),100)}return void n(new Et(t.E,"authentication failed: server rejected proof"))}this.connected=!0,delete this.authdata,e()}}}t.authdata=a,i()})},Dt.prototype.hash=function(t){if(a){var e=s.createHash("sha256");return e.update(t),e.digest("base64")}for(var n=Sha256.hash(t),i="",r=0;r<n.length;r+=2){var o=parseInt(n.substring(r,r+2),16);i+=String.fromCharCode(o)}return window.btoa(i)},f.Connection=Dt;var St=function(){It.apply(this,arguments),this.name="Accelerometer",this["class"]=M.PHIDCHCLASS_ACCELEROMETER,this.onAccelerationChange=function(t,e){},this.onError=function(t,e){}};St.prototype=Object.create(It.prototype),St.prototype.constructor=St,f.Accelerometer=St,St.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},St.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},St.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_ACCELERATIONCHANGE:this.handleAccelerationChangeEvent(t)}return!0},St.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETCHANGETRIGGER:return this.data.accelerationChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("AccelerationChangeTrigger"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},St.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},St.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},St.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},St.prototype.getAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.accelerationChangeTrigger},St.prototype.setAccelerationChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.accelerationChangeTrigger=t})},St.prototype.getMinAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.minAccelerationChangeTrigger},St.prototype.getMaxAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.maxAccelerationChangeTrigger},St.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},St.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},St.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},St.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},St.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},St.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},St.prototype.handleAccelerationChangeEvent=function(t){this.data.acceleration=t.get("0"),this.data.timestamp=t.get("1"),this.onAccelerationChange(this.data.acceleration,this.data.timestamp)};var At=function(){It.apply(this,arguments),this.name="BLDCMotor",this["class"]=M.PHIDCHCLASS_BLDCMOTOR,this.onBrakingStrengthChange=function(t){},this.onPositionChange=function(t){},this.onVelocityUpdate=function(t){},this.onError=function(t,e){}};At.prototype=Object.create(It.prototype),At.prototype.constructor=At,f.BLDCMotor=At,At.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},At.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},At.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_BRAKINGSTRENGTHCHANGE:this.handleBrakingStrengthChangeEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case dt.BP_DUTYCYCLECHANGE:this.handleVelocityUpdateEvent(t)}return!0},At.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETSTALLVELOCITY:return this.data.stallVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("StallVelocity"),!0;case dt.BP_SETBRAKINGDUTYCYCLE:return this.data.targetBrakingStrength=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetBrakingStrength"),!0;case dt.BP_SETDUTYCYCLE:return this.data.targetVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetVelocity"),!0}},At.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},At.prototype.setAcceleration=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},At.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},At.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},At.prototype.getBrakingStrength=function(){return this.checkOpen(),this.data.brakingStrength},At.prototype.getMinBrakingStrength=function(){return this.checkOpen(),this.data.minBrakingStrength},At.prototype.getMaxBrakingStrength=function(){return this.checkOpen(),this.data.maxBrakingStrength},At.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},At.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},At.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},At.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},At.prototype.getPosition=function(){return this.checkOpen(),this.data.position},At.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},At.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},At.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},At.prototype.getStallVelocity=function(){return this.checkOpen(),this.data.stallVelocity},At.prototype.setStallVelocity=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETSTALLVELOCITY).then(function(e){n.data.stallVelocity=t})},At.prototype.getMinStallVelocity=function(){return this.checkOpen(),this.data.minStallVelocity},At.prototype.getMaxStallVelocity=function(){return this.checkOpen(),this.data.maxStallVelocity},At.prototype.getTargetBrakingStrength=function(){return this.checkOpen(),this.data.targetBrakingStrength},At.prototype.setTargetBrakingStrength=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETBRAKINGDUTYCYCLE).then(function(e){n.data.targetBrakingStrength=t})},At.prototype.getTargetVelocity=function(){return this.checkOpen(),this.data.targetVelocity},At.prototype.setTargetVelocity=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETDUTYCYCLE).then(function(e){n.data.targetVelocity=t})},At.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},At.prototype.getMinVelocity=function(){return this.checkOpen(),this.data.minVelocity},At.prototype.getMaxVelocity=function(){return this.checkOpen(),this.data.maxVelocity},At.prototype.handleBrakingStrengthChangeEvent=function(t){this.data.brakingStrength=t.get("0"),this.onBrakingStrengthChange(this.data.brakingStrength)},At.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},At.prototype.handleVelocityUpdateEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityUpdate(this.data.velocity)},At.prototype.getPosition=function(){return this.data.position},At.prototype.getMinPosition=function(){return this.data.minPosition},At.prototype.getMaxPosition=function(){return this.data.maxPosition},At.prototype.addPositionOffset=function(t){},At.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},At.prototype.getStallVelocity=function(){return this.data.stallVelocity},At.prototype.setStallVelocity=function(t){e.set({name:"stallVelocity",type:"g",value:t});var e=new Tt(this.channel.conn);e.send(this.channel,dt.BP_SETSTALLVELOCITY,function(){this.data.stallVelocity=t,"function"==typeof this.setStallVelocitySuccess&&this.setStallVelocitySuccess(t)}.bind(this))},At.prototype.getMinStallVelocity=function(){return this.data.minStallVelocity},At.prototype.getMaxStallVelocity=function(){return this.data.maxStallVelocity};var Ot=function(){It.apply(this,arguments),this.name="CapacitiveTouch",this["class"]=M.PHIDCHCLASS_CAPACITIVETOUCH,this.onTouch=function(t){},this.onTouchEnd=function(){},this.onError=function(t,e){}};Ot.prototype=Object.create(It.prototype),Ot.prototype.constructor=Ot,f.CapacitiveTouch=Ot,Ot.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ot.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ot.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_TOUCHINPUTVALUECHANGE:this.handleTouchEvent(t);break;case dt.BP_TOUCHINPUTEND:this.handleTouchEndEvent(t)}return!0},Ot.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),
!0;case dt.BP_SETSENSITIVITY:return this.data.sensitivity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Sensitivity"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.touchValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TouchValueChangeTrigger"),!0}},Ot.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Ot.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Ot.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Ot.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Ot.prototype.getIsTouched=function(){return this.checkOpen(),!!this.data.isTouched},Ot.prototype.getSensitivity=function(){return this.checkOpen(),this.data.sensitivity},Ot.prototype.setSensitivity=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETSENSITIVITY).then(function(e){n.data.sensitivity=t})},Ot.prototype.getMinSensitivity=function(){return this.checkOpen(),this.data.minSensitivity},Ot.prototype.getMaxSensitivity=function(){return this.checkOpen(),this.data.maxSensitivity},Ot.prototype.getTouchValue=function(){return this.checkOpen(),this.data.touchValue},Ot.prototype.getMinTouchValue=function(){return this.checkOpen(),this.data.minTouchValue},Ot.prototype.getMaxTouchValue=function(){return this.checkOpen(),this.data.maxTouchValue},Ot.prototype.getTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.touchValueChangeTrigger},Ot.prototype.setTouchValueChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.touchValueChangeTrigger=t})},Ot.prototype.getMinTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.minTouchValueChangeTrigger},Ot.prototype.getMaxTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.maxTouchValueChangeTrigger},Ot.prototype.handleTouchEvent=function(t){this.data.touchValue=t.get("0"),this.onTouch(this.data.touchValue)},Ot.prototype.handleTouchEndEvent=function(t){this.onTouchEnd()};var Rt=function(){It.apply(this,arguments),this.name="CurrentInput",this["class"]=M.PHIDCHCLASS_CURRENTINPUT,this.onCurrentChange=function(t){},this.onError=function(t,e){}};Rt.prototype=Object.create(It.prototype),Rt.prototype.constructor=Rt,f.CurrentInput=Rt,Rt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Rt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Rt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_CURRENTCHANGE:this.handleCurrentChangeEvent(t)}return!0},Rt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETCHANGETRIGGER:return this.data.currentChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentChangeTrigger"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},Rt.prototype.getCurrent=function(){return this.checkOpen(),this.data.current},Rt.prototype.getMinCurrent=function(){return this.checkOpen(),this.data.minCurrent},Rt.prototype.getMaxCurrent=function(){return this.checkOpen(),this.data.maxCurrent},Rt.prototype.getCurrentChangeTrigger=function(){return this.checkOpen(),this.data.currentChangeTrigger},Rt.prototype.setCurrentChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.currentChangeTrigger=t})},Rt.prototype.getMinCurrentChangeTrigger=function(){return this.checkOpen(),this.data.minCurrentChangeTrigger},Rt.prototype.getMaxCurrentChangeTrigger=function(){return this.checkOpen(),this.data.maxCurrentChangeTrigger},Rt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Rt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Rt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Rt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Rt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},Rt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},Rt.prototype.handleCurrentChangeEvent=function(t){this.data.current=t.get("0"),this.onCurrentChange(this.data.current)};var Nt=function(){It.apply(this,arguments),this.name="DCMotor",this["class"]=M.PHIDCHCLASS_DCMOTOR,this.onBrakingStrengthChange=function(t){},this.onVelocityUpdate=function(t){},this.onBackEMFChange=function(t){},this.onError=function(t,e){}};Nt.prototype=Object.create(It.prototype),Nt.prototype.constructor=Nt,f.DCMotor=Nt,Nt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Nt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Nt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_BACKEMFCHANGE:this.handleBackEMFChangeEvent(t);break;case dt.BP_BRAKINGSTRENGTHCHANGE:this.handleBrakingStrengthChangeEvent(t);break;case dt.BP_DUTYCYCLECHANGE:this.handleVelocityUpdateEvent(t)}return!0},Nt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case dt.BP_SETBACKEMFSENSINGSTATE:return this.data.backEMFSensingState=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BackEMFSensingState"),!0;case dt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case dt.BP_SETCURRENTREGULATORGAIN:return this.data.currentRegulatorGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentRegulatorGain"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case dt.BP_SETBRAKINGDUTYCYCLE:return this.data.targetBrakingStrength=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetBrakingStrength"),!0;case dt.BP_SETDUTYCYCLE:return this.data.targetVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetVelocity"),!0}},Nt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Nt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Nt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Nt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Nt.prototype.getBackEMF=function(){return this.checkOpen(),this.data.backEMF},Nt.prototype.getBackEMFSensingState=function(){return this.checkOpen(),!!this.data.backEMFSensingState},Nt.prototype.setBackEMFSensingState=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETBACKEMFSENSINGSTATE).then(function(e){n.data.backEMFSensingState=t})},Nt.prototype.getBrakingStrength=function(){return this.checkOpen(),this.data.brakingStrength},Nt.prototype.getMinBrakingStrength=function(){return this.checkOpen(),this.data.minBrakingStrength},Nt.prototype.getMaxBrakingStrength=function(){return this.checkOpen(),this.data.maxBrakingStrength},Nt.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},Nt.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},Nt.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},Nt.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},Nt.prototype.getCurrentRegulatorGain=function(){return this.checkOpen(),this.data.currentRegulatorGain},Nt.prototype.setCurrentRegulatorGain=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURRENTREGULATORGAIN).then(function(e){n.data.currentRegulatorGain=t})},Nt.prototype.getMinCurrentRegulatorGain=function(){return this.checkOpen(),this.data.minCurrentRegulatorGain},Nt.prototype.getMaxCurrentRegulatorGain=function(){return this.checkOpen(),this.data.maxCurrentRegulatorGain},Nt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Nt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Nt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Nt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Nt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},Nt.prototype.setFanMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},Nt.prototype.getTargetBrakingStrength=function(){return this.checkOpen(),this.data.targetBrakingStrength},Nt.prototype.setTargetBrakingStrength=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETBRAKINGDUTYCYCLE).then(function(e){n.data.targetBrakingStrength=t})},Nt.prototype.getTargetVelocity=function(){return this.checkOpen(),this.data.targetVelocity},Nt.prototype.setTargetVelocity=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETDUTYCYCLE).then(function(e){n.data.targetVelocity=t})},Nt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},Nt.prototype.getMinVelocity=function(){return this.checkOpen(),this.data.minVelocity},Nt.prototype.getMaxVelocity=function(){return this.checkOpen(),this.data.maxVelocity},Nt.prototype.handleBackEMFChangeEvent=function(t){this.data.backEMF=t.get("0"),this.onBackEMFChange(this.data.backEMF)},Nt.prototype.handleBrakingStrengthChangeEvent=function(t){this.data.brakingStrength=t.get("0"),this.onBrakingStrengthChange(this.data.brakingStrength)},Nt.prototype.handleVelocityUpdateEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityUpdate(this.data.velocity)};var Ht=function(){It.apply(this,arguments),this.name="Dictionary",this["class"]=M.PHIDCHCLASS_DICTIONARY,this.onAdd=function(t,e){},this.onUpdate=function(t,e){},this.onRemove=function(t){},this.onError=function(t,e){}};Ht.prototype=Object.create(It.prototype),Ht.prototype.constructor=Ht,f.Dictionary=Ht,Ht.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ht.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ht.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_DICTIONARYADDED:this.handleAddEvent(t);break;case dt.BP_DICTIONARYREMOVED:this.handleRemoveEvent(t);break;case dt.BP_DICTIONARYUPDATED:this.handleUpdateEvent(t)}return!0},Ht.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Ht.prototype.add=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,dt.BP_DICTIONARYADD)},Ht.prototype.removeAll=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_DICTIONARYREMOVEALL)},Ht.prototype.get=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.set({name:"1",type:"s",value:value}),e.set({name:"2",type:"d",value:valueLen}),e.send(this.channel,dt.BP_DICTIONARYGET)},Ht.prototype.remove=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.send(this.channel,dt.BP_DICTIONARYREMOVE)},Ht.prototype.scan=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.set({name:"1",type:"s",value:keyList}),e.set({name:"2",type:"d",value:keyListLen}),e.send(this.channel,dt.BP_DICTIONARYSCAN)},Ht.prototype.set=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,dt.BP_DICTIONARYSET)},Ht.prototype.update=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,dt.BP_DICTIONARYUPDATE)},Ht.prototype.handleAddEvent=function(t){var e=t.get("0"),n=t.get("1");this.onAdd(e,n)},Ht.prototype.handleRemoveEvent=function(t){var e=t.get("0");this.onRemove(e)},Ht.prototype.handleUpdateEvent=function(t){var e=t.get("0"),n=t.get("1");this.onUpdate(e,n)},Ht.prototype.get=function(t,e){var n=this;return new Promise(function(i,a){var r=new Tt(n.channel.conn);r.set({name:"key",type:"s",value:t}),r.send(n.channel,dt.BP_DICTIONARYGET).then(function(t){i(t)})["catch"](function(n){void 0!==e?i(e,t):a(n)})})},Ht.prototype.scan=function(t){var e=this,n=new Tt(this.channel.conn);return n.set({name:"startKey",type:"s",value:t}),n.send(e.channel,dt.BP_DICTIONARYSCAN).then(function(t){return 0==t.length?[]:t.trim().split("\n")})};var mt=function(){It.apply(this,arguments),this.name="DigitalInput",this["class"]=M.PHIDCHCLASS_DIGITALINPUT,this.onStateChange=function(t){},this.onError=function(t,e){}};mt.prototype=Object.create(It.prototype),mt.prototype.constructor=mt,f.DigitalInput=mt,mt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},mt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},mt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_STATECHANGE:this.handleStateChangeEvent(t)}return!0},mt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETINPUTMODE:return this.data.inputMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("InputMode"),!0;case dt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},mt.prototype.getInputMode=function(){return this.checkOpen(),this.data.inputMode},mt.prototype.setInputMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETINPUTMODE).then(function(e){n.data.inputMode=t})},mt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},mt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},mt.prototype.getState=function(){return this.checkOpen(),!!this.data.state},mt.prototype.handleStateChangeEvent=function(t){this.data.state=!!t.get("0"),this.onStateChange(this.data.state)};var kt=function(){It.apply(this,arguments),this.name="DigitalOutput",this["class"]=M.PHIDCHCLASS_DIGITALOUTPUT,this.onError=function(t,e){}};kt.prototype=Object.create(It.prototype),kt.prototype.constructor=kt,f.DigitalOutput=kt,kt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},kt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},kt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},kt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDUTYCYCLE:return this.data.dutyCycle=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DutyCycle"),!0;case dt.BP_SETLEDCURRENTLIMIT:return this.data.LEDCurrentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("LEDCurrentLimit"),!0;case dt.BP_SETLEDFORWARDVOLTAGE:return this.data.LEDForwardVoltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("LEDForwardVoltage"),!0;case dt.BP_SETSTATE:return this.data.state=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("State"),!0}},kt.prototype.getDutyCycle=function(){return this.checkOpen(),this.data.dutyCycle},kt.prototype.setDutyCycle=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETDUTYCYCLE).then(function(e){n.data.dutyCycle=t})},kt.prototype.getMinDutyCycle=function(){return this.checkOpen(),this.data.minDutyCycle},kt.prototype.getMaxDutyCycle=function(){return this.checkOpen(),this.data.maxDutyCycle},kt.prototype.getLEDCurrentLimit=function(){return this.checkOpen(),this.data.LEDCurrentLimit},kt.prototype.setLEDCurrentLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETLEDCURRENTLIMIT).then(function(e){n.data.LEDCurrentLimit=t})},kt.prototype.getMinLEDCurrentLimit=function(){return this.checkOpen(),this.data.minLEDCurrentLimit},kt.prototype.getMaxLEDCurrentLimit=function(){return this.checkOpen(),this.data.maxLEDCurrentLimit},kt.prototype.getLEDForwardVoltage=function(){return this.checkOpen(),this.data.LEDForwardVoltage},kt.prototype.setLEDForwardVoltage=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETLEDFORWARDVOLTAGE).then(function(e){n.data.LEDForwardVoltage=t})},kt.prototype.getState=function(){return this.checkOpen(),!!this.data.state},kt.prototype.setState=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSTATE).then(function(e){n.data.state=t})};var Bt=function(){It.apply(this,arguments),this.name="DistanceSensor",this["class"]=M.PHIDCHCLASS_DISTANCESENSOR,this.onDistanceChange=function(t){},this.onSonarReflectionsUpdate=function(t,e,n){},this.onError=function(t,e){}};Bt.prototype=Object.create(It.prototype),Bt.prototype.constructor=Bt,f.DistanceSensor=Bt,Bt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Bt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Bt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_DISTANCECHANGE:this.handleDistanceChangeEvent(t);break;case dt.BP_SONARUPDATE:this.handleSonarReflectionsUpdateEvent(t)}return!0},Bt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.distanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DistanceChangeTrigger"),!0;case dt.BP_SETSONARQUIETMODE:return this.data.sonarQuietMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SonarQuietMode"),!0}},Bt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Bt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Bt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Bt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Bt.prototype.getDistance=function(){return this.checkOpen(),this.data.distance},Bt.prototype.getMinDistance=function(){return this.checkOpen(),this.data.minDistance},Bt.prototype.getMaxDistance=function(){return this.checkOpen(),this.data.maxDistance},Bt.prototype.getDistanceChangeTrigger=function(){return this.checkOpen(),this.data.distanceChangeTrigger},Bt.prototype.setDistanceChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.distanceChangeTrigger=t})},Bt.prototype.getMinDistanceChangeTrigger=function(){return this.checkOpen(),this.data.minDistanceChangeTrigger},Bt.prototype.getMaxDistanceChangeTrigger=function(){return this.checkOpen(),this.data.maxDistanceChangeTrigger},Bt.prototype.getSonarQuietMode=function(){return this.checkOpen(),!!this.data.sonarQuietMode},Bt.prototype.setSonarQuietMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSONARQUIETMODE).then(function(e){n.data.sonarQuietMode=t})},Bt.prototype.handleDistanceChangeEvent=function(t){this.data.distance=t.get("0"),this.onDistanceChange(this.data.distance)},Bt.prototype.handleSonarReflectionsUpdateEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2");this.onSonarReflectionsUpdate(e,n,i)},Bt.prototype.getSonarReflections=function(){return this.checkOpen(),{distances:this.data.distances,amplitudes:this.data.amplitudes,count:this.data.count}};var Gt=function(){It.apply(this,arguments),this.name="Encoder",this["class"]=M.PHIDCHCLASS_ENCODER,this.onPositionChange=function(t,e,n){},this.onError=function(t,e){}};Gt.prototype=Object.create(It.prototype),Gt.prototype.constructor=Gt,f.Encoder=Gt,Gt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Gt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Gt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t)}return!0},Gt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETIOMODE:return this.data.IOMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IOMode"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.positionChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PositionChangeTrigger"),!0}},Gt.prototype.setEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENABLED).then(function(e){n.data.enabled=t})},Gt.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},Gt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Gt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Gt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Gt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Gt.prototype.getIndexPosition=function(){return this.checkOpen(),this.data.indexPosition},Gt.prototype.getIOMode=function(){return this.checkOpen(),this.data.IOMode},Gt.prototype.setIOMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETIOMODE).then(function(e){n.data.IOMode=t})},Gt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Gt.prototype.getPositionChangeTrigger=function(){return this.checkOpen(),this.data.positionChangeTrigger},Gt.prototype.setPositionChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.positionChangeTrigger=t})},Gt.prototype.getMinPositionChangeTrigger=function(){return this.checkOpen(),this.data.minPositionChangeTrigger},Gt.prototype.getMaxPositionChangeTrigger=function(){return this.checkOpen(),this.data.maxPositionChangeTrigger},Gt.prototype.handlePositionChangeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=!!t.get("2");this.onPositionChange(e,n,i)},Gt.prototype.handlePositionChangeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a=0;i&&(a=t.get("3"),this.data.indexPosition=this.data.position+a),this.data.position+=e,this.onPositionChange(e,n,i)},Gt.prototype.setPosition=function(t){1e300!=this.data.indexPosition&&(this.data.indexPosition+=t-this.data.position),this.data.position=t};var Lt=function(){It.apply(this,arguments),this.name="FirmwareUpgrade",this["class"]=M.PHIDCHCLASS_FIRMWAREUPGRADE,this.onProgressChange=function(t){},this.onError=function(t,e){}};Lt.prototype=Object.create(It.prototype),Lt.prototype.constructor=Lt,f.FirmwareUpgrade=Lt,Lt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Lt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Lt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_PROGRESSCHANGE:this.handleProgressChangeEvent(t)}return!0},Lt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Lt.prototype.getActualDeviceID=function(){return this.checkOpen(),this.data.actualDeviceID},Lt.prototype.getActualDeviceName=function(){return this.checkOpen(),this.data.actualDeviceName},Lt.prototype.getActualDeviceSKU=function(){return this.checkOpen(),this.data.actualDeviceSKU},Lt.prototype.getActualDeviceVersion=function(){return this.checkOpen(),this.data.actualDeviceVersion},Lt.prototype.getActualDeviceVINTID=function(){return this.checkOpen(),this.data.actualDeviceVINTID},Lt.prototype.getProgress=function(){return this.checkOpen(),this.data.progress},Lt.prototype.sendFirmware=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"c",value:t}),e.set({name:"1",type:"d",value:dataLen}),e.send(this.channel,dt.BP_SENDFIRMWARE)},Lt.prototype.handleProgressChangeEvent=function(t){this.data.progress=t.get("0"),this.onProgressChange(this.data.progress)};var Vt=function(){It.apply(this,arguments),this.name="FrequencyCounter",this["class"]=M.PHIDCHCLASS_FREQUENCYCOUNTER,this.onFrequencyChange=function(t){},this.onCountChange=function(t,e){},this.onError=function(t,e){}};Vt.prototype=Object.create(It.prototype),Vt.prototype.constructor=Vt,f.FrequencyCounter=Vt,Vt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Vt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Vt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_COUNTCHANGE:this.handleCountChangeEvent(t);break;case dt.BP_FREQUENCYCHANGE:this.handleFrequencyChangeEvent(t)}return!0},Vt.prototype._bridgeInput=function(t){
switch(t.vpkt){default:return!1;case dt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETFILTERTYPE:return this.data.filterType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FilterType"),!0;case dt.BP_SETINPUTMODE:return this.data.inputMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("InputMode"),!0;case dt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},Vt.prototype.getCount=function(){return this.checkOpen(),this.data.count},Vt.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},Vt.prototype.setEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENABLED).then(function(e){n.data.enabled=t})},Vt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Vt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Vt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Vt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Vt.prototype.getFilterType=function(){return this.checkOpen(),this.data.filterType},Vt.prototype.setFilterType=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETFILTERTYPE).then(function(e){n.data.filterType=t})},Vt.prototype.getFrequency=function(){return this.checkOpen(),this.data.frequency},Vt.prototype.getMaxFrequency=function(){return this.checkOpen(),this.data.maxFrequency},Vt.prototype.getFrequencyCutoff=function(){return this.checkOpen(),this.data.frequencyCutoff},Vt.prototype.getMinFrequencyCutoff=function(){return this.checkOpen(),this.data.minFrequencyCutoff},Vt.prototype.getMaxFrequencyCutoff=function(){return this.checkOpen(),this.data.maxFrequencyCutoff},Vt.prototype.getInputMode=function(){return this.checkOpen(),this.data.inputMode},Vt.prototype.setInputMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETINPUTMODE).then(function(e){n.data.inputMode=t})},Vt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},Vt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},Vt.prototype.getTimeElapsed=function(){return this.checkOpen(),this.data.timeElapsed},Vt.prototype.handleCountChangeEvent=function(t){var e=t.get("0"),n=t.get("1");this.onCountChange(e,n)},Vt.prototype.handleFrequencyChangeEvent=function(t){this.data.frequency=t.get("0"),this.onFrequencyChange(this.data.frequency)},Vt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){default:return!1;case dt.BP_FREQUENCYDATA:var e,n,i,a,r=t.get("0"),o=t.get("1"),s=t.get("2");if(this.data.timeElapsed+=r,this.data.count+=o,0==o)return this.data.hasOwnProperty("totalTicksSinceLastCount")||(this.data.totalTicksSinceLastCount=0),!!Number.isNaN(this.data.totalTicksSinceLastCount)||(this.data.totalTicksSinceLastCount+=r,n=Math.round(1e3/this.data.frequencyCutoff),this.data.totalTicksSinceLastCount>n&&(this.data.frequency=0,this.onCountChange(0,this.data.totalTicksSinceLastCount),this.onFrequencyChange(this.data.frequency),this.data.totalTicksSinceLastCount=Number.NaN),!0);if(Number.isNaN(this.data.totalTicksSinceLastCount))return this.data.totalTicksSinceLastCount=r-s,!0;for(e=this.data.totalTicksSinceLastCount+s,this.data.totalTicksSinceLastCount=r-s,a=this.data.frequencyCutoff,i=2;a<1;)i++,a*=10;return this.data.frequency=Number((o/(e/1e3)).toFixed(i)),this.onCountChange(o,e),this.onFrequencyChange(this.data.frequency),!0}},Vt.prototype.setFrequencyCutoff=function(t){this.data.frequencyCutoff=t},Vt.prototype.resetCount=function(){this.data.count=0,this.data.timeElapsed=0,this.data.frequency=1e300};var Mt=function(){It.apply(this,arguments),this.name="Generic",this["class"]=M.PHIDCHCLASS_GENERIC,this.onPacket=function(t,e){},this.onError=function(t,e){}};Mt.prototype=Object.create(It.prototype),Mt.prototype.constructor=Mt,f.Generic=Mt,Mt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Mt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Mt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_PACKET:this.handlePacketEvent(t)}return!0},Mt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Mt.prototype.getINPacketLength=function(){return this.checkOpen(),this.data.INPacketLength},Mt.prototype.getOUTPacketLength=function(){return this.checkOpen(),this.data.OUTPacketLength},Mt.prototype.sendPacket=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"c",value:t}),e.set({name:"1",type:"d",value:packetLen}),e.send(this.channel,dt.BP_SENDPACKET)},Mt.prototype.handlePacketEvent=function(t){var e=t.get("0"),n=t.get("1");this.onPacket(e,n)};var wt=function(){It.apply(this,arguments),this.name="GPS",this["class"]=M.PHIDCHCLASS_GPS,this.onPositionChange=function(t,e,n){},this.onHeadingChange=function(t,e){},this.onPositionFixStateChange=function(t){},this.onError=function(t,e){}};wt.prototype=Object.create(It.prototype),wt.prototype.constructor=wt,f.GPS=wt,wt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},wt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},wt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_HEADINGCHANGE:this.handleHeadingChangeEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case dt.BP_POSITIONFIXSTATUSCHANGE:this.handlePositionFixStateChangeEvent(t)}return!0},wt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},wt.prototype.getAltitude=function(){return this.checkOpen(),this.data.altitude},wt.prototype.getHeading=function(){return this.checkOpen(),this.data.heading},wt.prototype.getLatitude=function(){return this.checkOpen(),this.data.latitude},wt.prototype.getLongitude=function(){return this.checkOpen(),this.data.longitude},wt.prototype.getPositionFixState=function(){return this.checkOpen(),!!this.data.positionFixState},wt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},wt.prototype.handleHeadingChangeEvent=function(t){this.data.heading=t.get("0"),this.data.velocity=t.get("1"),this.onHeadingChange(this.data.heading,this.data.velocity)},wt.prototype.handlePositionChangeEvent=function(t){this.data.latitude=t.get("0"),this.data.longitude=t.get("1"),this.data.altitude=t.get("2"),this.onPositionChange(this.data.latitude,this.data.longitude,this.data.altitude)},wt.prototype.handlePositionFixStateChangeEvent=function(t){this.data.positionFixState=!!t.get("0"),this.onPositionFixStateChange(this.data.positionFixState)},wt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case dt.BP_DATA:this.data["GPGGA.altitude"]=t.entries["GPGGA.altitude"].v,this.data["GPGGA.latitude"]=t.entries["GPGGA.latitude"].v,this.data["GPGGA.longitude"]=t.entries["GPGGA.longitude"].v,this.data["GPVTG.speed"]=t.entries["GPVTG.speed"].v,this.data["GPVTG.trueHeading"]=t.entries["GPVTG.trueHeading"].v,this.data.altitude=t.entries["GPGGA.altitude"].v,this.data.latitude=t.entries["GPGGA.latitude"].v,this.data.longitude=t.entries["GPGGA.longitude"].v,this.data.velocity=t.entries["GPVTG.speed"].v,this.data.heading=t.entries["GPVTG.trueHeading"].v;break;case dt.BP_TIME:var e=this.convertToLocal(t.entries["GPSTime.tm_hour"].v);this.data["GPSTime.tm_ms"]=t.entries["GPSTime.tm_ms"].v,this.data["GPSTime.tm_sec"]=t.entries["GPSTime.tm_sec"].v,this.data["GPSTime.tm_min"]=t.entries["GPSTime.tm_min"].v,this.data["GPSTime.tm_hour"]=e,"function"==typeof this.onTimeChange&&this.onTimeChange(e,this.data["GPSTime.tm_min"],this.data["GPSTime.tm_sec"],this.data["GPSTime.tm_ms"]);break;case dt.BP_DATE:this.data["GPSDate.tm_mday"]=t.entries["GPSDate.tm_mday"].v,this.data["GPSDate.tm_mon"]=t.entries["GPSDate.tm_mon"].v,this.data["GPSDate.tm_year"]=t.entries["GPSDate.tm_year"].v,"function"==typeof this.onDateChange&&this.onDateChange(this.data["GPSDate.tm_year"],this.data["GPSDate.tm_mon"],this.data["GPSDate.tm_mday"]);break;default:return!1}return!0},wt.prototype.convertToLocal=function(t){var e=new Date,n=e.getTimezoneOffset()/60;return t-n};var Ut=function(){It.apply(this,arguments),this.name="Gyroscope",this["class"]=M.PHIDCHCLASS_GYROSCOPE,this.onAngularRateUpdate=function(t,e){},this.onError=function(t,e){}};Ut.prototype=Object.create(It.prototype),Ut.prototype.constructor=Ut,f.Gyroscope=Ut,Ut.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ut.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ut.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_ANGULARRATEUPDATE:this.handleAngularRateUpdateEvent(t)}return!0},Ut.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},Ut.prototype.getAngularRate=function(){return this.checkOpen(),this.data.angularRate},Ut.prototype.getMinAngularRate=function(){return this.checkOpen(),this.data.minAngularRate},Ut.prototype.getMaxAngularRate=function(){return this.checkOpen(),this.data.maxAngularRate},Ut.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},Ut.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Ut.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Ut.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Ut.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Ut.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},Ut.prototype.zero=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_ZERO)},Ut.prototype.handleAngularRateUpdateEvent=function(t){this.data.angularRate=t.get("0"),this.data.timestamp=t.get("1"),this.onAngularRateUpdate(this.data.angularRate,this.data.timestamp)};var bt=function(){It.apply(this,arguments),this.name="Hub",this["class"]=M.PHIDCHCLASS_HUB,this.onError=function(t,e){}};bt.prototype=Object.create(It.prototype),bt.prototype.constructor=bt,f.Hub=bt,bt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},bt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},bt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},bt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},bt.prototype.setADCCalibrationValues=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"g",value:t}),n.set({name:"1",type:"g",value:e}),n.send(this.channel,dt.BP_SETCALIBRATIONVALUES)},bt.prototype.setFirmwareUpgradeFlag=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"u",value:e}),n.send(this.channel,dt.BP_SETFIRMWAREUPGRADEFLAG)},bt.prototype.setPortMode=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"d",value:e}),n.send(this.channel,dt.BP_SETPORTMODE)},bt.prototype.setPortPower=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"d",value:e}),n.send(this.channel,dt.BP_SETPORTPOWER)};var xt=function(){It.apply(this,arguments),this.name="HumiditySensor",this["class"]=M.PHIDCHCLASS_HUMIDITYSENSOR,this.onHumidityChange=function(t){},this.onError=function(t,e){}};xt.prototype=Object.create(It.prototype),xt.prototype.constructor=xt,f.HumiditySensor=xt,xt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},xt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},xt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_HUMIDITYCHANGE:this.handleHumidityChangeEvent(t)}return!0},xt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.humidityChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("HumidityChangeTrigger"),!0}},xt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},xt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},xt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},xt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},xt.prototype.getHumidity=function(){return this.checkOpen(),this.data.humidity},xt.prototype.getMinHumidity=function(){return this.checkOpen(),this.data.minHumidity},xt.prototype.getMaxHumidity=function(){return this.checkOpen(),this.data.maxHumidity},xt.prototype.getHumidityChangeTrigger=function(){return this.checkOpen(),this.data.humidityChangeTrigger},xt.prototype.setHumidityChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.humidityChangeTrigger=t})},xt.prototype.getMinHumidityChangeTrigger=function(){return this.checkOpen(),this.data.minHumidityChangeTrigger},xt.prototype.getMaxHumidityChangeTrigger=function(){return this.checkOpen(),this.data.maxHumidityChangeTrigger},xt.prototype.handleHumidityChangeEvent=function(t){this.data.humidity=t.get("0"),this.onHumidityChange(this.data.humidity)};var Ft=function(){It.apply(this,arguments),this.name="IR",this["class"]=M.PHIDCHCLASS_IR,this.onCode=function(t,e,n){},this.onLearn=function(t,e){},this.onRawData=function(t,e){},this.onError=function(t,e){}};Ft.prototype=Object.create(It.prototype),Ft.prototype.constructor=Ft,f.IR=Ft,Ft.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ft.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ft.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_CODE:this.handleCodeEvent(t);break;case dt.BP_LEARN:this.handleLearnEvent(t);break;case dt.BP_RAWDATA:this.handleRawDataEvent(t)}return!0},Ft.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Ft.prototype.transmit=function(t,e){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var n=new Tt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"J",value:e}),n.send(this.channel,dt.BP_TRANSMIT)},Ft.prototype.transmitRaw=function(t,e,n,i){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var a=new Tt(this.channel.conn);return a.set({name:"0",type:"u",value:t}),a.set({name:"1",type:"d",value:dataLen}),a.set({name:"2",type:"u",value:e}),a.set({name:"3",type:"g",value:n}),a.set({name:"4",type:"u",value:i}),a.send(this.channel,dt.BP_TRANSMITRAW)},Ft.prototype.transmitRepeat=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_TRANSMITREPEAT)},Ft.prototype.handleCodeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=!!t.get("2");this.onCode(e,n,i)},Ft.prototype.handleLearnEvent=function(t){var e=t.get("0"),n={bitCount:t.get("CodeInfo.bitCount"),encoding:t.get("CodeInfo.encoding"),length:t.get("CodeInfo.length"),gap:t.get("CodeInfo.gap"),trail:t.get("CodeInfo.trail"),header:t.get("CodeInfo.header"),one:t.get("CodeInfo.one"),zero:t.get("CodeInfo.zero"),repeat:t.get("CodeInfo.repeat"),minRepeat:t.get("CodeInfo.minRepeat"),dutyCycle:t.get("CodeInfo.dutyCycle"),carrierFrequency:t.get("CodeInfo.carrierFrequency"),toggleMask:t.get("CodeInfo.toggleMask")};this.onLearn(e,n)},Ft.prototype.handleRawDataEvent=function(t){var e=t.get("0"),n=t.get("1");this.onRawData(e,n)},Ft.prototype.transmit=function(t,e,n){var i=new Tt(this.channel.conn);i.set({name:"code",type:"s",value:t}),i.set({name:"CodeInfo.bitCount",type:"u",value:e.bitCount}),i.set({name:"CodeInfo.encoding",type:"d",value:e.encoding}),i.set({name:"CodeInfo.length",type:"d",value:e.length}),i.set({name:"CodeInfo.gap",type:"u",value:e.gap}),i.set({name:"CodeInfo.trail",type:"u",value:e.trail}),i.set({name:"CodeInfo.header",type:"U",value:e.header}),i.set({name:"CodeInfo.one",type:"U",value:e.one}),i.set({name:"CodeInfo.zero",type:"U",value:e.zero}),i.set({name:"CodeInfo.repeat",type:"U",value:e.repeat}),i.set({name:"CodeInfo.minRepeat",type:"u",value:e.minRepeat}),i.set({name:"CodeInfo.dutyCycle",type:"g",value:e.dutyCycle}),i.set({name:"CodeInfo.carrierFrequency",type:"u",value:e.carrierFrequency}),i.set({name:"CodeInfo.toggleMask",type:"R",value:e.toggleMask}),i.send(this.channel,dt.BP_TRANSMIT,n)},Ft.prototype.transmitRaw=function(t,e,n,i,a){var r=new Tt(this.channel.conn);r.set({name:"data",type:"U",value:t}),r.set({name:"carrierFrequency",type:"u",value:e}),r.set({name:"dutyCycle",type:"g",value:n}),r.set({name:"gap",type:"u",value:i}),r.send(this.channel,dt.BP_TRANSMITRAW,a)},Ft.prototype.handleCodeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a={bitCount:n};this.data.lastCodeStr=e,this.data.lastCodeInfo=a,this.data.lastCodeKnown=!0,this.onCode(e,n,i)},Ft.prototype.handleLearnEvent=function(t){var e=t.get("0"),n={bitCount:t.get("CodeInfo.bitCount"),encoding:t.get("CodeInfo.encoding"),length:t.get("CodeInfo.length"),gap:t.get("CodeInfo.gap"),trail:t.get("CodeInfo.trail"),header:t.get("CodeInfo.header"),one:t.get("CodeInfo.one"),zero:t.get("CodeInfo.zero"),repeat:t.get("CodeInfo.repeat"),minRepeat:t.get("CodeInfo.minRepeat"),dutyCycle:t.get("CodeInfo.dutyCycle"),carrierFrequency:t.get("CodeInfo.carrierFrequency"),toggleMask:t.get("CodeInfo.toggleMask")};this.data.lastLearnedCodeStr=e,this.data.lastLearnedCodeInfo=n,this.data.lastLearnedCodeKnown=!0,this.onLearn(e,n)},Ft.prototype.getLastCode=function(){if("undefined"==typeof this.data.lastCodeKnown)throw new Et(k.EPHIDGET_UNKNOWNVAL);return{bitCount:this.data.lastCodeInfo.bitCount,code:this.data.lastCodeStr}},Ft.prototype.getLastLearnedCode=function(){if("undefined"==typeof this.data.lastLearnedCodeKnown)throw new Et(k.EPHIDGET_UNKNOWNVAL);return{code:this.data.lastLearnedCodeStr,codeInfo:this.data.lastLearnedCodeInfo}},Ft.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case dt.BP_REPEAT:this.onCode(this.data.lastCodeStr,this.data.lastCodeStr.bitCount,!0);break;default:return!1}return!0};var Yt=function(){It.apply(this,arguments),this.name="LCD",this["class"]=M.PHIDCHCLASS_LCD,this.onError=function(t,e){}};Yt.prototype=Object.create(It.prototype),Yt.prototype.constructor=Yt,f.LCD=Yt,Yt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Yt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Yt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},Yt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETBACKLIGHT:return this.data.backlight=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Backlight"),!0;case dt.BP_SETCONTRAST:return this.data.contrast=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Contrast"),!0;case dt.BP_SETCURSORBLINK:return this.data.cursorBlink=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CursorBlink"),!0;case dt.BP_SETCURSORON:return this.data.cursorOn=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CursorOn"),!0;case dt.BP_SETFRAMEBUFFER:return this.data.frameBuffer=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FrameBuffer"),!0;case dt.BP_SETSCREENSIZE:return this.data.screenSize=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ScreenSize"),!0;case dt.BP_SETSLEEP:return this.data.sleeping=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Sleeping"),!0}},Yt.prototype.getBacklight=function(){return this.checkOpen(),this.data.backlight},Yt.prototype.setBacklight=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETBACKLIGHT).then(function(e){n.data.backlight=t})},Yt.prototype.getMinBacklight=function(){return this.checkOpen(),this.data.minBacklight},Yt.prototype.getMaxBacklight=function(){return this.checkOpen(),this.data.maxBacklight},Yt.prototype.setCharacterBitmap=function(t,e,n){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var i=new Tt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"s",value:e}),i.set({name:"2",type:"c",value:n}),i.send(this.channel,dt.BP_SETCHARACTERBITMAP)},Yt.prototype.clear=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_CLEAR)},Yt.prototype.getContrast=function(){return this.checkOpen(),this.data.contrast},Yt.prototype.setContrast=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCONTRAST).then(function(e){n.data.contrast=t})},Yt.prototype.getMinContrast=function(){return this.checkOpen(),this.data.minContrast},Yt.prototype.getMaxContrast=function(){return this.checkOpen(),this.data.maxContrast},Yt.prototype.copy=function(t,e,n,i,a,r,o,s,h){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var c=new Tt(this.channel.conn);return c.set({name:"0",type:"d",value:t}),c.set({name:"1",type:"d",value:e}),c.set({name:"2",type:"d",value:n}),c.set({name:"3",type:"d",value:i}),c.set({name:"4",type:"d",value:a}),c.set({name:"5",type:"d",value:r}),c.set({name:"6",type:"d",value:o}),c.set({name:"7",type:"d",value:s}),c.set({name:"8",type:"d",value:h}),c.send(this.channel,dt.BP_COPY)},Yt.prototype.getCursorBlink=function(){return this.checkOpen(),!!this.data.cursorBlink},Yt.prototype.setCursorBlink=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURSORBLINK).then(function(e){n.data.cursorBlink=t})},Yt.prototype.getCursorOn=function(){return this.checkOpen(),!!this.data.cursorOn},Yt.prototype.setCursorOn=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURSORON).then(function(e){n.data.cursorOn=t})},Yt.prototype.drawLine=function(t,e,n,i){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var a=new Tt(this.channel.conn);return a.set({name:"0",type:"d",value:t}),a.set({name:"1",type:"d",value:e}),a.set({name:"2",type:"d",value:n}),a.set({name:"3",type:"d",value:i}),a.send(this.channel,dt.BP_DRAWLINE)},Yt.prototype.drawPixel=function(t,e,n){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var i=new Tt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,dt.BP_DRAWPIXEL)},Yt.prototype.drawRect=function(t,e,n,i,a,r){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var o=new Tt(this.channel.conn);return o.set({name:"0",type:"d",value:t}),o.set({name:"1",type:"d",value:e}),o.set({name:"2",type:"d",value:n}),o.set({name:"3",type:"d",value:i}),o.set({name:"4",type:"d",value:a}),o.set({name:"5",type:"d",value:r}),o.send(this.channel,dt.BP_DRAWRECT)},Yt.prototype.flush=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_FLUSH)},Yt.prototype.setFontSize=function(t,e,n){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var i=new Tt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,dt.BP_SETFONTSIZE)},Yt.prototype.getFrameBuffer=function(){return this.checkOpen(),this.data.frameBuffer},Yt.prototype.setFrameBuffer=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETFRAMEBUFFER).then(function(e){n.data.frameBuffer=t})},Yt.prototype.getHeight=function(){return this.checkOpen(),this.data.height},Yt.prototype.initialize=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_INITIALIZE)},Yt.prototype.saveFrameBuffer=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);return e.set({name:"0",type:"d",value:t}),e.send(this.channel,dt.BP_SAVEFRAMEBUFFER)},Yt.prototype.getScreenSize=function(){return this.checkOpen(),this.data.screenSize},Yt.prototype.setScreenSize=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSCREENSIZE).then(function(e){n.data.screenSize=t})},Yt.prototype.getSleeping=function(){return this.checkOpen(),!!this.data.sleeping},Yt.prototype.setSleeping=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSLEEP).then(function(e){n.data.sleeping=t})},Yt.prototype.getWidth=function(){return this.checkOpen(),this.data.width},Yt.prototype.writeBitmap=function(t,e,n,i,a){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var r=new Tt(this.channel.conn);return r.set({name:"0",type:"d",value:t}),r.set({name:"1",type:"d",value:e}),r.set({name:"2",type:"d",value:n}),r.set({name:"3",type:"d",value:i}),r.set({name:"4",type:"c",value:a}),r.send(this.channel,dt.BP_WRITEBITMAP)},Yt.prototype.writeText=function(t,e,n,i){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var a=new Tt(this.channel.conn);return a.set({name:"0",type:"d",value:t}),a.set({name:"1",type:"d",value:e}),a.set({name:"2",type:"d",value:n}),a.set({name:"3",type:"s",value:i}),a.send(this.channel,dt.BP_WRITETEXT)},Yt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETFONTSIZE:var e=t.get("0"),n=t.get("1"),i=t.get("2");return this.data.fontWidth[parseInt(e)]=n,this.data.fontHeight[parseInt(e)]=i,this.onPropertyChange&&this.onPropertyChange("FontSize"),!0}},Yt.prototype.setCharacterBitmap=function(t,e,n){var i=this.getFontSize(t),a=new Tt(this.channel.conn);if(i.width<=0)return Promise.reject(new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getFontSize): "+t));if(i.height<=0)return Promise.reject(new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getFontSize): "+t));a.set({name:"font",type:"d",value:t}),a.set({name:"character",type:"s",value:e}),a.set({name:"bitmap",type:"R",value:n});var r=this;return a.send(this.channel,dt.BP_SETCHARACTERBITMAP,function(){"function"==typeof r.setCharacterBitmapSuccess&&r.setCharacterBitmapSuccess()}.bind(this))},Yt.prototype.getMaxCharacters=function(t){var e,n;switch(this.getDeviceID()){case G.PHIDID_LCD1100:if(parseInt(t)<1||parseInt(t)>5)throw new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getMaxCharacters): "+t);if(n=this.getFontSize(t),n.width<=0)throw new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getFontSize): "+t);if(n.height<=0)throw new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getFontSize): "+t);e=Math.min(255,this.data.width/n.width*(this.data.height/n.height));break;case G.PHIDID_1202_1203:case G.PHIDID_1204:case G.PHIDID_1215__1218:case G.PHIDID_1219__1222:e=255;break;default:throw new Et(k.EPHIDGET_UNEXPECTED)}return e},Yt.prototype.getFontSize=function(t){var e={width:0,height:0};window;switch(parseInt(t)){case Q.FONT_6x10:e.width=6,e.height=10;break;case Q.FONT_5x8:e.width=5,e.height=8;break;case Q.FONT_6x12:e.width=6,e.height=12;break;case Q.FONT_User1:case Q.FONT_User2:e.width=this.data.fontWidth[parseInt(t)],e.height=this.data.fontHeight[parseInt(t)];break;default:throw new Et(k.EPHIDGET_INVALIDARG,"invalid arg (getFontSize): "+t)}return e},Yt.prototype.setFontSize=function(t,e,n){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var i=new Tt(this.channel.conn);i.set({name:"0",type:"d",
value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n});var a=this;return i.send(this.channel,dt.BP_SETFONTSIZE).then(function(i){a.data.fontWidth[t]=e,a.data.fontHeight[t]=n})},Yt.prototype.writeBitmap=function(t,e,n,i,a){var r=new Tt(this.channel.conn);if(n<=0||i<=0)return Promise.reject(new Et(k.EPHIDGET_INVALIDARG,"invalid arg (size cannot be <=0) "+font));r.set({name:"xpos",type:"d",value:t}),r.set({name:"ypos",type:"d",value:e}),r.set({name:"xsize",type:"d",value:n}),r.set({name:"ysize",type:"d",value:i}),r.set({name:"bitmap",type:"R",value:a});var o=this;return r.send(this.channel,dt.BP_WRITEBITMAP,function(){"function"==typeof o.setCharacterBitmapSuccess&&o.setCharacterBitmapSuccess()}.bind(this))};var Wt=function(){It.apply(this,arguments),this.name="LightSensor",this["class"]=M.PHIDCHCLASS_LIGHTSENSOR,this.onIlluminanceChange=function(t){},this.onError=function(t,e){}};Wt.prototype=Object.create(It.prototype),Wt.prototype.constructor=Wt,f.LightSensor=Wt,Wt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Wt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Wt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_ILLUMINANCECHANGE:this.handleIlluminanceChangeEvent(t)}return!0},Wt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.illuminanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IlluminanceChangeTrigger"),!0}},Wt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Wt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Wt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Wt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Wt.prototype.getIlluminance=function(){return this.checkOpen(),this.data.illuminance},Wt.prototype.getMinIlluminance=function(){return this.checkOpen(),this.data.minIlluminance},Wt.prototype.getMaxIlluminance=function(){return this.checkOpen(),this.data.maxIlluminance},Wt.prototype.getIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.illuminanceChangeTrigger},Wt.prototype.setIlluminanceChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.illuminanceChangeTrigger=t})},Wt.prototype.getMinIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.minIlluminanceChangeTrigger},Wt.prototype.getMaxIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.maxIlluminanceChangeTrigger},Wt.prototype.handleIlluminanceChangeEvent=function(t){this.data.illuminance=t.get("0"),this.onIlluminanceChange(this.data.illuminance)};var qt=function(){It.apply(this,arguments),this.name="Magnetometer",this["class"]=M.PHIDCHCLASS_MAGNETOMETER,this.onMagneticFieldChange=function(t,e){},this.onError=function(t,e){}};qt.prototype=Object.create(It.prototype),qt.prototype.constructor=qt,f.Magnetometer=qt,qt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},qt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},qt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_FIELDSTRENGTHCHANGE:this.handleMagneticFieldChangeEvent(t)}return!0},qt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.magneticFieldChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MagneticFieldChangeTrigger"),!0}},qt.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},qt.prototype.setCorrectionParameters=function(t,e,n,i,a,r,o,s,h,c,p,u,E){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var d=new Tt(this.channel.conn);return d.set({name:"0",type:"g",value:t}),d.set({name:"1",type:"g",value:e}),d.set({name:"2",type:"g",value:n}),d.set({name:"3",type:"g",value:i}),d.set({name:"4",type:"g",value:a}),d.set({name:"5",type:"g",value:r}),d.set({name:"6",type:"g",value:o}),d.set({name:"7",type:"g",value:s}),d.set({name:"8",type:"g",value:h}),d.set({name:"9",type:"g",value:c}),d.set({name:"10",type:"g",value:p}),d.set({name:"11",type:"g",value:u}),d.set({name:"12",type:"g",value:E}),d.send(this.channel,dt.BP_SETCORRECTIONPARAMETERS)},qt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},qt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},qt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},qt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},qt.prototype.getMagneticField=function(){return this.checkOpen(),this.data.magneticField},qt.prototype.getMinMagneticField=function(){return this.checkOpen(),this.data.minMagneticField},qt.prototype.getMaxMagneticField=function(){return this.checkOpen(),this.data.maxMagneticField},qt.prototype.getMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.magneticFieldChangeTrigger},qt.prototype.setMagneticFieldChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.magneticFieldChangeTrigger=t})},qt.prototype.getMinMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.minMagneticFieldChangeTrigger},qt.prototype.getMaxMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.maxMagneticFieldChangeTrigger},qt.prototype.resetCorrectionParameters=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_RESETCORRECTIONPARAMETERS)},qt.prototype.saveCorrectionParameters=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_SAVECORRECTIONPARAMETERS)},qt.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},qt.prototype.handleMagneticFieldChangeEvent=function(t){this.data.magneticField=t.get("0"),this.data.timestamp=t.get("1"),this.onMagneticFieldChange(this.data.magneticField,this.data.timestamp)};var Kt=function(){It.apply(this,arguments),this.name="MotorPositionController",this["class"]=M.PHIDCHCLASS_MOTORPOSITIONCONTROLLER,this.onPositionChange=function(t){},this.onDutyCycleUpdate=function(t){},this.onError=function(t,e){}};Kt.prototype=Object.create(It.prototype),Kt.prototype.constructor=Kt,f.MotorPositionController=Kt,Kt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Kt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Kt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_DUTYCYCLECHANGE:this.handleDutyCycleUpdateEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t)}return!0},Kt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case dt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case dt.BP_SETCURRENTREGULATORGAIN:return this.data.currentRegulatorGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentRegulatorGain"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETDEADBAND:return this.data.deadBand=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DeadBand"),!0;case dt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case dt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case dt.BP_SETIOMODE:return this.data.IOMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IOMode"),!0;case dt.BP_SETKD:return this.data.kd=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Kd"),!0;case dt.BP_SETKI:return this.data.ki=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Ki"),!0;case dt.BP_SETKP:return this.data.kp=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Kp"),!0;case dt.BP_SETSTALLVELOCITY:return this.data.stallVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("StallVelocity"),!0;case dt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case dt.BP_SETDUTYCYCLE:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0}},Kt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Kt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Kt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Kt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Kt.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},Kt.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},Kt.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},Kt.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},Kt.prototype.getCurrentRegulatorGain=function(){return this.checkOpen(),this.data.currentRegulatorGain},Kt.prototype.setCurrentRegulatorGain=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURRENTREGULATORGAIN).then(function(e){n.data.currentRegulatorGain=t})},Kt.prototype.getMinCurrentRegulatorGain=function(){return this.checkOpen(),this.data.minCurrentRegulatorGain},Kt.prototype.getMaxCurrentRegulatorGain=function(){return this.checkOpen(),this.data.maxCurrentRegulatorGain},Kt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Kt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Kt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Kt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Kt.prototype.getDeadBand=function(){return this.checkOpen(),this.data.deadBand},Kt.prototype.setDeadBand=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDEADBAND).then(function(e){n.data.deadBand=t})},Kt.prototype.getDutyCycle=function(){return this.checkOpen(),this.data.dutyCycle},Kt.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},Kt.prototype.setEngaged=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},Kt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},Kt.prototype.setFanMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},Kt.prototype.getIOMode=function(){return this.checkOpen(),this.data.IOMode},Kt.prototype.setIOMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETIOMODE).then(function(e){n.data.IOMode=t})},Kt.prototype.getKd=function(){return this.checkOpen(),this.data.kd},Kt.prototype.setKd=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETKD).then(function(e){n.data.kd=t})},Kt.prototype.getKi=function(){return this.checkOpen(),this.data.ki},Kt.prototype.setKi=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETKI).then(function(e){n.data.ki=t})},Kt.prototype.getKp=function(){return this.checkOpen(),this.data.kp},Kt.prototype.setKp=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETKP).then(function(e){n.data.kp=t})},Kt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Kt.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},Kt.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},Kt.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},Kt.prototype.getStallVelocity=function(){return this.checkOpen(),this.data.stallVelocity},Kt.prototype.setStallVelocity=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETSTALLVELOCITY).then(function(e){n.data.stallVelocity=t})},Kt.prototype.getMinStallVelocity=function(){return this.checkOpen(),this.data.minStallVelocity},Kt.prototype.getMaxStallVelocity=function(){return this.checkOpen(),this.data.maxStallVelocity},Kt.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},Kt.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"l",value:t});var n=this;return e.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},Kt.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},Kt.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETDUTYCYCLE).then(function(e){n.data.velocityLimit=t})},Kt.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},Kt.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},Kt.prototype.handleDutyCycleUpdateEvent=function(t){this.data.dutyCycle=t.get("0"),this.onDutyCycleUpdate(this.data.dutyCycle)},Kt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},Kt.prototype.getAcceleration=function(){if(1e300==this.data.acceleration)throw new Et(k.EPHIDGET_UNKNOWNVAL);return this.data.acceleration*this.data.rescaleFactor},Kt.prototype.setAcceleration=function(t){var e=new Tt(this.channel.conn);e.set({name:"acceleration",type:"g",value:t}),e.send(this.channel,dt.BP_SETACCELERATION,function(){this.data.acceleration=t/this.data.rescaleFactor,"function"==typeof this.setAccelerationSuccess&&this.setAccelerationSuccess(t)}.bind(this))},Kt.prototype.getMinAcceleration=function(){return this.data.minAcceleration*this.data.rescaleFactor},Kt.prototype.getMaxAcceleration=function(){return this.data.maxAcceleration*this.data.rescaleFactor},Kt.prototype.addPositionOffset=function(t){this.data.positionOffset+=t/this.data.rescaleFactor},Kt.prototype.getDeadBand=function(){return this.data.deadBand*this.data.rescaleFactor},Kt.prototype.setDeadBand=function(t){var e=new Tt(this.channel.conn);e.set({name:"deadBand",type:"u",value:t}),e.send(this.channel,dt.BP_SETDEADBAND,function(){this.data.deadBand=t/this.data.rescaleFactor,"function"==typeof this.setDeadBandSuccess&&this.setDeadBandSuccess(t)}.bind(this))},Kt.prototype.getPosition=function(){return(this.data.position+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.getMinPosition=function(){return(this.data.minPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.getMaxPosition=function(){return(this.data.maxPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},Kt.prototype.getTargetPosition=function(){return(this.data.targetPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.setTargetPosition=function(t){var e=t/this.data.rescaleFactor-this.data.positionOffset,n=new Tt(this.channel.conn);n.set({name:"targetPosition",type:"l",value:e}),n.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(){this.data.targetPosition=e,"function"==typeof this.setTargetPositionSuccess&&this.setTargetPositionSuccess(e)}.bind(this))},Kt.prototype.getVelocityLimit=function(){return this.data.velocityLimit*this.data.rescaleFactor},Kt.prototype.getStallVelocity=function(){return this.data.stallVelocity*this.data.rescaleFactor},Kt.prototype.setStallVelocity=function(t){var e=t/this.data.rescaleFactor,n=new Tt(this.channel.conn);n.set({name:"stallVelocity",type:"g",value:e}),n.send(this.channel,dt.BP_SETSTALLVELOCITY,function(){this.data.stallVelocity=e,"function"==typeof this.setStallVelocitySuccess&&this.setStallVelocitySuccess(e)}.bind(this))},Kt.prototype.setVelocityLimit=function(t){var e=t/this.data.rescaleFactor,n=new Tt(this.channel.conn);n.set({name:"velocityLimit",type:"g",value:e}),n.send(this.channel,dt.BP_SETDUTYCYCLE,function(){this.data.velocityLimit=e,"function"==typeof this.setVelocityLimitSuccess&&this.setVelocityLimitSuccess(e)}.bind(this))},Kt.prototype.getMinStallVelocity=function(){return this.data.minStallVelocity*this.data.rescaleFactor},Kt.prototype.getMaxStallVelocity=function(){return this.data.maxStallVelocity*this.data.rescaleFactor},Kt.prototype.getMinVelocityLimit=function(){return this.data.minVelocityLimit*this.data.rescaleFactor},Kt.prototype.getMaxVelocityLimit=function(){return this.data.maxVelocityLimit*this.data.rescaleFactor},Kt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange((this.data.position+this.data.positionOffset)*this.data.rescaleFactor)};var jt=function(){It.apply(this,arguments),this.name="PHSensor",this["class"]=M.PHIDCHCLASS_PHSENSOR,this.onPHChange=function(t){},this.onError=function(t,e){}};jt.prototype=Object.create(It.prototype),jt.prototype.constructor=jt,f.PHSensor=jt,jt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},jt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},jt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_PHCHANGE:this.handlePHChangeEvent(t)}return!0},jt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETCORRECTIONTEMPERATURE:return this.data.correctionTemperature=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CorrectionTemperature"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.PHChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PHChangeTrigger"),!0}},jt.prototype.getCorrectionTemperature=function(){return this.checkOpen(),this.data.correctionTemperature},jt.prototype.setCorrectionTemperature=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCORRECTIONTEMPERATURE).then(function(e){n.data.correctionTemperature=t})},jt.prototype.getMinCorrectionTemperature=function(){return this.checkOpen(),this.data.minCorrectionTemperature},jt.prototype.getMaxCorrectionTemperature=function(){return this.checkOpen(),this.data.maxCorrectionTemperature},jt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},jt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},jt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},jt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},jt.prototype.getPH=function(){return this.checkOpen(),this.data.PH},jt.prototype.getMinPH=function(){return this.checkOpen(),this.data.minPH},jt.prototype.getMaxPH=function(){return this.checkOpen(),this.data.maxPH},jt.prototype.getPHChangeTrigger=function(){return this.checkOpen(),this.data.PHChangeTrigger},jt.prototype.setPHChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.PHChangeTrigger=t})},jt.prototype.getMinPHChangeTrigger=function(){return this.checkOpen(),this.data.minPHChangeTrigger},jt.prototype.getMaxPHChangeTrigger=function(){return this.checkOpen(),this.data.maxPHChangeTrigger},jt.prototype.handlePHChangeEvent=function(t){this.data.PH=t.get("0"),this.onPHChange(this.data.PH)};var Xt=function(){It.apply(this,arguments),this.name="PowerGuard",this["class"]=M.PHIDCHCLASS_POWERGUARD,this.onError=function(t,e){}};Xt.prototype=Object.create(It.prototype),Xt.prototype.constructor=Xt,f.PowerGuard=Xt,Xt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Xt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Xt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},Xt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case dt.BP_SETOVERVOLTAGE:return this.data.overVoltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("OverVoltage"),!0;case dt.BP_SETENABLED:return this.data.powerEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerEnabled"),!0}},Xt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},Xt.prototype.setFanMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},Xt.prototype.getOverVoltage=function(){return this.checkOpen(),this.data.overVoltage},Xt.prototype.setOverVoltage=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETOVERVOLTAGE).then(function(e){n.data.overVoltage=t})},Xt.prototype.getMinOverVoltage=function(){return this.checkOpen(),this.data.minOverVoltage},Xt.prototype.getMaxOverVoltage=function(){return this.checkOpen(),this.data.maxOverVoltage},Xt.prototype.getPowerEnabled=function(){return this.checkOpen(),!!this.data.powerEnabled},Xt.prototype.setPowerEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENABLED).then(function(e){n.data.powerEnabled=t})};var zt=function(){It.apply(this,arguments),this.name="PressureSensor",this["class"]=M.PHIDCHCLASS_PRESSURESENSOR,this.onPressureChange=function(t){},this.onError=function(t,e){}};zt.prototype=Object.create(It.prototype),zt.prototype.constructor=zt,f.PressureSensor=zt,zt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},zt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},zt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_PRESSURECHANGE:this.handlePressureChangeEvent(t)}return!0},zt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.pressureChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PressureChangeTrigger"),!0}},zt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},zt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},zt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},zt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},zt.prototype.getPressure=function(){return this.checkOpen(),this.data.pressure},zt.prototype.getMinPressure=function(){return this.checkOpen(),this.data.minPressure},zt.prototype.getMaxPressure=function(){return this.checkOpen(),this.data.maxPressure},zt.prototype.getPressureChangeTrigger=function(){return this.checkOpen(),this.data.pressureChangeTrigger},zt.prototype.setPressureChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.pressureChangeTrigger=t})},zt.prototype.getMinPressureChangeTrigger=function(){return this.checkOpen(),this.data.minPressureChangeTrigger},zt.prototype.getMaxPressureChangeTrigger=function(){return this.checkOpen(),this.data.maxPressureChangeTrigger},zt.prototype.handlePressureChangeEvent=function(t){this.data.pressure=t.get("0"),this.onPressureChange(this.data.pressure)};var Qt=function(){It.apply(this,arguments),this.name="RCServo",this["class"]=M.PHIDCHCLASS_RCSERVO,this.onPositionChange=function(t){},this.onVelocityChange=function(t){},this.onTargetPositionReached=function(t){},this.onError=function(t,e){}};Qt.prototype=Object.create(It.prototype),Qt.prototype.constructor=Qt,f.RCServo=Qt,Qt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Qt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Qt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,3);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case dt.BP_TARGETPOSITIONREACHED:this.handleTargetPositionReachedEvent(t);break;case dt.BP_VELOCITYCHANGE:this.handleVelocityChangeEvent(t)}return!0},Qt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case dt.BP_SETMINPULSEWIDTH:return this.data.minPulseWidth=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MinPulseWidth"),!0;case dt.BP_SETMAXPULSEWIDTH:return this.data.maxPulseWidth=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MaxPulseWidth"),!0;case dt.BP_SETSPEEDRAMPINGSTATE:return this.data.speedRampingState=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SpeedRampingState"),!0;case dt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case dt.BP_SETDUTYCYCLE:return this.data.torque=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Torque"),!0;case dt.BP_SETVELOCITYLIMIT:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0;case dt.BP_SETVOLTAGE:return this.data.voltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Voltage"),!0}},Qt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Qt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);
e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Qt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Qt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Qt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Qt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Qt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Qt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Qt.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},Qt.prototype.setEngaged=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},Qt.prototype.getIsMoving=function(){return this.checkOpen(),!!this.data.isMoving},Qt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Qt.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},Qt.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},Qt.prototype.setMinPulseWidth=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETMINPULSEWIDTH).then(function(e){n.data.minPulseWidth=t})},Qt.prototype.getMinPulseWidth=function(){return this.checkOpen(),this.data.minPulseWidth},Qt.prototype.setMaxPulseWidth=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETMAXPULSEWIDTH).then(function(e){n.data.maxPulseWidth=t})},Qt.prototype.getMaxPulseWidth=function(){return this.checkOpen(),this.data.maxPulseWidth},Qt.prototype.getMinPulseWidthLimit=function(){return this.checkOpen(),this.data.minPulseWidthLimit},Qt.prototype.getMaxPulseWidthLimit=function(){return this.checkOpen(),this.data.maxPulseWidthLimit},Qt.prototype.getSpeedRampingState=function(){return this.checkOpen(),!!this.data.speedRampingState},Qt.prototype.setSpeedRampingState=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSPEEDRAMPINGSTATE).then(function(e){n.data.speedRampingState=t})},Qt.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},Qt.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},Qt.prototype.getTorque=function(){return this.checkOpen(),this.data.torque},Qt.prototype.setTorque=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETDUTYCYCLE).then(function(e){n.data.torque=t})},Qt.prototype.getMinTorque=function(){return this.checkOpen(),this.data.minTorque},Qt.prototype.getMaxTorque=function(){return this.checkOpen(),this.data.maxTorque},Qt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},Qt.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},Qt.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETVELOCITYLIMIT).then(function(e){n.data.velocityLimit=t})},Qt.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},Qt.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},Qt.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},Qt.prototype.setVoltage=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETVOLTAGE).then(function(e){n.data.voltage=t})},Qt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},Qt.prototype.handleTargetPositionReachedEvent=function(t){this.data.position=t.get("0"),this.onTargetPositionReached(this.data.position)},Qt.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity)},Qt.prototype.positionUser=function(t){return this.data.minPosition+(t-this.data.minPulseWidth)/(this.data.maxPulseWidth-this.data.minPulseWidth)*this.data.maxPosition-this.data.minPosition},Qt.prototype.positionUS=function(t){return this.data.maxPosition>this.data.minPosition?this.data.minPulseWidth+(this.data.maxPulseWidth-this.data.minPulseWidth)*(t-this.data.minPosition)/(this.data.maxPosition-this.data.minPosition):this.data.maxPulseWidth+(this.data.maxPulseWidth-this.data.minPulseWidth)*(t-this.data.maxPosition)/(this.data.maxPosition-this.data.minPosition)},Qt.prototype.velocityUser=function(t){return Math.abs(this.data.maxPosition-this.data.minPosition)*t/(this.data.maxPulseWidth-this.data.minPulseWidth)},Qt.prototype.velocityUS=function(t){return(this.data.maxPulseWidth-this.data.minPulseWidth)*t/Math.abs(this.data.maxPosition-this.data.minPosition)},Qt.prototype.accelUser=function(t){return Math.abs(this.data.maxPosition-this.data.minPosition)*t/(this.data.maxPulseWidth-this.data.minPulseWidth)},Qt.prototype.accelUS=function(t){return(this.data.maxPulseWidth-this.data.minPulseWidth)*t/Math.abs(this.data.maxPosition-this.data.minPosition)},Qt.prototype.getAcceleration=function(){return this.accelUser(this.data.acceleration)},Qt.prototype.getMinAcceleration=function(){return this.accelUser(this.data.minAcceleration)},Qt.prototype.getMaxAcceleration=function(){return this.accelUser(this.data.maxAcceleration)},Qt.prototype.getPosition=function(){return this.positionUser(this.data.position)},Qt.prototype.setMaxPosition=function(t){this.data.maxPosition=t},Qt.prototype.setMinPosition=function(t){this.data.minPosition=t},Qt.prototype.getTargetPosition=function(){return this.positionUser(this.data.targetPosition)},Qt.prototype.getVelocity=function(){return this.velocityUser(this.data.velocity)},Qt.prototype.getMinVelocity=function(){return this.velocityUser(this.data.minVelocity)},Qt.prototype.getMaxVelocity=function(){return this.velocityUser(this.data.maxVelocity)},Qt.prototype.getVelocityLimit=function(){return this.velocityUser(this.data.velocityLimit)},Qt.prototype.getMinVelocityLimit=function(){return this.velocityUser(this.data.minVelocityLimit)},Qt.prototype.getMaxVelocityLimit=function(){return this.velocityUser(this.data.maxVelocityLimit)},Qt.prototype.setAcceleration=function(t){var e=this;t=this.accelUS(t);var n=new Tt(this.channel.conn);return n.set({name:"acceleration",type:"g",value:t}),n.send(this.channel,dt.BP_SETACCELERATION).then(function(){e.data.acceleration=t})},Qt.prototype.setTargetPosition=function(t){var e=this;t=this.positionUS(t);var n=new Tt(this.channel.conn);return n.set({name:"targetPosition",type:"g",value:t}),n.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(){e.data.targetPosition=t,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},Qt.prototype.setVelocityLimit=function(t){var e=this;t=this.velocityUS(t);var n=new Tt(this.channel.conn);return n.set({name:"velocityLimit",type:"g",value:t}),n.send(this.channel,dt.BP_SETVELOCITYLIMIT).then(function(){e.data.velocityLimit=t})},Qt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.positionUser(this.data.position))},Qt.prototype.handleTargetPositionReachedEvent=function(t){this.data.position=t.get("0"),this.data.isMoving=!1,this.onTargetPositionReached(this.positionUser(this.data.position))},Qt.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.velocityUser(this.data.velocity))};var Zt=function(){It.apply(this,arguments),this.name="ResistanceInput",this["class"]=M.PHIDCHCLASS_RESISTANCEINPUT,this.onResistanceChange=function(t){},this.onError=function(t,e){}};Zt.prototype=Object.create(It.prototype),Zt.prototype.constructor=Zt,f.ResistanceInput=Zt,Zt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Zt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Zt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_RESISTANCECHANGE:this.handleResistanceChangeEvent(t)}return!0},Zt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.resistanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ResistanceChangeTrigger"),!0;case dt.BP_SETRTDWIRESETUP:return this.data.RTDWireSetup=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDWireSetup"),!0}},Zt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Zt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Zt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Zt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Zt.prototype.getResistance=function(){return this.checkOpen(),this.data.resistance},Zt.prototype.getMinResistance=function(){return this.checkOpen(),this.data.minResistance},Zt.prototype.getMaxResistance=function(){return this.checkOpen(),this.data.maxResistance},Zt.prototype.getResistanceChangeTrigger=function(){return this.checkOpen(),this.data.resistanceChangeTrigger},Zt.prototype.setResistanceChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.resistanceChangeTrigger=t})},Zt.prototype.getMinResistanceChangeTrigger=function(){return this.checkOpen(),this.data.minResistanceChangeTrigger},Zt.prototype.getMaxResistanceChangeTrigger=function(){return this.checkOpen(),this.data.maxResistanceChangeTrigger},Zt.prototype.getRTDWireSetup=function(){return this.checkOpen(),this.data.RTDWireSetup},Zt.prototype.setRTDWireSetup=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETRTDWIRESETUP).then(function(e){n.data.RTDWireSetup=t})},Zt.prototype.handleResistanceChangeEvent=function(t){this.data.resistance=t.get("0"),this.onResistanceChange(this.data.resistance)};var Jt=function(){It.apply(this,arguments),this.name="RFID",this["class"]=M.PHIDCHCLASS_RFID,this.onTag=function(t,e){},this.onTagLost=function(t,e){},this.onError=function(t,e){}};Jt.prototype=Object.create(It.prototype),Jt.prototype.constructor=Jt,f.RFID=Jt,Jt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Jt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Jt.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_TAG:this.handleTagEvent(t);break;case dt.BP_TAGLOST:this.handleTagLostEvent(t)}return!0},Jt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETANTENNAON:return this.data.antennaEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("AntennaEnabled"),!0}},Jt.prototype.getAntennaEnabled=function(){return this.checkOpen(),!!this.data.antennaEnabled},Jt.prototype.setAntennaEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETANTENNAON).then(function(e){n.data.antennaEnabled=t})},Jt.prototype.getTagPresent=function(){return this.checkOpen(),!!this.data.tagPresent},Jt.prototype.write=function(t,e,n){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var i=new Tt(this.channel.conn);return i.set({name:"0",type:"s",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,dt.BP_WRITE)},Jt.prototype.handleTagEvent=function(t){var e=t.get("0"),n=t.get("1");this.onTag(e,n)},Jt.prototype.handleTagLostEvent=function(t){var e=t.get("0"),n=t.get("1");this.onTagLost(e,n)},Jt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case dt.BP_TAG:this.data.tagPresent=!0,this.handleTagEvent(t),this.data.lastTagString=t.get("0"),this.data.lastTagProtocol=t.get("1");break;case dt.BP_TAGLOST:this.data.tagPresent=!1,this.handleTagLostEvent(t);break;default:return!1}return!0},Jt.prototype.getLastTag=function(){if(this.checkOpen(),void 0===this.data.lastTagProtocol)throw new Et(k.EPHIDGET_UNKNOWNVAL);return{tagString:this.data.lastTagString,protocol:this.data.lastTagProtocol}};var $t=function(){It.apply(this,arguments),this.name="SoundSensor",this["class"]=M.PHIDCHCLASS_SOUNDSENSOR,this.onSPLChange=function(t,e,n,i){},this.onError=function(t,e){}};$t.prototype=Object.create(It.prototype),$t.prototype.constructor=$t,f.SoundSensor=$t,$t.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},$t.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},$t.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_DBCHANGE:this.handleSPLChangeEvent(t)}return!0},$t.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.SPLChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SPLChangeTrigger"),!0;case dt.BP_SETSPLRANGE:return this.data.SPLRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SPLRange"),!0}},$t.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},$t.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},$t.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},$t.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},$t.prototype.getdB=function(){return this.checkOpen(),this.data.dB},$t.prototype.getMaxdB=function(){return this.checkOpen(),this.data.maxdB},$t.prototype.getdBA=function(){return this.checkOpen(),this.data.dBA},$t.prototype.getdBC=function(){return this.checkOpen(),this.data.dBC},$t.prototype.getNoiseFloor=function(){return this.checkOpen(),this.data.noiseFloor},$t.prototype.getOctaves=function(){return this.checkOpen(),this.data.octaves},$t.prototype.getSPLChangeTrigger=function(){return this.checkOpen(),this.data.SPLChangeTrigger},$t.prototype.setSPLChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.SPLChangeTrigger=t})},$t.prototype.getMinSPLChangeTrigger=function(){return this.checkOpen(),this.data.minSPLChangeTrigger},$t.prototype.getMaxSPLChangeTrigger=function(){return this.checkOpen(),this.data.maxSPLChangeTrigger},$t.prototype.getSPLRange=function(){return this.checkOpen(),this.data.SPLRange},$t.prototype.setSPLRange=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSPLRANGE).then(function(e){n.data.SPLRange=t})},$t.prototype.handleSPLChangeEvent=function(t){this.data.dB=t.get("0"),this.data.dBA=t.get("1"),this.data.dBC=t.get("2"),this.data.octaves=t.get("3"),this.onSPLChange(this.data.dB,this.data.dBA,this.data.dBC,this.data.octaves)};var te=function(){It.apply(this,arguments),this.name="Spatial",this["class"]=M.PHIDCHCLASS_SPATIAL,this.onSpatialData=function(t,e,n,i){},this.onError=function(t,e){}};te.prototype=Object.create(It.prototype),te.prototype.constructor=te,f.Spatial=te,te.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},te.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},te.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_SPATIALDATA:this.handleSpatialDataEvent(t)}return!0},te.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},te.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},te.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},te.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},te.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},te.prototype.setMagnetometerCorrectionParameters=function(t,e,n,i,a,r,o,s,h,c,p,u,E){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var d=new Tt(this.channel.conn);return d.set({name:"0",type:"g",value:t}),d.set({name:"1",type:"g",value:e}),d.set({name:"2",type:"g",value:n}),d.set({name:"3",type:"g",value:i}),d.set({name:"4",type:"g",value:a}),d.set({name:"5",type:"g",value:r}),d.set({name:"6",type:"g",value:o}),d.set({name:"7",type:"g",value:s}),d.set({name:"8",type:"g",value:h}),d.set({name:"9",type:"g",value:c}),d.set({name:"10",type:"g",value:p}),d.set({name:"11",type:"g",value:u}),d.set({name:"12",type:"g",value:E}),d.send(this.channel,dt.BP_SETCORRECTIONPARAMETERS)},te.prototype.resetMagnetometerCorrectionParameters=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_RESETCORRECTIONPARAMETERS)},te.prototype.saveMagnetometerCorrectionParameters=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_SAVECORRECTIONPARAMETERS)},te.prototype.zeroGyro=function(){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var t=new Tt(this.channel.conn);return t.send(this.channel,dt.BP_ZERO)},te.prototype.handleSpatialDataEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a=t.get("3");this.onSpatialData(e,n,i,a)};var ee=function(){It.apply(this,arguments),this.name="Stepper",this["class"]=M.PHIDCHCLASS_STEPPER,this.onPositionChange=function(t){},this.onVelocityChange=function(t){},this.onStopped=function(){},this.onError=function(t,e){}};ee.prototype=Object.create(It.prototype),ee.prototype.constructor=ee,f.Stepper=ee,ee.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ee.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ee.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case dt.BP_STOPPED:this.handleStoppedEvent(t);break;case dt.BP_VELOCITYCHANGE:this.handleVelocityChangeEvent(t)}return!0},ee.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case dt.BP_SETCONTROLMODE:return this.data.controlMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ControlMode"),!0;case dt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case dt.BP_SETHOLDINGCURRENTLIMIT:return this.data.holdingCurrentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("HoldingCurrentLimit"),!0;case dt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case dt.BP_SETVELOCITYLIMIT:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0}},ee.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},ee.prototype.setAcceleration=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},ee.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},ee.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},ee.prototype.getControlMode=function(){return this.checkOpen(),this.data.controlMode},ee.prototype.setControlMode=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETCONTROLMODE).then(function(e){n.data.controlMode=t})},ee.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},ee.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},ee.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},ee.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},ee.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ee.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},ee.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ee.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ee.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},ee.prototype.setEngaged=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},ee.prototype.getHoldingCurrentLimit=function(){return this.checkOpen(),this.data.holdingCurrentLimit},ee.prototype.setHoldingCurrentLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETHOLDINGCURRENTLIMIT).then(function(e){n.data.holdingCurrentLimit=t})},ee.prototype.getIsMoving=function(){return this.checkOpen(),!!this.data.isMoving},ee.prototype.getPosition=function(){return this.checkOpen(),this.data.position},ee.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},ee.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},ee.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},ee.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},ee.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"l",value:t});var n=this;return e.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},ee.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},ee.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},ee.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETVELOCITYLIMIT).then(function(e){n.data.velocityLimit=t})},ee.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},ee.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},ee.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},ee.prototype.handleStoppedEvent=function(t){this.onStopped()},ee.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity)},ee.prototype.getAcceleration=function(){if(1e300==this.data.acceleration)throw new Et(k.EPHIDGET_UNKNOWNVAL);return this.data.acceleration*this.data.rescaleFactor},ee.prototype.setAcceleration=function(t){var e=new Tt(this.channel.conn);e.set({name:"acceleration",type:"g",value:t}),e.send(this.channel,dt.BP_SETACCELERATION,function(){this.data.acceleration=t/this.data.rescaleFactor,"function"==typeof this.setAccelerationSuccess&&this.setAccelerationSuccess(t)}.bind(this))},ee.prototype.getMinAcceleration=function(){return this.data.minAcceleration*this.data.rescaleFactor},ee.prototype.getMaxAcceleration=function(){return this.data.maxAcceleration*this.data.rescaleFactor},ee.prototype.getPosition=function(){return(this.data.position+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.getMinPosition=function(){return(this.data.minPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.getMaxPosition=function(){return(this.data.maxPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},ee.prototype.getTargetPosition=function(){return(this.data.targetPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.setTargetPosition=function(t){var e=this,n=t/this.data.rescaleFactor-this.data.positionOffset,i=new Tt(this.channel.conn);return i.set({name:"targetPosition",type:"l",value:n}),i.send(this.channel,dt.BP_SETTARGETPOSITION).then(function(){e.data.targetPosition=n,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},ee.prototype.getVelocity=function(){return this.data.velocity*this.data.rescaleFactor},ee.prototype.getMaxVelocity=function(){return this.data.maxVelocity*this.data.rescaleFactor},ee.prototype.getVelocityLimit=function(){if(1e300==this.data.velocityLimit)throw new Et(k.EPHIDGET_UNKNOWNVAL);return this.data.velocityLimit*this.data.rescaleFactor},ee.prototype.setVelocityLimit=function(t){var e=this,n=t/this.data.rescaleFactor,i=new Tt(this.channel.conn);return i.set({name:"velocityLimit",type:"g",value:n}),i.send(this.channel,dt.BP_SETVELOCITYLIMIT).then(function(){e.data.velocityLimit=n,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},ee.prototype.getMaxVelocityLimit=function(){return this.data.maxVelocityLimit*this.data.rescaleFactor},ee.prototype.getMinVelocityLimit=function(){return this.data.minVelocityLimit*this.data.rescaleFactor},ee.prototype.addPositionOffset=function(t){this.data.positionOffset+=t/this.data.rescaleFactor},ee.prototype.handleStoppedEvent=function(t){this.data.isMoving=!1,this.onStopped()},ee.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange((this.data.position+this.data.positionOffset)*this.data.rescaleFactor)},ee.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity*this.data.rescaleFactor)};var ne=function(){It.apply(this,arguments),this.name="TemperatureSensor",this["class"]=M.PHIDCHCLASS_TEMPERATURESENSOR,this.onTemperatureChange=function(t){},this.onError=function(t,e){}};ne.prototype=Object.create(It.prototype),ne.prototype.constructor=ne,f.TemperatureSensor=ne,ne.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ne.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ne.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_TEMPERATURECHANGE:this.handleTemperatureChangeEvent(t)}return!0},ne.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETRTDTYPE:return this.data.RTDType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDType"),!0;case dt.BP_SETRTDWIRESETUP:return this.data.RTDWireSetup=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDWireSetup"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.temperatureChangeTrigger=+t.entries[0].v,
this.onPropertyChange&&this.onPropertyChange("TemperatureChangeTrigger"),!0;case dt.BP_SETTHERMOCOUPLETYPE:return this.data.thermocoupleType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ThermocoupleType"),!0}},ne.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ne.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},ne.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ne.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ne.prototype.getRTDType=function(){return this.checkOpen(),this.data.RTDType},ne.prototype.setRTDType=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETRTDTYPE).then(function(e){n.data.RTDType=t})},ne.prototype.getRTDWireSetup=function(){return this.checkOpen(),this.data.RTDWireSetup},ne.prototype.setRTDWireSetup=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETRTDWIRESETUP).then(function(e){n.data.RTDWireSetup=t})},ne.prototype.getTemperature=function(){return this.checkOpen(),this.data.temperature},ne.prototype.getMinTemperature=function(){return this.checkOpen(),this.data.minTemperature},ne.prototype.getMaxTemperature=function(){return this.checkOpen(),this.data.maxTemperature},ne.prototype.getTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.temperatureChangeTrigger},ne.prototype.setTemperatureChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.temperatureChangeTrigger=t})},ne.prototype.getMinTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.minTemperatureChangeTrigger},ne.prototype.getMaxTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.maxTemperatureChangeTrigger},ne.prototype.getThermocoupleType=function(){return this.checkOpen(),this.data.thermocoupleType},ne.prototype.setThermocoupleType=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETTHERMOCOUPLETYPE).then(function(e){n.data.thermocoupleType=t})},ne.prototype.handleTemperatureChangeEvent=function(t){this.data.temperature=t.get("0"),this.onTemperatureChange(this.data.temperature)};var ie=function(){It.apply(this,arguments),this.name="VoltageInput",this["class"]=M.PHIDCHCLASS_VOLTAGEINPUT,this.onVoltageChange=function(t){},this.onSensorChange=function(t,e){},this.onError=function(t,e){}};ie.prototype=Object.create(It.prototype),ie.prototype.constructor=ie,f.VoltageInput=ie,ie.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ie.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ie.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_SENSORCHANGE:this.handleSensorChangeEvent(t);break;case dt.BP_VOLTAGECHANGE:this.handleVoltageChangeEvent(t)}return!0},ie.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0;case dt.BP_SETSENSORTYPE:return this.data.sensorType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorType"),!0;case dt.BP_SETSENSORVALUECHANGETRIGGER:return this.data.sensorValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorValueChangeTrigger"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.voltageChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageChangeTrigger"),!0;case dt.BP_SETVOLTAGERANGE:return this.data.voltageRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageRange"),!0}},ie.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ie.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},ie.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ie.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ie.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},ie.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},ie.prototype.getSensorType=function(){return this.checkOpen(),this.data.sensorType},ie.prototype.setSensorType=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSENSORTYPE).then(function(e){n.data.sensorType=t})},ie.prototype.getSensorUnit=function(){return this.checkOpen(),this.data.sensorUnit},ie.prototype.getSensorValue=function(){return this.checkOpen(),this.data.sensorValue},ie.prototype.getSensorValueChangeTrigger=function(){return this.checkOpen(),this.data.sensorValueChangeTrigger},ie.prototype.setSensorValueChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETSENSORVALUECHANGETRIGGER).then(function(e){n.data.sensorValueChangeTrigger=t})},ie.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},ie.prototype.getMinVoltage=function(){return this.checkOpen(),this.data.minVoltage},ie.prototype.getMaxVoltage=function(){return this.checkOpen(),this.data.maxVoltage},ie.prototype.getVoltageChangeTrigger=function(){return this.checkOpen(),this.data.voltageChangeTrigger},ie.prototype.setVoltageChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.voltageChangeTrigger=t})},ie.prototype.getMinVoltageChangeTrigger=function(){return this.checkOpen(),this.data.minVoltageChangeTrigger},ie.prototype.getMaxVoltageChangeTrigger=function(){return this.checkOpen(),this.data.maxVoltageChangeTrigger},ie.prototype.getVoltageRange=function(){return this.checkOpen(),this.data.voltageRange},ie.prototype.setVoltageRange=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETVOLTAGERANGE).then(function(e){n.data.voltageRange=t})},ie.prototype.handleSensorChangeEvent=function(t){this.data.sensorValue=t.get("0");var e={unit:t.get("UnitInfo.unit"),name:t.get("UnitInfo.name"),symbol:t.get("UnitInfo.symbol")};this.data.sensorUnit=e,this.onSensorChange(this.data.sensorValue,this.data.sensorUnit)},ie.prototype.handleVoltageChangeEvent=function(t){this.data.voltage=t.get("0"),this.onVoltageChange(this.data.voltage)};var ae=function(){It.apply(this,arguments),this.name="VoltageOutput",this["class"]=M.PHIDCHCLASS_VOLTAGEOUTPUT,this.onError=function(t,e){}};ae.prototype=Object.create(It.prototype),ae.prototype.constructor=ae,f.VoltageOutput=ae,ae.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ae.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ae.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},ae.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case dt.BP_SETVOLTAGE:return this.data.voltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Voltage"),!0;case dt.BP_SETVOLTAGERANGE:return this.data.voltageOutputRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageOutputRange"),!0}},ae.prototype.setEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENABLED).then(function(e){n.data.enabled=t})},ae.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},ae.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},ae.prototype.setVoltage=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETVOLTAGE).then(function(e){n.data.voltage=t})},ae.prototype.getMinVoltage=function(){return this.checkOpen(),this.data.minVoltage},ae.prototype.getMaxVoltage=function(){return this.checkOpen(),this.data.maxVoltage},ae.prototype.getVoltageOutputRange=function(){return this.checkOpen(),this.data.voltageOutputRange},ae.prototype.setVoltageOutputRange=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETVOLTAGERANGE).then(function(e){n.data.voltageOutputRange=t})},ae.prototype.setVoltageOutputRangeSuccess=function(t){switch(parseInt(t)){case ht.VOLTAGE_OUTPUT_RANGE_10V:this.data.minVoltage=-10,this.data.maxVoltage=10;break;case ht.VOLTAGE_OUTPUT_RANGE_5V:this.data.minVoltage=0,this.data.maxVoltage=5}};var re=function(){It.apply(this,arguments),this.name="VoltageRatioInput",this["class"]=M.PHIDCHCLASS_VOLTAGERATIOINPUT,this.onVoltageRatioChange=function(t){},this.onSensorChange=function(t,e){},this.onError=function(t,e){}};return re.prototype=Object.create(It.prototype),re.prototype.constructor=re,f.VoltageRatioInput=re,re.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},re.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new Et(k.EPHIDGET_INVALIDPACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},re.prototype._event=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case dt.BP_ERROREVENT:this.handleErrorEvent(t);break;case dt.BP_SENSORCHANGE:this.handleSensorChangeEvent(t);break;case dt.BP_VOLTAGERATIOCHANGE:this.handleVoltageRatioChangeEvent(t)}return!0},re.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case dt.BP_SETENABLED:return this.data.bridgeEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BridgeEnabled"),!0;case dt.BP_SETBRIDGEGAIN:return this.data.bridgeGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BridgeGain"),!0;case dt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case dt.BP_SETSENSORTYPE:return this.data.sensorType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorType"),!0;case dt.BP_SETSENSORVALUECHANGETRIGGER:return this.data.sensorValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorValueChangeTrigger"),!0;case dt.BP_SETCHANGETRIGGER:return this.data.voltageRatioChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageRatioChangeTrigger"),!0}},re.prototype.getBridgeEnabled=function(){return this.checkOpen(),!!this.data.bridgeEnabled},re.prototype.setBridgeEnabled=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETENABLED).then(function(e){n.data.bridgeEnabled=t})},re.prototype.getBridgeGain=function(){return this.checkOpen(),this.data.bridgeGain},re.prototype.setBridgeGain=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETBRIDGEGAIN).then(function(e){n.data.bridgeGain=t})},re.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},re.prototype.setDataInterval=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,dt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},re.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},re.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},re.prototype.getSensorType=function(){return this.checkOpen(),this.data.sensorType},re.prototype.setSensorType=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,dt.BP_SETSENSORTYPE).then(function(e){n.data.sensorType=t})},re.prototype.getSensorUnit=function(){return this.checkOpen(),this.data.sensorUnit},re.prototype.getSensorValue=function(){return this.checkOpen(),this.data.sensorValue},re.prototype.getSensorValueChangeTrigger=function(){return this.checkOpen(),this.data.sensorValueChangeTrigger},re.prototype.setSensorValueChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETSENSORVALUECHANGETRIGGER).then(function(e){n.data.sensorValueChangeTrigger=t})},re.prototype.getVoltageRatio=function(){return this.checkOpen(),this.data.voltageRatio},re.prototype.getMinVoltageRatio=function(){return this.checkOpen(),this.data.minVoltageRatio},re.prototype.getMaxVoltageRatio=function(){return this.checkOpen(),this.data.maxVoltageRatio},re.prototype.getVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.voltageRatioChangeTrigger},re.prototype.setVoltageRatioChangeTrigger=function(t){if(this.isopen!==!0)return l(k.EPHIDGET_NOTATTACHED);var e=new Tt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,dt.BP_SETCHANGETRIGGER).then(function(e){n.data.voltageRatioChangeTrigger=t})},re.prototype.getMinVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.minVoltageRatioChangeTrigger},re.prototype.getMaxVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.maxVoltageRatioChangeTrigger},re.prototype.handleSensorChangeEvent=function(t){this.data.sensorValue=t.get("0");var e={unit:t.get("UnitInfo.unit"),name:t.get("UnitInfo.name"),symbol:t.get("UnitInfo.symbol")};this.data.sensorUnit=e,this.onSensorChange(this.data.sensorValue,this.data.sensorUnit)},re.prototype.handleVoltageRatioChangeEvent=function(t){this.data.voltageRatio=t.get("0"),this.onVoltageRatioChange(this.data.voltageRatio)},re.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case dt.BP_DATAINTERVALCHANGE:this.data.dataInterval=t.get("0");break;case dt.BP_MINDATAINTERVALCHANGE:this.data.minDataInterval=t.get("0");break;default:return!1}return!0},f};a?(module.exports=new l,global.jPhidgets=module.exports):window.jPhidgets=new l}).call(this);