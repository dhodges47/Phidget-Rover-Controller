"use strict";(function(){function t(){return Date.now()-T}function e(e){0===E&&console.log("debug("+t()+"): "+e)}function n(t){for(var e=0,n=new Uint8Array(4*t.length),i=0;i!=t.length;i++){var a=t.charCodeAt(i);if(a<128)n[e++]=a;else{if(a<2048)n[e++]=a>>6|192;else{if(a>55295&&a<56320){if(++i==t.length)throw"UTF-8 encode: incomplete surrogate pair";var r=t.charCodeAt(i);if(r<56320||r>57343)throw"UTF-8 encode: second char code 0x"+r.toString(16)+" at index "+i+" in surrogate pair out of range";a=65536+((1023&a)<<10)+(1023&r),n[e++]=a>>18|240,n[e++]=a>>12&63|128}else n[e++]=a>>12|224;n[e++]=a>>6&63|128}n[e++]=63&a|128}}return n.subarray(0,e)}function i(t){for(var e="",n=0;n<t.length;){var i=t[n++];if(i>127){if(i>191&&i<224){if(n>=t.length)throw"UTF-8 decode: incomplete 2-byte sequence";i=(31&i)<<6|63&t[n]}else if(i>223&&i<240){if(n+1>=t.length)throw"UTF-8 decode: incomplete 3-byte sequence";i=(15&i)<<12|(63&t[n])<<6|63&t[++n]}else{if(!(i>239&&i<248))throw"UTF-8 decode: unknown multibyte start 0x"+i.toString(16)+" at index "+(n-1);if(n+2>=t.length)throw"UTF-8 decode: incomplete 4-byte sequence";i=(7&i)<<18|(63&t[n])<<12|(63&t[++n])<<6|63&t[++n]}++n}if(i<=65535)e+=String.fromCharCode(i);else{if(!(i<=1114111))throw"UTF-8 decode: code point 0x"+i.toString(16)+" exceeds UTF-16 reach";i-=65536,e+=String.fromCharCode(i>>10|55296),e+=String.fromCharCode(1023&i|56320)}}return e}var a=("undefined"!=typeof require,"undefined"!=typeof module&&module.exports);if(a)var r=require("url"),o=require("net"),s=require("crypto"),h=require("btoa");String.startsWith||(String.prototype.startsWith=function(t){return 0===this.indexOf(t)});var c={},p=1,u={},d=1,l={},g=1,T=Date.now(),E=1,v=function(){function T(t,e){return Math.floor(Math.random()*(e-t))+t}function E(t){if(a){var e=s.randomBytes(t);return h(e).substring(t)}var e=new Int8Array(t);if(window.crypto)window.crypto.getRandomValues(e);else if(window.msCrypto)window.msCrypto.getRandomValues(e);else{Math.seedrandom();for(var n=0;n<t;n++)e[n]=T(0,256)}return window.btoa(e.buffer).substring(t)}function v(t,e){return Promise.reject(new dt(t,e))}function y(t){var e=Et[t].substring(7);return _[e]?_[e]:null}function f(t){for(var e in c)if(c[e].matchPhidget(t))return}function P(t){for(var e in u){var n=u[e];if(n.attaching!==!0&&n.isopen!==!0)if(void 0===t){if(f(n)===!0)return}else if(t.match(n))return void t.open(n)["catch"](function(t){this.onError?this.onError(t.errorCode,t.message):console.error(t)}.bind(n))}}function C(t){var e=vt[t.type];for(var n in e)if(n=e[n],!(n.v[0]>t.version||n.v[1]<=t.version)){if("VINT"===t.type){if(n.i!==t.vintID)continue}else{if(n.i!==t.productID)continue;if(void 0!==n.n&&n.n!=t.interfaceNum)continue}return n}throw new dt(w.UNEXPECTED,"Couldn't find device in device list!!")}function A(t,e){var n=0;for(var i in t.phiddev.ch){if(i=t.phiddev.ch[i],e.uniqueIndex<n+i.n)return i;n+=i.n}throw new dt(w.UNEXPECTED,"Couldn't find channel in channel list!!")}var _={},S="jPhidget";if(a)var I="www,nodejs";else var I="www";var O=2,N=0,R="phidgetclient",m={Connect:10,Command:20,Device:30},D={HandShakeC0:10,HandShakeS0:11,AuthC0:30,AuthS0:31,AuthC1:32,AuthS1:33,Reply:40,KeepAlive:41,Attach:50,Detach:55,Open:60,Close:65,BridgePkt:70,Channel:80},k={Magic:1346914608,Request:1,Reply:2,Event:4};setInterval(function(){P()},1e3),setInterval(function(){for(var e in u){var n=u[e];n.isopen||void 0!=n.openTimeout&&t()-n.openTime>n.openTimeout&&n.openTimedOut()}},500),_.getLibraryVersion=function(){return"Phidget22 1.0.0"},_.getJSLibraryVersion=function(){return"2.x.x"},_.Connections=c;var B=function(t,e,n,i,a,r){"undefined"!=typeof r?this.buffer=this.render(t,e,n,i,a,r):"undefined"!=typeof t&&(this.hdrlen=this.parse(t))};B.prototype.toString=function(){return"{flags:0x"+this.flags.toString(16)+" len:"+this.len+" reqseq:"+this.reqseq+" repseq:"+this.repseq+" type:"+this.type+" subtype:"+this.stype+"}"},B.prototype.parse=function(t){if(this.magic=t[3]<<24|t[2]<<16|t[1]<<8|t[0],this.len=t[7]<<24|t[6]<<16|t[5]<<8|t[4],this.flags=t[9]<<8|t[8],this.reqseq=t[11]<<8|t[10],this.repseq=t[13]<<8|t[12],this.type=t[14],this.stype=t[15],this.magic!=k.Magic)throw"Bad Request Magic";return 16},B.prototype.render=function(t,e,n,i,a,r){var o=new Uint8Array(16);return o[3]=k.Magic>>24&255,o[2]=k.Magic>>16&255,o[1]=k.Magic>>8&255,o[0]=255&k.Magic,o[7]=t>>24&255,o[6]=t>>16&255,o[5]=t>>8&255,o[4]=255&t,o[9]=e>>8&255,o[8]=255&e,o[11]=n>>8&255,o[10]=255&n,o[13]=i>>8&255,o[12]=255&i,o[14]=a,o[15]=r,o};var L={PUSH_PULL:1,LINE_DRIVER_2K2:2,LINE_DRIVER_10K:3,OPEN_COLLECTOR_2K2:4,OPEN_COLLECTOR_10K:5};_.EncoderIOMode=L;var w={SUCCESS:0,NOT_PERMITTED:1,NO_SUCH_ENTITY:2,TIMEOUT:3,KEEP_ALIVE:58,INTERRUPTED:4,IO:5,NO_MEMORY:6,ACCESS:7,FAULT:8,BUSY:9,EXISTS:10,IS_NOT_DIRECTORY:11,IS_DIRECTORY:12,INVALID:13,TOO_MANY_FILES_SYSTEM:14,TOO_MANY_FILES:15,NO_SPACE:16,FILE_TOO_BIG:17,READ_ONLY_FILESYSTEM:18,READ_ONLY:19,UNSUPPORTED:20,INVALID_ARGUMENT:21,TRY_AGAIN:22,NOT_EMPTY:26,UNEXPECTED:28,DUPLICATE:27,BAD_PASSWORD:37,NETWORK_UNAVAILABLE:45,CONNECTION_REFUSED:35,CONNECTION_RESET:46,HOST_UNREACHABLE:48,NO_SUCH_DEVICE:40,WRONG_DEVICE:50,BROKEN_PIPE:41,NAME_RESOLUTION_FAILURE:44,UNKNOWN_VALUE:51,NOT_ATTACHED:52,INVALID_PACKET:53,TOO_BIG:54,BAD_VERSION:55,CLOSED:56,NOT_CONFIGURED:57,END_OF_FILE:31};_.ErrorCode=w;var M={BAD_VERSION:1,BUSY:2,NETWORK:3,DISPATCH:4,SUCCESS:4096,OVERRUN:4098,PACKET_LOST:4099,WRAP_AROUND:4100,OVER_TEMPERATURE:4101,OVER_CURRENT:4102,OUT_OF_RANGE:4103,BAD_POWER:4104,SATURATION:4105,OVER_VOLTAGE:4107,FAILSAFE_CONDITION:4108,VOLTAGE_ERROR:4109,ENERGY_DUMP_CONDITION:4110,MOTOR_STALL_CONDITION:4111};_.ErrorEventCode=M;var V={NONE:0,PN_INTERFACE_KIT488:1,PN_1000:2,PN_1001:3,PN_1002:4,PN_1008:5,PN_1010_1013_1018_1019:6,PN_1011:7,PN_1012:8,PN_1014:9,PN_1015:10,PN_1016:11,PN_1017:12,PN_1023:13,PN_1024:14,PN_1030:15,PN_1031:16,PN_1032:17,PN_1040:18,PN_1041:19,PN_1042:20,PN_1043:21,PN_1044:22,PN_1045:23,PN_1046:24,PN_1047:25,PN_1048:26,PN_1049:27,PN_1051:28,PN_1052:29,PN_1053:30,PN_1054:31,PN_1055:32,PN_1056:33,PN_1057:34,PN_1058:35,PN_1059:36,PN_1060:37,PN_1061:38,PN_1062:39,PN_1063:40,PN_1064:41,PN_1065:42,PN_1066:43,PN_1067:44,PN_1202_1203:45,PN_1204:46,PN_1215__1218:47,PN_1219__1222:48,PN_ADP1000:49,PN_ADP1001:50,PN_DAQ1000:51,PN_DAQ1200:52,PN_DAQ1300:53,PN_DAQ1301:54,PN_DAQ1400:55,PN_DAQ1500:56,PN_DCC1000:57,PN_DST1000:58,PN_DST1200:59,PN_ENC1000:60,PN_HIN1000:61,PN_HIN1001:62,PN_HIN1100:63,PN_HUB0000:64,PN_HUB0001:65,PN_HUB0002:66,PN_HUB0004:67,PN_HUB0005:68,PN_HUM1000:69,PN_LCD1100:70,PN_LED1000:71,PN_LUX1000:72,PN_MOT1100:73,PN_MOT1101:74,PN_OUT1000:75,PN_OUT1001:76,PN_OUT1002:77,PN_OUT1100:78,PN_PRE1000:79,PN_RCC1000:80,PN_REL1000:81,PN_REL1100:82,PN_REL1101:83,PN_SAF1000:84,PN_SND1000:85,PN_STC1000:86,PN_TMP1000:87,PN_TMP1100:88,PN_TMP1101:89,PN_TMP1200:90,PN_TMP1300:91,PN_VCP1000:92,PN_VCP1001:93,PN_VCP1002:94,DIGITAL_INPUT_PORT:95,DIGITAL_OUTPUT_PORT:96,VOLTAGE_INPUT_PORT:97,VOLTAGE_RATIO_INPUT_PORT:98,GENERIC_USB:99,GENERIC_VINT:100,FIRMWARE_UPGRADE_USB:101,FIRMWARE_UPGRADE_STM32F0:102,FIRMWARE_UPGRADE_STM8S:103,FIRMWARE_UPGRADE_SPI:104,PN_VCP1100:105,PN_VINTSERVO_S2313M:106,PN_DCC1100:108,PN_HIN1101:109,PN_DCC1001:110,PN_DICTIONARY:111,PN_VINTSERVO_S3317M:112,PN_VINTSERVO_S4309M:113,PN_VINTSERVO_S4309R:114,PN_STC1001:115,PN_USBSWITCH:116};_.DeviceID=V;var U={NONE:0,ACCELEROMETER:1,ADVANCED_SERVO:2,ANALOG:3,BRIDGE:4,ENCODER:5,FREQUENCY_COUNTER:6,GPS:7,HUB:8,INTERFACE_KIT:9,IR:10,LED:11,MESH_DONGLE:12,MOTOR_CONTROL:13,PH_SENSOR:14,RFID:15,SERVO:16,SPATIAL:17,STEPPER:18,TEMPERATURE_SENSOR:19,TEXT_LCD:20,VINT:21,GENERIC:22,FIRMWARE_UPGRADE:23,DICTIONARY:24};_.DeviceClass=U;var b={NONE:0,ACCELEROMETER:1,CURRENT_INPUT:2,DATA_ADAPTER:3,DC_MOTOR:4,DIGITAL_INPUT:5,DIGITAL_OUTPUT:6,DISTANCE_SENSOR:7,ENCODER:8,FREQUENCY_COUNTER:9,GPS:10,LCD:11,GYROSCOPE:12,HUB:13,CAPACITIVE_TOUCH:14,HUMIDITY_SENSOR:15,IR:16,LIGHT_SENSOR:17,MAGNETOMETER:18,MESH_DONGLE:19,PH_SENSOR:37,POWER_GUARD:20,PRESSURE_SENSOR:21,RC_SERVO:22,RESISTANCE_INPUT:23,RFID:24,SOUND_SENSOR:25,SPATIAL:26,STEPPER:27,TEMPERATURE_SENSOR:28,VOLTAGE_INPUT:29,VOLTAGE_OUTPUT:30,VOLTAGE_RATIO_INPUT:31,FIRMWARE_UPGRADE:32,GENERIC:33,MOTOR_POSITION_CONTROLLER:34,BLDC_MOTOR:35,DICTIONARY:36};_.ChannelClass=b;var G={NONE:1,DIGITAL_OUTPUT_DUTY_CYCLE:16,DIGITAL_OUTPUT_LEDDRIVER:17,TEMPERATURE_SENSOR_RTD:32,TEMPERATURE_SENSOR_THERMOCOUPLE:33,VOLTAGE_INPUT_SENSOR_PORT:48,VOLTAGE_RATIO_INPUT_SENSOR_PORT:64,VOLTAGE_RATIO_INPUT_BRIDGE:65,LCD_GRAPHIC:80,LCD_TEXT:81,ENCODER_MODE_SETTABLE:96,RCSERVO_EMBEDDED:112};_.ChannelSubclass=G;var H={ROUTER:1,SLEEPY_END_DEVICE:2};_.MeshMode=H;var x={OFF:1,VOLTS_12:2,VOLTS_24:3};_.PowerSupply=x;var F={WIRES_2:1,WIRES_3:2,WIRES_4:3};_.RTDWireSetup=F;var Y={NPN:1,PNP:2};_.InputMode=Y;var W={OFF:1,ON:2,AUTO:3};_.FanMode=W;var q={NONE:0,BOOLEAN:1,PERCENT:2,DECIBEL:3,MILLIMETER:4,CENTIMETER:5,METER:6,GRAM:7,KILOGRAM:8,MILLIAMPERE:9,AMPERE:10,KILOPASCAL:11,VOLT:12,DEGREE_CELCIUS:13,LUX:14,GAUSS:15,PH:16,WATT:17};_.Unit=q;var K={VOLTS_1_7:1,VOLTS_2_75:2,VOLTS_3_2:3,VOLTS_3_9:4,VOLTS_4_0:5,VOLTS_4_8:6,VOLTS_5_0:7,VOLTS_5_6:8};_.LEDForwardVoltage=K;var X={ZERO_CROSSING:1,LOGIC_LEVEL:2};_.FrequencyFilterType=X;var j={VINT:0,DIGITAL_INPUT:1,DIGITAL_OUTPUT:2,VOLTAGE_INPUT:3,VOLTAGE_RATIO_INPUT:4};_.HubPortMode=j;var z={UNKNOWN:1,SPACE:2,PULSE:3,BI_PHASE:4,RC5:5,RC6:6};_.IRCodeEncoding=z;var Q={UNKNOWN:1,CONSTANT:2,VARIABLE:3};_.IRCodeLength=Q;var J={USER1:1,USER2:2,DIMENSIONS_6X10:3,DIMENSIONS_5X8:4,DIMENSIONS_6X12:5};_.LCDFont=J;var Z={NO_SCREEN:1,DIMENSIONS_1X8:2,DIMENSIONS_2X8:3,DIMENSIONS_1X16:4,DIMENSIONS_2X16:5,DIMENSIONS_4X16:6,DIMENSIONS_2X20:7,DIMENSIONS_4X20:8,DIMENSIONS_2X24:9,DIMENSIONS_1X40:10,DIMENSIONS_2X40:11,DIMENSIONS_4X40:12,DIMENSIONS_64X128:13};_.LCDScreenSize=Z;var $={OFF:0,ON:1,INVERT:2};_.LCDPixelState=$;var tt={VOLTS_5_0:1,VOLTS_6_0:2,VOLTS_7_4:3};_.RCServoVoltage=tt;var et={EM4100:1,ISO11785_FDX_B:2,PHIDGET_TAG:3};_.RFIDProtocol=et;var nt={DB_102:1,DB_82:2};_.SPLRange=nt;var it={STEP:0,RUN:1};_.StepperControlMode=it;var at={PT100_3850:1,PT1000_3850:2,PT100_3920:3,PT1000_3920:4};_.RTDType=at;var rt={J:1,K:2,E:3,T:4};_.ThermocoupleType=rt;var ot={MILLIVOLTS_10:1,MILLIVOLTS_40:2,MILLIVOLTS_200:3,MILLIVOLTS_312_5:4,MILLIVOLTS_400:5,MILLIVOLTS_1000:6,VOLTS_2:7,VOLTS_5:8,VOLTS_15:9,VOLTS_40:10,AUTO:11};_.VoltageRange=ot;var st={VOLTAGE:0,PN_1114:11140,PN_1117:11170,PN_1123:11230,PN_1127:11270,PN_1130_PH:11301,PN_1130_ORP:11302,PN_1132:11320,PN_1133:11330,PN_1135:11350,PN_1142:11420,PN_1143:11430,PN_3500:35e3,PN_3501:35010,PN_3502:35020,PN_3503:35030,PN_3507:35070,PN_3508:35080,PN_3509:35090,PN_3510:35100,PN_3511:35110,PN_3512:35120,PN_3513:35130,PN_3514:35140,PN_3515:35150,PN_3516:35160,PN_3517:35170,PN_3518:35180,PN_3519:35190,PN_3584:35840,PN_3585:35850,PN_3586:35860,PN_3587:35870,PN_3588:35880,PN_3589:35890};_.VoltageSensorType=st;var ht={VOLTS_10:1,VOLTS_5:2};_.VoltageOutputRange=ht;var ct={GAIN_1X:1,GAIN_2X:2,GAIN_4X:3,GAIN_8X:4,GAIN_16X:5,GAIN_32X:6,GAIN_64X:7,GAIN_128X:8};_.BridgeGain=ct;var pt={VOLTAGE_RATIO:0,PN_1101_SHARP2D120X:11011,PN_1101_SHARP2Y0A21:11012,PN_1101_SHARP2Y0A02:11013,PN_1102:11020,PN_1103:11030,PN_1104:11040,PN_1105:11050,PN_1106:11060,PN_1107:11070,PN_1108:11080,PN_1109:11090,PN_1110:11100,PN_1111:11110,PN_1112:11120,PN_1113:11130,PN_1115:11150,PN_1116:11160,PN_1118_AC:11181,PN_1118_DC:11182,PN_1119_AC:11191,PN_1119_DC:11192,PN_1120:11200,PN_1121:11210,PN_1122_AC:11221,PN_1122_DC:11222,PN_1124:11240,PN_1125_HUMIDITY:11251,PN_1125_TEMPERATURE:11252,PN_1126:11260,PN_1128:11280,PN_1129:11290,PN_1131:11310,PN_1134:11340,PN_1136:11360,PN_1137:11370,PN_1138:11380,PN_1139:11390,PN_1140:11400,PN_1141:11410,PN_1146:11460,PN_3120:31200,PN_3121:31210,PN_3122:31220,PN_3123:31230,PN_3130:31300,PN_3520:35200,PN_3521:35210,PN_3522:35220};_.VoltageRatioSensorType=pt;var ut={0:"Success",1:"Not Permitted",2:"No Such Entity",3:"Timed Out",58:"Keep Alive Failure",4:"Op Interrupted",5:"IO Issue",6:"Memory Issue",7:"Access (Permission) Issue",8:"Address Issue",9:"Resource Busy",10:"Object Exists",11:"Object is not a directory",12:"Object is a directory",13:"Invalid",14:"Too many open files in system",15:"Too many open files",16:"Not enough space",17:"File too Big",18:"Read Only Filesystem",19:"Read Only Object",20:"Operation Not Supported",21:"Invalid Argument",22:"Try again",26:"No Empty",28:"Unexpected Error",27:"Duplicate",37:"Bad Credential",45:"Network Unavailable",35:"Connection Refused",46:"Connection Reset",48:"No route to host",40:"No Such Device",50:"Wrong Device",41:"Broken Pipe",44:"Name Resolution Failure",51:"Unknown or Invalid Value",52:"Device not Attached",53:"Invalid or Unexpected Packet",54:"Argument List Too Long",55:"Bad Version",56:"Closed",57:"Not Configured",31:"End of File"},dt=function(t,e){this.name="PhidgetError",this.errorCode=t,this.message=e||ut[t],this.stack=(new Error).stack};dt.prototype=Error.prototype,_.PhidgetError=dt;var lt={BP_SETSTATUS:0,BP_ACCELERATIONCHANGE:1,BP_ANGULARRATEUPDATE:2,BP_BACKEMFCHANGE:3,BP_CLEAR:4,BP_CODE:5,BP_COPY:6,BP_COUNTCHANGE:7,BP_CURRENTCHANGE:8,BP_DATA:9,BP_DATAINTERVALCHANGE:10,BP_DBCHANGE:11,BP_DISTANCECHANGE:12,BP_DRAWLINE:13,BP_DRAWPIXEL:14,BP_DRAWRECT:15,BP_DUTYCYCLECHANGE:16,BP_ERROREVENT:17,BP_FIELDSTRENGTHCHANGE:18,BP_FLUSH:19,BP_FREQUENCYCHANGE:20,BP_FREQUENCYDATA:21,BP_HUMIDITYCHANGE:22,BP_ILLUMINANCECHANGE:23,BP_INITIALIZE:24,BP_LEARN:25,BP_MANCHESTER:26,BP_MINDATAINTERVALCHANGE:27,BP_PACKET:28,BP_POSITIONCHANGE:29,BP_POSITIONFIXSTATUSCHANGE:30,BP_PRESSURECHANGE:31,BP_RAWDATA:32,BP_REPEAT:33,BP_OPENRESET:34,BP_RESETCORRECTIONPARAMETERS:35,BP_RESISTANCECHANGE:36,BP_SAVECORRECTIONPARAMETERS:37,BP_SAVEFRAMEBUFFER:38,BP_SENDPACKET:39,BP_SETACCELERATION:40,BP_SETANTENNAON:41,BP_SETBACKEMFSENSINGSTATE:42,BP_SETBACKLIGHT:43,BP_SETBRAKINGDUTYCYCLE:44,BP_SETBRIDGEGAIN:45,BP_SETCHANGETRIGGER:46,BP_SETCHARACTERBITMAP:47,BP_SETCONTRAST:48,BP_SETCONTROLMODE:49,BP_SETCORRECTIONPARAMETERS:50,BP_SETCURRENTLIMIT:51,BP_SETCURSORBLINK:52,BP_SETCURSORON:53,BP_SETDATAINTERVAL:54,BP_SETDUTYCYCLE:55,BP_SETENABLED:56,BP_SETENGAGED:57,BP_SETFANMODE:58,BP_SETFILTERTYPE:59,BP_SETFIRMWAREUPGRADEFLAG:60,BP_SETFONTSIZE:61,BP_SETFRAMEBUFFER:62,BP_SETHOLDINGCURRENTLIMIT:63,BP_SETINPUTMODE:64,BP_SETIOMODE:65,BP_SETSENSITIVITY:66,BP_SETLEDCURRENTLIMIT:67,BP_SETLEDFORWARDVOLTAGE:68,BP_SETMAXPULSEWIDTH:69,BP_SETMINPULSEWIDTH:70,BP_SETOVERVOLTAGE:71,BP_SETPORTMODE:72,BP_SETPORTPOWER:73,BP_SETPOWERSUPPLY:74,BP_SETSONARQUIETMODE:75,BP_SETRTDTYPE:76,BP_SETRTDWIRESETUP:77,BP_SETSCREENSIZE:78,BP_SETSENSORTYPE:79,BP_SETSLEEP:80,BP_SETSPEEDRAMPINGSTATE:81,BP_SETSTATE:82,BP_SETTARGETPOSITION:83,BP_SETTHERMOCOUPLETYPE:84,BP_SETVELOCITYLIMIT:85,BP_SETVOLTAGE:86,BP_SETVOLTAGERANGE:87,BP_SONARUPDATE:88,BP_SPATIALDATA:89,BP_STATECHANGE:90,BP_STOPPED:91,BP_TAG:92,BP_TAGLOST:93,BP_TARGETPOSITIONREACHED:94,BP_TEMPERATURECHANGE:95,BP_TOUCHINPUTVALUECHANGE:96,BP_TRANSMIT:97,BP_TRANSMITRAW:98,BP_TRANSMITREPEAT:99,BP_VELOCITYCHANGE:100,BP_VOLTAGECHANGE:101,BP_VOLTAGERATIOCHANGE:102,BP_WRITE:103,BP_WRITEBITMAP:104,BP_WRITETEXT:105,BP_ZERO:106,BP_SETCALIBRATIONVALUES:107,BP_TIME:108,BP_DATE:109,BP_HEADINGCHANGE:110,BP_CLOSERESET:111,BP_SENDFIRMWARE:112,BP_PROGRESSCHANGE:113,BP_DEVICEINFO:114,BP_SENSORCHANGE:115,BP_SETSPLRANGE:116,BP_DATAIN:117,BP_DATAOUT:118,BP_SETCURRENTREGULATORGAIN:119,BP_SETDEADBAND:120,BP_BRAKINGSTRENGTHCHANGE:121,BP_SETSENSORVALUECHANGETRIGGER:122,BP_DICTIONARYADD:123,BP_DICTIONARYADDED:124,BP_DICTIONARYUPDATE:125,BP_DICTIONARYUPDATED:126,BP_DICTIONARYREMOVE:127,BP_DICTIONARYREMOVED:128,BP_DICTIONARYGET:129,BP_DICTIONARYSET:130,BP_DICTIONARYREMOVEALL:131,BP_DICTIONARYSCAN:132,BP_PHCHANGE:133,BP_SETCORRECTIONTEMPERATURE:134,BP_SETKP:135,BP_SETKD:136,BP_TOUCHINPUTEND:137,BP_REBOOTFIRMWAREUPGRADE:138,BP_REBOOT:139,BP_WRITELABEL:140,BP_SETSTALLVELOCITY:141,BP_SETKI:142,BP_ENABLE:143},gt=function(t,e,n){this.conn=t,this.req=e,n?(this.version=n.v,this.source=n.s,this.flags=n.f,this.vpkt=n.p,this.chid=n.O,this.channel=t.getChannel(this.chid),this.channelIndex=n.X,this.entryCount=n.c,this.entries=n.e):(this.version=0,this.source=2,this.flags=0,this.entryCount=0,this.entries={})};gt.prototype.NUMBER=1,gt.prototype.FLOAT=2,gt.prototype.STRING=3,gt.prototype.ARRAY=4,gt.prototype.JSON=5,gt.prototype.F_EVENT=1,gt.prototype.isEvent=function(){return!!(this.flags&this.F_EVENT)},gt.prototype.validType=function(t){switch(t){case"c":case"h":case"u":case"uh":case"ul":case"d":case"l":case"f":case"g":case"s":case"R":case"I":case"U":case"J":return!0;default:return!1}},gt.prototype.entryType=function(t){switch(t.type){case"c":case"h":case"uh":case"d":case"u":case"l":case"ul":return this.NUMBER;case"f":case"g":return this.FLOAT;case"s":return this.STRING;case"R":case"I":case"G":case"U":return this.ARRAY;case"J":return this.JSON;default:return-1}},gt.prototype.convertType=function(t){switch(this.entryType(t)){case this.NUMBER:var e=parseInt(t.value);if(!isNaN(e))return e;if("boolean"==typeof t.value)return t.value?1:0;break;case this.FLOAT:var e=parseFloat(t.value);if(!isNaN(e))return e;if("boolean"==typeof t.value)return t.value?1:0;break;case this.STRING:return"string"!=typeof t.value?""+t.value:t.value;case this.JSON:if("object"==typeof t.value)return t.value;break;case this.ARRAY:if(Array.isArray(t.value))return t.value}throw"invalid value ["+t.value+"] for type ["+t.type+"]"},gt.prototype.set=function(t){if("undefined"==typeof t)throw"invalid argument";if("undefined"==typeof t.name)throw"missing name";if("undefined"==typeof t.type)throw"missing type";if("undefined"==typeof t.value)throw"missing value";if(t.name in this.entries)throw"value ["+t.name+"] already set";if(!this.validType(t.type))throw"invalid type ["+t.type+"]";var e=this.convertType(t),n={t:t.type,v:e};this.entries[t.name]=n,this.entryCount++},gt.prototype.send=function(t,e){if("string"==typeof e&&(e=this[e]),!t.isopen)return Promise.reject(new dt(w.NOT_ATTACHED));var n=JSON.stringify({v:this.version,s:this.source,f:this.flags,p:e,I:t.parent.phid,X:t.uniqueIndex,c:this.entryCount,e:this.entries});return t.conn.sendRequest(0,0,0,m.Device,D.BridgePkt,n)},gt.prototype.deliver=function(){if(!this.channel)throw"Bridge packet missing channel";if(this.channel.isopen===!1)return void e("deliver event to closed channel");try{this.isEvent()||0===this.vpkt||this.conn.sendReply(this.req.reqseq,this.req.type,this.req.stype,[]),this.channel.userphid.bridgeInput(this)}catch(t){throw t}},gt.prototype.get=function(t){if(this.entries.hasOwnProperty(t))return this.entries[t].v};var Tt={0:"PhidgetNone",1:"PhidgetAccelerometer",2:"PhidgetAdvancedServo",3:"PhidgetAnalog",4:"PhidgetBridge",5:"PhidgetEncoder",6:"PhidgetFrequencyCounter",7:"PhidgetGPS",8:"PhidgetHub",9:"PhidgetInterfaceKit",10:"PhidgetIR",11:"PhidgetLED",12:"PhidgetMeshDongle",13:"PhidgetMotorControl",14:"PhidgetPHSensor",15:"PhidgetRFID",16:"PhidgetServo",17:"PhidgetSpatial",18:"PhidgetStepper",19:"PhidgetTemperatureSensor",20:"PhidgetTextLCD",21:"PhidgetVINT",22:"PhidgetGeneric",23:"PhidgetFirmwareUpgrade",24:"PhidgetDictionary"},Et={0:"PhidgetNone",1:"PhidgetAccelerometer",2:"PhidgetCurrentInput",3:"PhidgetDataAdapter",4:"PhidgetDCMotor",5:"PhidgetDigitalInput",6:"PhidgetDigitalOutput",7:"PhidgetDistanceSensor",8:"PhidgetEncoder",9:"PhidgetFrequencyCounter",10:"PhidgetGPS",11:"PhidgetLCD",12:"PhidgetGyroscope",13:"PhidgetHub",14:"PhidgetCapacitiveTouch",15:"PhidgetHumiditySensor",16:"PhidgetIR",17:"PhidgetLightSensor",18:"PhidgetMagnetometer",19:"PhidgetMeshDongle",37:"PhidgetPHSensor",20:"PhidgetPowerGuard",21:"PhidgetPressureSensor",22:"PhidgetRCServo",23:"PhidgetResistanceInput",24:"PhidgetRFID",25:"PhidgetSoundSensor",26:"PhidgetSpatial",27:"PhidgetStepper",28:"PhidgetTemperatureSensor",29:"PhidgetVoltageInput",30:"PhidgetVoltageOutput",31:"PhidgetVoltageRatioInput",32:"PhidgetFirmwareUpgrade",33:"PhidgetGeneric",34:"PhidgetMotorPositionController",35:"PhidgetBLDCMotor",36:"PhidgetDictionary"},vt={VINT:[{i:1,c:21,v:[100,200],s:"DIGITALINPUT_PORT",ch:[{n:1,s:1}]},{i:2,c:21,v:[100,200],s:"DIGITALOUTPUT_PORT",ch:[{n:1,s:16}]},{i:3,c:21,v:[100,200],s:"VOLTAGEINPUT_PORT",ch:[{n:1,s:48}]},{i:4,c:21,v:[100,200],s:"VOLTAGERATIOINPUT_PORT",ch:[{n:1,s:64}]},{i:29,c:21,v:[100,200],s:"ADP1000",ch:[{n:1,s:1},{n:1,s:1}]},{i:23,c:21,v:[100,200],s:"ADP1001",ch:[{n:1,s:1}]},{i:50,c:21,v:[100,200],s:"DAQ1000",ch:[{n:8,s:64},{n:8,s:48}]},{i:41,c:21,v:[100,200],s:"OUT1000",ch:[{n:1,s:1}]},{i:42,c:21,v:[100,200],s:"OUT1001",ch:[{n:1,s:1}]},{i:43,c:21,v:[100,200],s:"OUT1002",ch:[{n:1,s:1}]},{i:28,c:21,v:[100,200],s:"DAQ1200",ch:[{n:4,s:1}]},{i:25,c:21,v:[100,200],s:"OUT1100",ch:[{n:4,s:16}]},{i:32,c:21,v:[100,200],s:"DAQ1300",ch:[{n:4,s:1}]},{i:54,c:21,v:[100,200],s:"DAQ1301",ch:[{n:16,s:1}]},{i:34,c:21,v:[100,200],s:"DAQ1400",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:24,c:21,v:[100,200],s:"DAQ1500",ch:[{n:2,s:65}]},{i:64,c:21,v:[100,200],s:"VCP1100",ch:[{n:1,s:1}]},{i:47,c:21,v:[100,200],s:"DCC1000",ch:[{n:1,s:1},{n:1,s:96},{n:1,s:64},{n:1,s:1},{n:1,s:1}]},{i:47,c:21,v:[200,300],s:"DCC1000",ch:[{n:1,s:1},{n:1,s:96},{n:1,s:64},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:68,c:21,v:[100,200],s:"DCC1001",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:65,c:21,v:[100,200],s:"DCC1100",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:45,c:21,v:[100,200],s:"DST1000",ch:[{n:1,s:1}]},{i:46,c:21,v:[100,200],s:"DST1200",ch:[{n:1,s:1}]},{i:18,c:21,v:[100,200],s:"ENC1000",ch:[{n:1,s:96}]},{i:67,c:21,v:[100,200],s:"HIN1101",ch:[{n:1,s:1},{n:1,s:1}]},{i:36,c:21,v:[100,200],s:"HIN1000",ch:[{n:7,s:1}]},{i:56,c:21,v:[100,200],s:"HIN1001",ch:[{n:4,s:1},{n:1,s:1}]},{i:37,c:21,v:[100,200],s:"HIN1100",ch:[{n:2,s:1},{n:1,s:1}]},{i:20,c:21,v:[100,200],s:"HUM1000",ch:[{n:1,s:1},{n:1,s:1}]},{i:40,c:21,v:[100,200],s:"LCD1100",ch:[{n:1,s:80}]},{i:39,c:21,v:[100,200],s:"LED1000",ch:[{n:32,s:17}]},{i:33,c:21,v:[100,200],s:"LUX1000",ch:[{n:1,s:1}]},{i:51,c:21,v:[100,200],s:"MOT1100",ch:[{n:1,s:1}]},{i:51,c:21,v:[200,300],s:"MOT1100",ch:[{n:1,s:1}]},{i:52,c:21,v:[100,200],s:"MOT1101",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:17,c:21,v:[100,200],s:"PRE1000",ch:[{n:1,s:1}]},{i:49,c:21,v:[100,200],s:"RCC1000",ch:[{n:16,s:1}]},{i:57,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:58,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:59,c:21,v:[100,200],s:"VINTSERVO",ch:[{n:1,s:112}]},{i:60,c:21,v:[100,200],s:"VINTSERVO_S4309R",ch:[{n:1,s:1}]},{i:44,c:21,v:[100,200],s:"REL1000",ch:[{n:4,s:1}]},{i:26,c:21,v:[100,200],s:"REL1100",ch:[{n:4,s:16}]},{i:27,c:21,v:[100,200],s:"REL1101",ch:[{n:16,s:16}]},{i:38,c:21,v:[100,200],s:"SAF1000",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:35,c:21,v:[100,200],s:"SND1000",ch:[{n:1,s:1}]},{i:48,c:21,v:[100,200],s:"STC1000",ch:[{n:1,s:1}]},{i:69,c:21,v:[100,200],s:"STC1001",ch:[{n:1,s:1}]},{i:19,c:21,v:[100,200],s:"TMP1000",ch:[{n:1,s:1}]},{i:55,c:21,v:[100,200],s:"TMP1100",ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:21,c:21,v:[100,200],s:"TMP1101",ch:[{n:4,s:33},{n:1,s:1},{n:4,s:1}]},{i:16,c:21,v:[100,200],s:"TMP1200",ch:[{n:1,s:32},{n:1,s:1}]},{i:22,c:21,v:[100,200],s:"TMP1300",ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:53,c:21,v:[100,200],s:"VCP1000",ch:[{n:1,s:1}]},{i:31,c:21,v:[100,200],s:"VCP1001",ch:[{n:1,s:1}]},{i:30,c:21,v:[100,200],s:"VCP1002",ch:[{n:1,s:1}]},{i:4093,c:21,v:[100,200],s:"FIRMWARE_UPGRADE_STM32F0",ch:[{n:1,s:1}]},{i:4094,c:21,v:[100,200],s:"FIRMWARE_UPGRADE_STM8S",ch:[{n:1,s:1}]},{i:2457,c:21,v:[100,200],s:"GenericVINT",ch:[{n:4,s:1}]}],USB:[{i:33281,c:9,v:[0,101],s:"ifkit488",n:0,ch:[{n:4,s:64},{n:8,s:1},{n:8,s:1}]},{i:33025,c:16,v:[200,201],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[200,201],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[300,313],s:"1000",n:0,ch:[{n:1,s:1}]},{i:57,c:16,v:[313,400],s:"1000",n:0,ch:[{n:1,s:1}]},{i:33028,c:16,v:[200,201],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[200,201],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[300,313],s:"1001",n:0,ch:[{n:4,s:1}]},{i:56,c:16,v:[313,400],s:"1001",n:0,ch:[{n:4,s:1}]},{i:55,c:3,v:[100,200],s:"1002",n:0,ch:[{n:4,s:1}]},{i:113,c:1,v:[0,200],s:"1008",n:0,ch:[{n:1,s:1}]},{i:54,c:9,v:[0,200],s:"1011",n:0,ch:[{n:2,s:48},{n:2,s:64},{n:2,s:1},{n:2,s:1}]},{i:68,c:9,v:[0,601],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:68,c:9,v:[601,602],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:68,c:9,v:[602,700],s:"1012",n:0,ch:[{n:16,s:1},{n:16,s:1}]},{i:69,c:9,v:[0,821],s:"1013",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:69,c:9,v:[821,900],s:"1013/1018/1019",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:64,c:9,v:[0,704],s:"1014",n:0,ch:[{n:4,s:1}]},{i:64,c:9,v:[704,800],s:"1014",n:0,ch:[{n:4,s:1}]},{i:118,c:9,v:[0,9999],s:"1015",n:0,ch:[{n:1,s:1}]},{i:119,c:9,v:[0,9999],s:"1016",n:0,ch:[{n:1,s:1}]},{i:129,c:9,v:[0,9999],s:"1017",n:0,ch:[{n:8,s:1}]},{i:69,c:9,v:[900,1e3],s:"1010/1018/1019",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:48,c:15,v:[0,104],s:"1023",n:0,ch:[{n:1,s:1}]},{i:48,c:15,v:[104,200],s:"1023",n:0,ch:[{n:1,s:1}]},{i:49,c:15,v:[200,201],s:"1023",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:49,c:15,v:[201,300],s:"1023",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:52,c:15,v:[100,200],s:"1024",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:74,c:11,v:[100,300],s:"1030",n:0,ch:[{n:64,s:17}]},{i:76,c:11,v:[100,200],s:"1031",n:0,ch:[{n:64,s:17}]},{i:76,c:11,v:[200,300],s:"1032",n:0,ch:[{n:64,s:17}]},{i:121,c:7,v:[0,9999],s:"1040",n:0,ch:[{n:1,s:1}]},{i:127,c:17,v:[200,300],s:"1041",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[300,400],s:"1042",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:127,c:17,v:[300,400],s:"1043",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[400,500],s:"1044",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:60,c:19,v:[100,200],s:"1045",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:59,c:4,v:[100,102],s:"1046",n:0,ch:[{n:4,s:65}]},{i:59,c:4,v:[102,200],s:"1046",n:0,ch:[{n:4,s:65}]},{i:79,c:5,v:[100,200],s:"1047",n:0,ch:[{n:4,s:1},{n:4,s:1}]},{i:50,c:19,v:[100,200],s:"1048",n:0,ch:[{n:4,s:33},{n:1,s:1},{n:4,s:1}]},{i:127,c:17,v:[0,200],s:"1049",n:0,ch:[{n:1,s:1}]},{i:112,c:19,v:[0,200],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1}]},{i:112,c:19,v:[200,300],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:112,c:19,v:[300,400],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:112,c:19,v:[400,500],s:"1051",n:0,ch:[{n:1,s:33},{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[0,101],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[101,110],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:75,c:5,v:[110,300],s:"1052",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:113,c:1,v:[300,400],s:"1053",n:0,ch:[{n:1,s:1}]},{i:53,c:6,v:[0,200],s:"1054",n:0,ch:[{n:2,s:1}]},{i:77,c:10,v:[100,200],s:"1055",n:0,ch:[{n:1,s:1}]},{i:51,c:17,v:[0,200],s:"1056",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:51,c:17,v:[200,300],s:"1056",n:0,ch:[{n:1,s:1},{n:1,s:1},{n:1,s:1},{n:1,s:1}]},{i:128,c:5,v:[300,400],s:"1057",n:0,ch:[{n:1,s:1}]},{i:116,c:14,v:[100,200],s:"1058",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:126,c:1,v:[400,500],s:"1059",n:0,ch:[{n:1,s:1}]},{i:88,c:13,v:[100,200],s:"1060",n:0,ch:[{n:2,s:1},{n:4,s:1}]},{i:58,c:2,v:[100,200],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:58,c:2,v:[200,300],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:58,c:2,v:[300,400],s:"1061",n:0,ch:[{n:8,s:1},{n:8,s:1}]},{i:122,c:18,v:[100,200],s:"1062",n:0,ch:[{n:4,s:1}]},{i:123,c:18,v:[100,200],s:"1063",n:0,ch:[{n:1,s:1},{n:4,s:1},{n:1,s:1}]},{i:89,c:13,v:[100,200],s:"1064",n:0,ch:[{n:2,s:1},{n:2,s:1}]},{i:62,c:13,v:[100,200],s:"1065",n:0,ch:[{n:1,s:1},{n:2,s:1},{n:1,s:1},{n:2,s:48},{n:1,s:1},{n:2,s:64},{n:1,s:1}]},{i:130,c:2,v:[100,200],s:"1066",n:0,ch:[{n:1,s:1},{n:1,s:1}]},{i:123,c:18,v:[200,300],s:"1067",n:0,ch:[{n:1,s:1}]},{i:125,c:9,v:[0,120],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:9,v:[120,200],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:20,v:[0,200],s:"1202/1203",n:1,ch:[{n:1,s:81}]},{i:125,c:9,v:[200,300],s:"1202/1203",n:0,ch:[{n:8,s:48},{n:8,s:64},{n:8,s:1},{n:8,s:1}]},{i:125,c:20,v:[200,9999],s:"1202/1203",n:1,ch:[{n:1,s:81}]},{i:61,c:20,v:[0,9999],s:"1204",n:0,ch:[{n:2,s:81}]},{i:82,c:20,v:[0,9999],s:"1215/1216/1217/1218",n:0,ch:[{n:1,s:81}]},{i:83,c:20,v:[0,9999],s:"1219/1220/1221/1222",n:0,ch:[{n:1,s:81},{n:8,s:1},{n:8,s:1}]},{i:63,c:8,v:[100,200],s:"HUB0000",n:0,ch:[{n:1,s:1}]},{i:65,c:12,v:[100,200],s:"HUB0002",n:0,ch:[{n:1,s:1}]},{i:152,c:23,v:[0,9999],s:"FIRMWARE_UPGRADE_M3",n:0,ch:[{n:1,s:1}]},{i:153,c:22,v:[0,9999],s:"GenericDevice",n:0,ch:[{n:1,s:1}]},{i:154,c:9,v:[100,200],s:"USBSWITCH",n:0,ch:[{n:2,s:1},{n:2,s:1},{n:2,s:1},{n:2,s:1},{n:4,s:1},{n:4,s:1},{n:4,s:1},{n:4,s:1}]},{i:72,c:22,v:[0,0],s:"textled4x8",n:0,ch:[]},{i:73,c:22,v:[0,0],s:"textled1x8",n:0,ch:[]},{i:33280,c:22,v:[0,0],s:"ifkit288",n:0,ch:[]},{i:34048,c:22,v:[0,0],s:"power",n:0,ch:[]},{i:81,c:22,v:[0,0],s:"ifkit057",n:0,ch:[]},{i:96,c:22,v:[0,0],s:"ifkit3232",n:0,ch:[]},{i:114,c:22,v:[0,0],s:"1050",n:0,ch:[]}],MESH:[{i:1,c:8,v:[100,200],s:"HUB0001",ch:[{n:1,s:1}]}],SPI:[{i:1,c:8,v:[100,200],s:"HUB0004",ch:[{n:1,s:1}]},{i:2,c:23,v:[0,9999],s:"FIRMWARE_UPGRADE_M3",ch:[{n:1,s:1}]}],LIGHTNING:[{i:66,c:8,v:[100,200],s:"HUB0005",ch:[{n:1,s:1}]}],VIRTUAL:[{i:0,c:24,v:[100,200],s:"Dictionary",ch:[{n:1,s:1}]}]},yt=function(t,e){this.conn=t,this.type=e.type,this.phid=e.phid,this.parent=t.getDevice(e.parent),this.pphid=e.parent,this.vendorID=e.vendorID,this.productID=e.productID,this.deviceID=e.deviceID,this.serialNumber=e.serialNumber,this.label=e.label,this.version=e.version,this.interfaceNum=e.interfaceNum,this.index=e.index,this.hubPort=e.hubPort,this.isHubPort=0!==e.isHubPort,this.desc=e.desc,this.name=e.name,this.fwstr=e.fwstr,"VINT"===this.type&&(this.vintID=e.vintID),this.phiddev=C(e),this["class"]=this.phiddev.c,this.sku=this.phiddev.s};yt.prototype.toString=function(){return"DEV["+this.pphid+"/"+this.phid+"] "+this.name};var ft=function(t,e,n){this.listeners=[],this.conn=t,this.isopen=!1,this.isHubPort=e.isHubPort,this.parent=e,this.chid=n.chid,this.name=n.name,this.channelname=n.channelname,this.channelname.startsWith("Phidget")?this.cname=this.channelname.substring(7):this.cname=this.channelname,this["class"]=n["class"],this.uniqueIndex=n.uniqueIndex,this.index=n.index,this.cpversion=n.version,this.phidch=A(e,n),this.subclass=this.phidch.subcls};ft.prototype.match=function(t){return t["class"]===this["class"]&&((void 0==t._serialNumber||t._serialNumber===-1||t._serialNumber==this.parent.serialNumber)&&((void 0==t._channel||t._channel===-1||t._channel==this.index)&&((void 0==t._hubPort||t._hubPort===-1||t._hubPort==this.parent.hubPort)&&((void 0===t._isHubPort||t._isHubPort===this.isHubPort)&&((void 0===t._deviceLabel||null===t._deviceLabel||t._deviceLabel===this.parent.label)&&(e("matched:"+t+" -> "+this),!0))))))},ft.prototype.onDetach=function(){this.isopen&&(this.detaching=!0,this.userphid._close(this.userphid),delete this.userphid.channel,this.isopen=!1,delete this.userphid,delete this.detaching)},ft.prototype.closing=function(t){this.isopen&&this.userphid===t&&(this.userphid.isopen=!1,delete ch.userphid.channel,ch.isopen=!1,delete ch.userphid)},ft.prototype.open=function(t){var e=this;t.attaching=!0;var n=JSON.stringify({phid:this.parent.phid,channel:this.chid,"class":this["class"],index:this.uniqueIndex,version:this.cpversion});return new Promise(function(i,a){e.conn.sendRequest(0,0,0,m.Device,D.Open,n).then(function(n){t.attaching=!1,e.isopen=!0,e.userphid=t;var r=new gt(e.conn,null,n);try{r.deliver()}catch(o){return void a(o)}t.wasOpened(e),i()})["catch"](function(t){a(t)})})},ft.prototype.close=function(){if(this.detaching)return Promise.resolve();var t=JSON.stringify({phid:this.parent.phid,index:this.uniqueIndex});return this.conn.sendRequest(0,0,0,m.Device,D.Close,t)},ft.prototype.toString=function(){return"CH["+this.parent.phid+"/"+this.cname+"("+this.index+")] "+this.name};var Pt=function(t,e){var n=this;this.name="Phidget",this._isHubPort=!1,this.id=d++,this.attaching=!1,this.useropen=!1,this.isopen=!1,this.isattached=!1,this.detaching=!1,t&&(this.channel=t),e&&(this.device=e),t&&!e&&(this.device=t.parent),
e&&!t?this.isChannel=!1:this.isChannel=!0,this.manager=!1,(t||e)&&(this.manager=!0,this.isattached=!0),this.onAttach=function(t){},this.onDetach=function(t){},this.wasOpened=function(t){n.channel=t,n.device=t.parent,n.isopen=!0,n.isattached=!0,n.onopen(n)}};Pt.prototype.constructor=Pt,_.ANY_SERIAL_NUMBER=-1,_.ANY_HUB_PORT=-1,_.ANY_CHANNEL=-1,_.ANY_LABEL=null,_.INFINITE_TIMEOUT=0,_.DEFAULT_TIMEOUT=2500,Pt.prototype.openTimedOut=function(){this.onclose(w.TIMEOUT,"Open timed out"),this.close()},Pt.prototype._close=function(){if(this.isopen)var t=this.channel.close();return delete this.openTimeout,delete this.openTime,void 0==this.channel||this.channel.detaching?this.useropen=!0:this.id in u&&delete u[this.id],this.isopen?(_.detaching=!0,_.isattached=!1,this.onDetach(this),_.detaching=!1,this.isopen=!1,delete this.channel,delete this.device):this.onclose(w.CLOSED,"Closed while waiting for open"),"undefined"!=typeof t?t:Promise.resolve()},Pt.prototype.handleSetStatus=function(t,e){"data"in this||(this.data={});for(var n in t.entries)this.data[n]=t.entries[n].v;if(this.data._class_version_!==e)throw new dt(w.BAD_VERSION,this.name+" version ("+this.data._class_version_+") does not match ("+e+")")},Pt.prototype.checkAttached=function(){if(!this.isattached&&!this.detaching)throw new dt(w.NOT_ATTACHED)},Pt.prototype.checkOpen=function(){if(!this.isopen)throw new dt(w.NOT_ATTACHED)},Pt.prototype.checkIsChannel=function(){if(!this.isChannel)throw new dt(w.UNSUPPORTED)},Pt.prototype.getKey=function(){return this.checkAttached(),this.isChannel?"ch"+this.channel.chid:"dev"+this.device.phid},Pt.prototype.open=function(e){var n=this;if(this.useropen)return Promise.resolve(this);if(!this.isChannel)return Promise.reject(new dt(w.UNSUPPORTED));if(this.manager===!0&&(this.setChannel(this.getChannel()),this.setHubPort(this.getHubPort()),this.setDeviceSerialNumber(this.getDeviceSerialNumber()),this.setIsHubPortDevice(this.getIsHubPortDevice()),this.manager=!1),e){var i=parseInt(e);isNaN(i)||(this.openTimeout=i)}return u[this.id]=this,this.useropen=!0,this.openTime=t(),f(this),new Promise(function(t,e){n.onopen=function(){n.onAttach(n),t(n)},n.onclose=function(t,n){e(new dt(t,n))}})},Pt.prototype.close=function(){return e("closing phidget"),this.useropen=!1,this._close()},Pt.prototype.getAttached=function(){return this.isattached},Pt.prototype.getChannel=function(){return this.checkIsChannel(),this.isattached||this.detaching?this.channel.index:this._channel},Pt.prototype.setChannel=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._channel=t)},Pt.prototype.getChannelClass=function(){return this.checkIsChannel(),this.checkAttached(),this.channel["class"]},Pt.prototype.getChannelClassName=function(){return this.checkIsChannel(),this.checkAttached(),Et[this.channel["class"]]},Pt.prototype.getChannelName=function(){return this.checkIsChannel(),this.checkAttached(),this.channel.name},Pt.prototype.getChannelSubclass=function(){return this.checkIsChannel(),this.checkAttached(),this.channel.subclass},Pt.prototype.getDeviceClass=function(){return this.checkAttached(),this.device["class"]},Pt.prototype.getDeviceClassName=function(){return this.checkAttached(),Tt[this.device["class"]]},Pt.prototype.getDeviceID=function(){return this.checkAttached(),this.device.deviceID},Pt.prototype.getDeviceLabel=function(){return this.isattached||this.detaching?this.device.label:(this.checkIsChannel(),this._deviceLabel?this._deviceLabel:"")},Pt.prototype.setDeviceLabel=function(t){this.checkIsChannel(),this._deviceLabel=t},Pt.prototype.getDeviceName=function(){return this.checkAttached(),this.device.name},Pt.prototype.getDeviceSerialNumber=function(){return this.isattached||this.detaching?this.device.serialNumber:(this.checkIsChannel(),this._serialNumber)},Pt.prototype.setDeviceSerialNumber=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._serialNumber=t)},Pt.prototype.getDeviceSKU=function(){return this.checkAttached(),this.device.sku},Pt.prototype.getDeviceVersion=function(){return this.checkAttached(),this.device.version},Pt.prototype.getHub=function(){this.checkAttached();for(var t=this.device;void 0!==t&&t["class"]!==U.HUB;)t=t.parent;if(t)return new Pt(null,t)},Pt.prototype.getHubPort=function(){return this.isattached||this.detaching?this.device.hubPort:(this.checkIsChannel(),this._hubPort)},Pt.prototype.setHubPort=function(t){this.checkIsChannel(),t=parseInt(t),isNaN(t)||(this._hubPort=t)},Pt.prototype.getIsChannel=function(){return this.isChannel},Pt.prototype.getIsHubPortDevice=function(){return this.isattached||this.detaching?this.device.isHubPort:(this.checkIsChannel(),this._isHubPort)},Pt.prototype.setIsHubPortDevice=function(t){this.checkIsChannel(),this._isHubPort=!!t},Pt.prototype.getParent=function(){if(this.checkAttached(),this.isChannel)var t=this.channel.parent;else var t=this.device.parent;if(t)return new Pt(null,t)},Pt.prototype.getDeviceDeviceVINTID=function(){return this.checkAttached(),this.device.vintID},Pt.prototype.getDeviceFirmwareUpgradeString=function(){switch(this.checkAttached(),this.device.type){case"USB":case"SPI":return this.device.fwstr;case"VINT":case"MESH":case"LIGHTNING":case"VIRTUAL":return this.device.sku}},Pt.prototype.writeDeviceLabel=function(t){this.checkIsChannel(),this.checkAttached();var e=this;if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.send(this.channel,lt.BP_WRITELABEL).then(function(n){return e.device.label=t,n})},Pt.prototype.toString=function(){return this.name},_.Phidget=Pt;var Ct=function(t){this.isopen=!1,this.id=g++,l[this.id]=this,this.onDeviceAttach=function(t){},this.onDeviceDetach=function(t){},this.onAttach=function(t){},this.onDetach=function(t){},t&&("onDeviceAttach"in t&&"function"==typeof t.onDeviceAttach&&(this.onDeviceAttach=t.onDeviceAttach),"onDeviceDetach"in t&&"function"==typeof t.onDeviceDetach&&(this.onDeviceDetach=t.onDeviceDetach),"onAttach"in t&&"function"==typeof t.onAttach&&(this.onAttach=t.onAttach),"onDetach"in t&&"function"==typeof t.onDetach&&(this.onDetach=t.onDetach))};Ct.prototype["delete"]=function(){delete l[this.id]},Ct.prototype.open=function(){if(!this.isopen){for(var t in c){t=c[t];for(var e in t.Devices){e=t.Devices[e];var n=new Pt(null,e);this.onDeviceAttach(n)}for(var i in t.Channels){i=t.Channels[i];var a=y(i["class"]),n=new a(i);this.onAttach(n)}}this.isopen=!0}},Ct.prototype.close=function(){this.isopen=!1},_.Manager=Ct;var At=function(t){this.onmessage(t.data)},_t=function(t){var e=16,n=t.length,i=t;if(this.sockdatalen>0){var a=[this.sockdata,i];i=Buffer.concat(a,this.sockdata.length+i.length),this.sockdata=null,this.sockdatalen=0,n=i.length}if(n>=e)do{var r=new B(i);if(n===r.len+e)return void this.onmessage(i,r);if(n<r.len+e)break;var o=i.slice(0,r.len+e);i=i.slice(r.len+e),n-=o.length,this.onmessage(o,r)}while(n>=e);n>0&&(this.sockdata=i,this.sockdatalen=i.length)},St=function(n,o,s){if(void 0!==n&&null!==n&&"object"==typeof n)var h=n;if(void 0!==n&&null!==n&&"string"==typeof n){if(this.uri=n,a){var u=r.parse(this.uri);if("ws:"===u.protocol)throw'websocket not supported with node.js, use "phid://server:port"';if("phid:"!==u.protocol)throw'expected phidget protocol, use "phid://server:port"';this.hostname=u.hostname,this.port=u.port}else this.hostname="uri",this.port="uri";if(void 0!==o&&null!==o&&"object"==typeof o)var h=o}if(void 0!==n&&null!==n&&"number"==typeof n&&(this.port=n,void 0!==o&&null!==o&&"string"==typeof o&&(this.hostname=o,void 0!==s&&null!==s&&"object"==typeof s)))var h=s;this.id=p++,c[this.id]=this,this.generation=0,this.TIMEOUT=5e3,this.connected=!1,this.stayopen=!1,this.websocket=!1,this.ws=null,this.sock=null,this.sockdata=null,this.sockdatalen=0,this.nonceC=null,this.passwd="",this.Channels={},this.Devices={},this.DeviceList=[],this.reqseq=10,this.requests={},this.oChannel=null,this.cChannel=null,this.onError=function(t,e){console.error("Connection error: "+e+":0x"+t.toString(16))},this.onAuthenticationNeeded=function(){console.log("A password is required for this server. Handle the onAuthenticationNeeded event to return a password.")},this.onConnect=function(){},this.onDisconnect=function(){},void 0!==h&&(h.hostname&&void 0===this.hostname&&(this.hostname=h.hostname),h.port&&void 0===this.port&&("number"==typeof h.port&&(this.port=h.port),"string"==typeof h.port&&(this.port=Number(h.port))),h.name&&(this.name=h.name),h.onConnect&&"function"==typeof h.onConnect&&(this.onConnect=h.onConnect),h.onDisconnect&&"function"==typeof h.onDisconnect&&(this.onDisconnect=h.onDisconnect),h.onAuthenticationNeeded&&"function"==typeof h.onAuthenticationNeeded&&(this.onAuthenticationNeeded=h.onAuthenticationNeeded),h.onError&&"function"==typeof h.onError&&(this.onError=h.onError),h.passwd&&(this.passwd=h.passwd)),void 0===this.hostname&&(this.hostname="localhost"),void 0===this.port&&(this.port=a?5661:8989),void 0===this.uri&&(a?this.uri="phid://"+this.hostname+":"+this.port:this.uri="ws://"+this.hostname+":"+this.port+"/phidgets"),void 0===this.name&&(this.name=this.uri),this.onattach=function(t){var e=new Pt(null,t);for(var n in l)l[n].isopen&&l[n].onDeviceAttach(e)},this.ondetach=function(t){var e=new Pt(null,t);for(var n in l)l[n].isopen&&l[n].onDeviceDetach(e)},this.onchannelattach=function(t){var e=y(t["class"]),n=new e(t);for(var i in l)l[i].isopen&&l[i].onAttach(n);P(t)},this.onchanneldetach=function(t){var e=new y(t["class"]),n=new e(t);for(var i in l)l[i].isopen&&l[i].onDetach(n);t.onDetach()},this.matchPhidget=function(t){for(var e in this.Channels)if(this.Channels[e].match(t))return this.Channels[e].open(t)["catch"](function(t){this.onError?this.onError(t.errorCode,t.message):console.error(t)}.bind(t)),!0;return!1},this.onevent=function(t){e("event:"+t)},this.onmessage=function(t,e){var n=new Uint8Array(t);if(e||(e=new B(n)),e.len>0){if(a)var r=t.slice(e.hdrlen);else var r=new Uint8Array(n.buffer,e.hdrlen,e.len);var o=i(r);t=JSON.parse(o)}this.connected?this.ondatamessage(t,e):this.onauthmessage(t,e)},this.checkRequests=function(){for(var e in this.requests)if(this.requests[e].generation==this.generation){var n=this.requests[e];if(t()-n.time>this.TIMEOUT)try{n.onTimeout()}catch(i){console.error(i)}finally{delete this.requests[e]}}else delete this.requests[e]},this._xid=setInterval(this.checkRequests.bind(this),2e3),_.onConnectionAdded&&_.onConnectionAdded(this)};St.prototype.setKeepAlive=function(t){var e=parseInt(t);if(isNaN(e))throw new Exception("invalid keep alive:"+t);this.TIMEOUT=e},St.prototype["delete"]=function(){if(this.connected)throw new dt(w.BUSY,"close connection before deleting");_.onConnectionRemoved&&_.onConnectionRemoved(this),delete c[this.id]},St.prototype.getChannel=function(t){if(void 0===this.Channels[t])throw new dt(w.UNEXPECTED,"invalid channel id:"+t);return this.Channels[t]},St.prototype.getDevice=function(t){return this.Devices[t]?this.Devices[t]:null},St.prototype.close=function(){this.stayopen=!1,this.closesocket()},St.prototype.closesocket=function(){if(this.connected===!0&&this.onDisconnect(),this.connected=!1,void 0!=this.ws)try{this.ws.close()}catch(t){}else if(void 0!=this.sock)try{this.sock.destroy(),this.sock.unref()}catch(t){}this.ws=void 0,this.sock=void 0,this.generation++},St.prototype.send=function(t,e){var n=this,i=!1;return new Promise(function(a,r){try{if(n.websocket)n.ws&&n.ws.readyState==WebSocket.OPEN||r(new dt(w.UNEXPECTED,"invalid websocket state")),n.ws.send(t),e.length>0&&n.ws.send(e);else{n.sock||r(new dt(w.UNEXPECTED,"invalid socket"));for(var o=new Buffer(t.byteLength),s=0;s<t.length;s++)o[s]=t[s];n.sock.write(o),e.length>0&&n.sock.write(e)}}catch(h){i=!0,r(new dt(w.UNEXPECTED,h.message))}finally{i||a()}})},St.prototype.getNextRequestSequence=function(){return this.reqseq>=65535&&(this.reqseq=10),this.reqseq++,this.reqseq},St.prototype.sendRequest=function(e,i,a,r,o,s){var h=this;return 0===i&&(i=this.getNextRequestSequence()),new Promise(function(c,p){if(h.requests[i]={generation:h.generation,time:t(),onReply:function(t){void 0!==t.E?0!==t.E?p(new dt(t.E)):c(t.R):c(t)},onTimeout:function(){p(new dt(w.TIMEOUT))},onError:function(t,e){p(new dt(t,e))}},h.websocket){var u=n(s),d=new B(u.length,e,i,a,r,o);h.send(d.buffer,u)["catch"](function(t){p(t)})}else{var d=new B(s.length,e,i,a,r,o);h.send(d.buffer,s)["catch"](function(t){p(t)})}})},St.prototype.sendReply=function(t,e,i,a){var r=2,o=this.getNextRequestSequence();if(this.websocket){var s=n(a),h=new B(s.length,r,o,t,e,i);return this.send(h.buffer,s)}var h=new B(a.length,r,o,t,e,i);return this.send(h.buffer,a)},St.prototype.maintainConnection=function(){this.connected=!0,this.stayopen=!0,void 0===this.connectionMaintainer&&(this.connectionMaintainer=setInterval(function(){var t=this;this.connected!==!0&&this.stayopen===!0&&this.connect()["catch"](function(e){t.onError(e.errorCode,e.message)})}.bind(this),4e3))},St.prototype.connect=function(){if(this.connected===!0)return Promise.resolve(this);var t=this;return new Promise(function(e,n){function i(){r=!0,t.handshake().then(function(){t.maintainConnection(),e()})["catch"](function(t){n(t)})}var r=!1;try{if(a){if(t.sock){try{t.sock.close()}catch(s){}delete t.sock}t.sock=new o.Socket,t.sock.on("data",_t.bind(t)),t.sock.on("close",t.doclose.bind(t)),t.sock.on("error",function(t){var e;switch(t.code){case"ECONNRESET":e=new dt(w.CONNECTION_RESET,t.message);break;case"ECONNREFUSED":e=new dt(w.CONNECTION_REFUSED,t.message);break;default:e=new dt(w.UNEXPECTED,t.message)}this.doclose(),r?this.onError(e.errorCode,e.message):n(e)}.bind(t)),t.sock.on("connect",i.bind(t)),t.sock.connect({host:t.hostname,port:t.port})}else{if(t.ws){try{t.ws.close()}catch(s){}delete t.ws}t.websocket=!0,t.ws=new WebSocket(t.uri),t.ws.onopen=i.bind(t),t.ws.onclose=t.doclose.bind(t),t.ws.onmessage=At.bind(t),t.ws.onerror=function(e){this.onError(w.CONNECTION_REFUSED,"websocket error - check that server is available"),t.doclose()}.bind(t),t.ws.binaryType="arraybuffer"}}catch(s){n(new dt(w.UNEXPECTED,s.message))}})},St.prototype.doclose=function(){for(;this.DeviceList.length>0;)this.deviceDetach(this.DeviceList[this.DeviceList.length-1]);this.closesocket()},St.prototype.onauthmessage=function(t,e){void 0===this.authdata?console.error("packet recieved while not connected and authdata is not defined"):this.authdata(t)},St.prototype.ondatamessage=function(t,e){var n=this.requests[e.repseq];if(n&&(delete this.requests[e.repseq],n.onReply(t)),e.flags&k.Reply)return void(void 0===n&&this.onError(w.UNEXPECTED,"No handler registered for reply: "+e));switch(e.type){case m.Command:var i=this.handleCommand(e,t);break;case m.Device:var i=this.handleDevice(e,t);break;case m.Channel:var i=this.handleChannel(e,t);break;default:var i=v(w.INVALID,"Unknown request type:"+e.type)}if(i){var a=this;i["catch"](function(t){a.onError(t.errorCode,t.message)})}},St.prototype.handleCommand=function(t,e){switch(t.stype){case D.KeepAlive:return this.sendReply(t.reqseq,m.Command,D.KeepAlive,[]);default:return v(w.UNEXPECTED,"Unknown command subrequest:"+t.stype)}},St.prototype.handleDevice=function(t,e){switch(t.stype){case D.Attach:return this.handleDeviceAttach(t,e);case D.Detach:return this.handleDeviceDetach(t,e);case D.BridgePkt:return this.handleBridgePacket(t,e);case D.Channel:return this.handleChannel(t,e);default:return v(w.UNEXPECTED,"Unknown device subrequest:"+t.stype)}},St.prototype.handleDeviceAttach=function(t,e){var n=new yt(this,e);return n.phid in this.Devices?v(w.DUPLICATE,"duplicate device:"+n):(this.Devices[n.phid]=n,this.DeviceList.push(n),this.onattach(n),Promise.resolve())},St.prototype.handleDeviceDetach=function(t,e){var n;return n=this.getDevice(e.phid),n!==-1&&this.deviceDetach(n),Promise.resolve()},St.prototype.deviceDetach=function(t){if(!(t.phid in this.Devices))return v(w.NO_SUCH_ENTITY,"no such device:"+t);for(var e in this.Channels)this.Channels[e].parent===t&&(this.onchanneldetach(this.Channels[e]),delete this.Channels[e]);return this.ondetach(t),delete this.Devices[t.phid],this.DeviceList.splice(this.DeviceList.indexOf(t),1),Promise.resolve()},St.prototype.handleChannel=function(t,e){var n,i;return n=this.getDevice(e.parent),null===n?v(w.UNEXPECTED,"missing channel parent"):(i=new ft(this,n,e),this.Channels[i.chid]=i,this.onchannelattach(i),Promise.resolve())},St.prototype.handleBridgePacket=function(t,e){var n=new gt(this,t,e);return n.deliver()},St.prototype.handshake=function(){var t=this;return new Promise(function(e,n){function i(){var e=JSON.stringify({name:S,type:I,pmajor:O,pminor:N}),i=new B(e.length,0,0,0,m.Connect,D.HandShakeC0);t.send(i.buffer,e)["catch"](function(t){n(t)})}function a(t){if(0!==t.result)return void n(new dt(t.result,"server rejected handshake"));this.nonceC=E(16);var i=JSON.stringify({ident:R,nonceC:this.nonceC}),a=new B(i.length,0,0,0,m.Connect,D.AuthC0);this.send(a.buffer,i)["catch"](function(t){n(t)}),this.authdata=function(t){if(0!==t.result)return void n(new dt(t.result,"authentication failed"));if(this.nonceC!=t.nonceC)return void n(new dt(w.UNEXPECTED,"Authentication Failure: nonce do not match ("+this.nonceC+") vs ("+t.nonceC+")"));var i=R+this.passwd+this.nonceC+t.nonceS+t.salt,r=this.hash(i),o=JSON.stringify({nonceC:this.nonceC,nonceS:t.nonceS,proof:r});a=new B(o.length,0,0,0,m.Connect,D.AuthC1),this.send(a.buffer,o)["catch"](function(t){n(t)}),this.authdata=function(t){if(0!=t.E){if(this.onAuthenticationNeeded){var i=this.onAuthenticationNeeded();if(void 0!==i&&"string"==typeof i)return this.passwd=i,delete this.authdata,void setTimeout(function(){this.connect().then(function(){e()})["catch"](function(t){n(t)})}.bind(this),100)}return void n(new dt(t.E,"authentication failed: server rejected proof"))}this.connected=!0,delete this.authdata,this.onConnect(),e()}}}t.authdata=a,i()})},St.prototype.hash=function(t){if(a){var e=s.createHash("sha256");return e.update(t),e.digest("base64")}for(var n=Sha256.hash(t),i="",r=0;r<n.length;r+=2){var o=parseInt(n.substring(r,r+2),16);i+=String.fromCharCode(o)}return window.btoa(i)},_.Connection=St;var It=function(){Pt.apply(this,arguments),this.name="Accelerometer",this["class"]=b.ACCELEROMETER,this.onAccelerationChange=function(t,e){},this.onError=function(t,e){}};It.prototype=Object.create(Pt.prototype),It.prototype.constructor=It,_.Accelerometer=It,It.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},It.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},It.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_ACCELERATIONCHANGE:this.handleAccelerationChangeEvent(t)}return!0},It.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETCHANGETRIGGER:return this.data.accelerationChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("AccelerationChangeTrigger"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},It.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},It.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},It.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},It.prototype.getAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.accelerationChangeTrigger},It.prototype.setAccelerationChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.accelerationChangeTrigger=t})},It.prototype.getMinAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.minAccelerationChangeTrigger},It.prototype.getMaxAccelerationChangeTrigger=function(){return this.checkOpen(),this.data.maxAccelerationChangeTrigger},It.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},It.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},It.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},It.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},It.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},It.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},It.prototype.handleAccelerationChangeEvent=function(t){this.data.acceleration=t.get("0"),this.data.timestamp=t.get("1"),this.onAccelerationChange(this.data.acceleration,this.data.timestamp)};var Ot=function(){Pt.apply(this,arguments),this.name="BLDCMotor",this["class"]=b.BLDC_MOTOR,this.onBrakingStrengthChange=function(t){},this.onPositionChange=function(t){},this.onVelocityUpdate=function(t){},this.onError=function(t,e){}};Ot.prototype=Object.create(Pt.prototype),Ot.prototype.constructor=Ot,_.BLDCMotor=Ot,Ot.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ot.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ot.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_BRAKINGSTRENGTHCHANGE:this.handleBrakingStrengthChangeEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case lt.BP_DUTYCYCLECHANGE:this.handleVelocityUpdateEvent(t)}return!0},Ot.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETSTALLVELOCITY:return this.data.stallVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("StallVelocity"),!0;case lt.BP_SETBRAKINGDUTYCYCLE:return this.data.targetBrakingStrength=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetBrakingStrength"),!0;case lt.BP_SETDUTYCYCLE:return this.data.targetVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetVelocity"),!0}},Ot.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Ot.prototype.setAcceleration=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Ot.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Ot.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Ot.prototype.getBrakingStrength=function(){return this.checkOpen(),this.data.brakingStrength},Ot.prototype.getMinBrakingStrength=function(){return this.checkOpen(),this.data.minBrakingStrength},Ot.prototype.getMaxBrakingStrength=function(){return this.checkOpen(),this.data.maxBrakingStrength},Ot.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Ot.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Ot.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Ot.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Ot.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Ot.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},Ot.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},Ot.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},Ot.prototype.getStallVelocity=function(){return this.checkOpen(),this.data.stallVelocity},Ot.prototype.setStallVelocity=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETSTALLVELOCITY).then(function(e){n.data.stallVelocity=t})},Ot.prototype.getMinStallVelocity=function(){return this.checkOpen(),this.data.minStallVelocity},Ot.prototype.getMaxStallVelocity=function(){return this.checkOpen(),this.data.maxStallVelocity},Ot.prototype.getTargetBrakingStrength=function(){return this.checkOpen(),this.data.targetBrakingStrength},Ot.prototype.setTargetBrakingStrength=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETBRAKINGDUTYCYCLE).then(function(e){n.data.targetBrakingStrength=t})},Ot.prototype.getTargetVelocity=function(){return this.checkOpen(),this.data.targetVelocity},Ot.prototype.setTargetVelocity=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETDUTYCYCLE).then(function(e){n.data.targetVelocity=t})},Ot.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},Ot.prototype.getMinVelocity=function(){return this.checkOpen(),this.data.minVelocity},Ot.prototype.getMaxVelocity=function(){return this.checkOpen(),this.data.maxVelocity},Ot.prototype.handleBrakingStrengthChangeEvent=function(t){this.data.brakingStrength=t.get("0"),this.onBrakingStrengthChange(this.data.brakingStrength)},Ot.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},Ot.prototype.handleVelocityUpdateEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityUpdate(this.data.velocity)},Ot.prototype.getPosition=function(){return this.data.position},Ot.prototype.getMinPosition=function(){return this.data.minPosition},Ot.prototype.getMaxPosition=function(){return this.data.maxPosition},Ot.prototype.addPositionOffset=function(t){},Ot.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},Ot.prototype.getStallVelocity=function(){return this.data.stallVelocity},Ot.prototype.setStallVelocity=function(t){e.set({name:"stallVelocity",type:"g",value:t});var e=new gt(this.channel.conn);e.send(this.channel,lt.BP_SETSTALLVELOCITY,function(){this.data.stallVelocity=t,"function"==typeof this.setStallVelocitySuccess&&this.setStallVelocitySuccess(t)}.bind(this))},Ot.prototype.getMinStallVelocity=function(){return this.data.minStallVelocity},Ot.prototype.getMaxStallVelocity=function(){return this.data.maxStallVelocity};var Nt=function(){Pt.apply(this,arguments),this.name="CapacitiveTouch",this["class"]=b.CAPACITIVE_TOUCH,this.onTouch=function(t){},this.onTouchEnd=function(){},this.onError=function(t,e){}};Nt.prototype=Object.create(Pt.prototype),Nt.prototype.constructor=Nt,_.CapacitiveTouch=Nt,Nt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Nt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Nt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_TOUCHINPUTVALUECHANGE:this.handleTouchEvent(t);break;case lt.BP_TOUCHINPUTEND:this.handleTouchEndEvent(t)}return!0},Nt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETSENSITIVITY:return this.data.sensitivity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Sensitivity"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.touchValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TouchValueChangeTrigger"),!0}},Nt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Nt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Nt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Nt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Nt.prototype.getIsTouched=function(){return this.checkOpen(),!!this.data.isTouched},Nt.prototype.getSensitivity=function(){return this.checkOpen(),this.data.sensitivity},Nt.prototype.setSensitivity=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETSENSITIVITY).then(function(e){n.data.sensitivity=t})},Nt.prototype.getMinSensitivity=function(){return this.checkOpen(),this.data.minSensitivity},Nt.prototype.getMaxSensitivity=function(){return this.checkOpen(),this.data.maxSensitivity},Nt.prototype.getTouchValue=function(){return this.checkOpen(),this.data.touchValue},Nt.prototype.getMinTouchValue=function(){return this.checkOpen(),this.data.minTouchValue},Nt.prototype.getMaxTouchValue=function(){return this.checkOpen(),this.data.maxTouchValue},Nt.prototype.getTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.touchValueChangeTrigger},Nt.prototype.setTouchValueChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.touchValueChangeTrigger=t})},Nt.prototype.getMinTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.minTouchValueChangeTrigger},Nt.prototype.getMaxTouchValueChangeTrigger=function(){return this.checkOpen(),this.data.maxTouchValueChangeTrigger},Nt.prototype.handleTouchEvent=function(t){this.data.touchValue=t.get("0"),this.onTouch(this.data.touchValue)},Nt.prototype.handleTouchEndEvent=function(t){this.onTouchEnd()};var Rt=function(){Pt.apply(this,arguments),this.name="CurrentInput",this["class"]=b.CURRENT_INPUT,this.onCurrentChange=function(t){},this.onError=function(t,e){}};Rt.prototype=Object.create(Pt.prototype),Rt.prototype.constructor=Rt,_.CurrentInput=Rt,Rt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Rt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Rt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_CURRENTCHANGE:this.handleCurrentChangeEvent(t)}return!0},Rt.prototype._bridgeInput=function(t){
switch(t.vpkt){default:return!1;case lt.BP_SETCHANGETRIGGER:return this.data.currentChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentChangeTrigger"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},Rt.prototype.getCurrent=function(){return this.checkOpen(),this.data.current},Rt.prototype.getMinCurrent=function(){return this.checkOpen(),this.data.minCurrent},Rt.prototype.getMaxCurrent=function(){return this.checkOpen(),this.data.maxCurrent},Rt.prototype.getCurrentChangeTrigger=function(){return this.checkOpen(),this.data.currentChangeTrigger},Rt.prototype.setCurrentChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.currentChangeTrigger=t})},Rt.prototype.getMinCurrentChangeTrigger=function(){return this.checkOpen(),this.data.minCurrentChangeTrigger},Rt.prototype.getMaxCurrentChangeTrigger=function(){return this.checkOpen(),this.data.maxCurrentChangeTrigger},Rt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Rt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Rt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Rt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Rt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},Rt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},Rt.prototype.handleCurrentChangeEvent=function(t){this.data.current=t.get("0"),this.onCurrentChange(this.data.current)};var mt=function(){Pt.apply(this,arguments),this.name="DCMotor",this["class"]=b.DC_MOTOR,this.onBrakingStrengthChange=function(t){},this.onVelocityUpdate=function(t){},this.onBackEMFChange=function(t){},this.onError=function(t,e){}};mt.prototype=Object.create(Pt.prototype),mt.prototype.constructor=mt,_.DCMotor=mt,mt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},mt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},mt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_BACKEMFCHANGE:this.handleBackEMFChangeEvent(t);break;case lt.BP_BRAKINGSTRENGTHCHANGE:this.handleBrakingStrengthChangeEvent(t);break;case lt.BP_DUTYCYCLECHANGE:this.handleVelocityUpdateEvent(t)}return!0},mt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case lt.BP_SETBACKEMFSENSINGSTATE:return this.data.backEMFSensingState=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BackEMFSensingState"),!0;case lt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case lt.BP_SETCURRENTREGULATORGAIN:return this.data.currentRegulatorGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentRegulatorGain"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case lt.BP_SETBRAKINGDUTYCYCLE:return this.data.targetBrakingStrength=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetBrakingStrength"),!0;case lt.BP_SETDUTYCYCLE:return this.data.targetVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetVelocity"),!0}},mt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},mt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},mt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},mt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},mt.prototype.getBackEMF=function(){return this.checkOpen(),this.data.backEMF},mt.prototype.getBackEMFSensingState=function(){return this.checkOpen(),!!this.data.backEMFSensingState},mt.prototype.setBackEMFSensingState=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETBACKEMFSENSINGSTATE).then(function(e){n.data.backEMFSensingState=t})},mt.prototype.getBrakingStrength=function(){return this.checkOpen(),this.data.brakingStrength},mt.prototype.getMinBrakingStrength=function(){return this.checkOpen(),this.data.minBrakingStrength},mt.prototype.getMaxBrakingStrength=function(){return this.checkOpen(),this.data.maxBrakingStrength},mt.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},mt.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},mt.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},mt.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},mt.prototype.getCurrentRegulatorGain=function(){return this.checkOpen(),this.data.currentRegulatorGain},mt.prototype.setCurrentRegulatorGain=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURRENTREGULATORGAIN).then(function(e){n.data.currentRegulatorGain=t})},mt.prototype.getMinCurrentRegulatorGain=function(){return this.checkOpen(),this.data.minCurrentRegulatorGain},mt.prototype.getMaxCurrentRegulatorGain=function(){return this.checkOpen(),this.data.maxCurrentRegulatorGain},mt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},mt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},mt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},mt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},mt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},mt.prototype.setFanMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},mt.prototype.getTargetBrakingStrength=function(){return this.checkOpen(),this.data.targetBrakingStrength},mt.prototype.setTargetBrakingStrength=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETBRAKINGDUTYCYCLE).then(function(e){n.data.targetBrakingStrength=t})},mt.prototype.getTargetVelocity=function(){return this.checkOpen(),this.data.targetVelocity},mt.prototype.setTargetVelocity=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETDUTYCYCLE).then(function(e){n.data.targetVelocity=t})},mt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},mt.prototype.getMinVelocity=function(){return this.checkOpen(),this.data.minVelocity},mt.prototype.getMaxVelocity=function(){return this.checkOpen(),this.data.maxVelocity},mt.prototype.handleBackEMFChangeEvent=function(t){this.data.backEMF=t.get("0"),this.onBackEMFChange(this.data.backEMF)},mt.prototype.handleBrakingStrengthChangeEvent=function(t){this.data.brakingStrength=t.get("0"),this.onBrakingStrengthChange(this.data.brakingStrength)},mt.prototype.handleVelocityUpdateEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityUpdate(this.data.velocity)};var Dt=function(){Pt.apply(this,arguments),this.name="Dictionary",this["class"]=b.DICTIONARY,this.onAdd=function(t,e){},this.onUpdate=function(t,e){},this.onRemove=function(t){},this.onError=function(t,e){}};Dt.prototype=Object.create(Pt.prototype),Dt.prototype.constructor=Dt,_.Dictionary=Dt,Dt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Dt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Dt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_DICTIONARYADDED:this.handleAddEvent(t);break;case lt.BP_DICTIONARYREMOVED:this.handleRemoveEvent(t);break;case lt.BP_DICTIONARYUPDATED:this.handleUpdateEvent(t)}return!0},Dt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Dt.prototype.add=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,lt.BP_DICTIONARYADD)},Dt.prototype.removeAll=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_DICTIONARYREMOVEALL)},Dt.prototype.get=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.set({name:"1",type:"s",value:value}),e.set({name:"2",type:"d",value:valueLen}),e.send(this.channel,lt.BP_DICTIONARYGET)},Dt.prototype.remove=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.send(this.channel,lt.BP_DICTIONARYREMOVE)},Dt.prototype.scan=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"s",value:t}),e.set({name:"1",type:"s",value:keyList}),e.set({name:"2",type:"d",value:keyListLen}),e.send(this.channel,lt.BP_DICTIONARYSCAN)},Dt.prototype.set=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,lt.BP_DICTIONARYSET)},Dt.prototype.update=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"s",value:e}),n.send(this.channel,lt.BP_DICTIONARYUPDATE)},Dt.prototype.handleAddEvent=function(t){var e=t.get("0"),n=t.get("1");this.onAdd(e,n)},Dt.prototype.handleRemoveEvent=function(t){var e=t.get("0");this.onRemove(e)},Dt.prototype.handleUpdateEvent=function(t){var e=t.get("0"),n=t.get("1");this.onUpdate(e,n)},Dt.prototype.get=function(t,e){var n=this;return new Promise(function(i,a){var r=new gt(n.channel.conn);r.set({name:"key",type:"s",value:t}),r.send(n.channel,lt.BP_DICTIONARYGET).then(function(t){i(t)})["catch"](function(n){void 0!==e?i(e,t):a(n)})})},Dt.prototype.scan=function(t){var e=this,n=new gt(this.channel.conn);return n.set({name:"startKey",type:"s",value:t}),n.send(e.channel,lt.BP_DICTIONARYSCAN).then(function(t){return 0==t.length?[]:t.trim().split("\n")})};var kt=function(){Pt.apply(this,arguments),this.name="DigitalInput",this["class"]=b.DIGITAL_INPUT,this.onStateChange=function(t){},this.onError=function(t,e){}};kt.prototype=Object.create(Pt.prototype),kt.prototype.constructor=kt,_.DigitalInput=kt,kt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},kt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},kt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_STATECHANGE:this.handleStateChangeEvent(t)}return!0},kt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETINPUTMODE:return this.data.inputMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("InputMode"),!0;case lt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},kt.prototype.getInputMode=function(){return this.checkOpen(),this.data.inputMode},kt.prototype.setInputMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETINPUTMODE).then(function(e){n.data.inputMode=t})},kt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},kt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},kt.prototype.getState=function(){return this.checkOpen(),!!this.data.state},kt.prototype.handleStateChangeEvent=function(t){this.data.state=!!t.get("0"),this.onStateChange(this.data.state)};var Bt=function(){Pt.apply(this,arguments),this.name="DigitalOutput",this["class"]=b.DIGITAL_OUTPUT,this.onError=function(t,e){}};Bt.prototype=Object.create(Pt.prototype),Bt.prototype.constructor=Bt,_.DigitalOutput=Bt,Bt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Bt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Bt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},Bt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDUTYCYCLE:return this.data.dutyCycle=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DutyCycle"),!0;case lt.BP_SETLEDCURRENTLIMIT:return this.data.LEDCurrentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("LEDCurrentLimit"),!0;case lt.BP_SETLEDFORWARDVOLTAGE:return this.data.LEDForwardVoltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("LEDForwardVoltage"),!0;case lt.BP_SETSTATE:return this.data.state=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("State"),!0}},Bt.prototype.getDutyCycle=function(){return this.checkOpen(),this.data.dutyCycle},Bt.prototype.setDutyCycle=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETDUTYCYCLE).then(function(e){n.data.dutyCycle=t})},Bt.prototype.getMinDutyCycle=function(){return this.checkOpen(),this.data.minDutyCycle},Bt.prototype.getMaxDutyCycle=function(){return this.checkOpen(),this.data.maxDutyCycle},Bt.prototype.getLEDCurrentLimit=function(){return this.checkOpen(),this.data.LEDCurrentLimit},Bt.prototype.setLEDCurrentLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETLEDCURRENTLIMIT).then(function(e){n.data.LEDCurrentLimit=t})},Bt.prototype.getMinLEDCurrentLimit=function(){return this.checkOpen(),this.data.minLEDCurrentLimit},Bt.prototype.getMaxLEDCurrentLimit=function(){return this.checkOpen(),this.data.maxLEDCurrentLimit},Bt.prototype.getLEDForwardVoltage=function(){return this.checkOpen(),this.data.LEDForwardVoltage},Bt.prototype.setLEDForwardVoltage=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETLEDFORWARDVOLTAGE).then(function(e){n.data.LEDForwardVoltage=t})},Bt.prototype.getState=function(){return this.checkOpen(),!!this.data.state},Bt.prototype.setState=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSTATE).then(function(e){n.data.state=t})};var Lt=function(){Pt.apply(this,arguments),this.name="DistanceSensor",this["class"]=b.DISTANCE_SENSOR,this.onDistanceChange=function(t){},this.onSonarReflectionsUpdate=function(t,e,n){},this.onError=function(t,e){}};Lt.prototype=Object.create(Pt.prototype),Lt.prototype.constructor=Lt,_.DistanceSensor=Lt,Lt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Lt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Lt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_DISTANCECHANGE:this.handleDistanceChangeEvent(t);break;case lt.BP_SONARUPDATE:this.handleSonarReflectionsUpdateEvent(t)}return!0},Lt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.distanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DistanceChangeTrigger"),!0;case lt.BP_SETSONARQUIETMODE:return this.data.sonarQuietMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SonarQuietMode"),!0}},Lt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Lt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Lt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Lt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Lt.prototype.getDistance=function(){return this.checkOpen(),this.data.distance},Lt.prototype.getMinDistance=function(){return this.checkOpen(),this.data.minDistance},Lt.prototype.getMaxDistance=function(){return this.checkOpen(),this.data.maxDistance},Lt.prototype.getDistanceChangeTrigger=function(){return this.checkOpen(),this.data.distanceChangeTrigger},Lt.prototype.setDistanceChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.distanceChangeTrigger=t})},Lt.prototype.getMinDistanceChangeTrigger=function(){return this.checkOpen(),this.data.minDistanceChangeTrigger},Lt.prototype.getMaxDistanceChangeTrigger=function(){return this.checkOpen(),this.data.maxDistanceChangeTrigger},Lt.prototype.getSonarQuietMode=function(){return this.checkOpen(),!!this.data.sonarQuietMode},Lt.prototype.setSonarQuietMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSONARQUIETMODE).then(function(e){n.data.sonarQuietMode=t})},Lt.prototype.handleDistanceChangeEvent=function(t){this.data.distance=t.get("0"),this.onDistanceChange(this.data.distance)},Lt.prototype.handleSonarReflectionsUpdateEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2");this.onSonarReflectionsUpdate(e,n,i)},Lt.prototype.getSonarReflections=function(){return this.checkOpen(),{distances:this.data.distances,amplitudes:this.data.amplitudes,count:this.data.count}};var wt=function(){Pt.apply(this,arguments),this.name="Encoder",this["class"]=b.ENCODER,this.onPositionChange=function(t,e,n){},this.onError=function(t,e){}};wt.prototype=Object.create(Pt.prototype),wt.prototype.constructor=wt,_.Encoder=wt,wt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},wt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},wt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t)}return!0},wt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETIOMODE:return this.data.IOMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IOMode"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.positionChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PositionChangeTrigger"),!0}},wt.prototype.setEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENABLED).then(function(e){n.data.enabled=t})},wt.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},wt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},wt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},wt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},wt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},wt.prototype.getIndexPosition=function(){return this.checkOpen(),this.data.indexPosition},wt.prototype.getIOMode=function(){return this.checkOpen(),this.data.IOMode},wt.prototype.setIOMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETIOMODE).then(function(e){n.data.IOMode=t})},wt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},wt.prototype.getPositionChangeTrigger=function(){return this.checkOpen(),this.data.positionChangeTrigger},wt.prototype.setPositionChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.positionChangeTrigger=t})},wt.prototype.getMinPositionChangeTrigger=function(){return this.checkOpen(),this.data.minPositionChangeTrigger},wt.prototype.getMaxPositionChangeTrigger=function(){return this.checkOpen(),this.data.maxPositionChangeTrigger},wt.prototype.handlePositionChangeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=!!t.get("2");this.onPositionChange(e,n,i)},wt.prototype.handlePositionChangeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a=0;i&&(a=t.get("3"),this.data.indexPosition=this.data.position+a),this.data.position+=e,this.onPositionChange(e,n,i)},wt.prototype.setPosition=function(t){1e300!=this.data.indexPosition&&(this.data.indexPosition+=t-this.data.position),this.data.position=t};var Mt=function(){Pt.apply(this,arguments),this.name="FirmwareUpgrade",this["class"]=b.FIRMWARE_UPGRADE,this.onProgressChange=function(t){},this.onError=function(t,e){}};Mt.prototype=Object.create(Pt.prototype),Mt.prototype.constructor=Mt,_.FirmwareUpgrade=Mt,Mt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Mt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Mt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_PROGRESSCHANGE:this.handleProgressChangeEvent(t)}return!0},Mt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Mt.prototype.getActualDeviceID=function(){return this.checkOpen(),this.data.actualDeviceID},Mt.prototype.getActualDeviceName=function(){return this.checkOpen(),this.data.actualDeviceName},Mt.prototype.getActualDeviceSKU=function(){return this.checkOpen(),this.data.actualDeviceSKU},Mt.prototype.getActualDeviceVersion=function(){return this.checkOpen(),this.data.actualDeviceVersion},Mt.prototype.getActualDeviceVINTID=function(){return this.checkOpen(),this.data.actualDeviceVINTID},Mt.prototype.getProgress=function(){return this.checkOpen(),this.data.progress},Mt.prototype.sendFirmware=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"c",value:t}),e.set({name:"1",type:"d",value:dataLen}),e.send(this.channel,lt.BP_SENDFIRMWARE)},Mt.prototype.handleProgressChangeEvent=function(t){this.data.progress=t.get("0"),this.onProgressChange(this.data.progress)};var Vt=function(){Pt.apply(this,arguments),this.name="FrequencyCounter",this["class"]=b.FREQUENCY_COUNTER,this.onFrequencyChange=function(t){},this.onCountChange=function(t,e){},this.onError=function(t,e){}};Vt.prototype=Object.create(Pt.prototype),Vt.prototype.constructor=Vt,_.FrequencyCounter=Vt,Vt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Vt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Vt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_COUNTCHANGE:this.handleCountChangeEvent(t);break;case lt.BP_FREQUENCYCHANGE:this.handleFrequencyChangeEvent(t)}return!0},Vt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETFILTERTYPE:return this.data.filterType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FilterType"),!0;case lt.BP_SETINPUTMODE:return this.data.inputMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("InputMode"),!0;case lt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0}},Vt.prototype.getCount=function(){return this.checkOpen(),this.data.count},Vt.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},Vt.prototype.setEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENABLED).then(function(e){n.data.enabled=t})},Vt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Vt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Vt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Vt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Vt.prototype.getFilterType=function(){return this.checkOpen(),this.data.filterType},Vt.prototype.setFilterType=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETFILTERTYPE).then(function(e){n.data.filterType=t})},Vt.prototype.getFrequency=function(){return this.checkOpen(),this.data.frequency},Vt.prototype.getMaxFrequency=function(){return this.checkOpen(),this.data.maxFrequency},Vt.prototype.getFrequencyCutoff=function(){return this.checkOpen(),this.data.frequencyCutoff},Vt.prototype.getMinFrequencyCutoff=function(){return this.checkOpen(),this.data.minFrequencyCutoff},Vt.prototype.getMaxFrequencyCutoff=function(){return this.checkOpen(),this.data.maxFrequencyCutoff},Vt.prototype.getInputMode=function(){return this.checkOpen(),this.data.inputMode},Vt.prototype.setInputMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETINPUTMODE).then(function(e){n.data.inputMode=t})},Vt.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},Vt.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},Vt.prototype.getTimeElapsed=function(){return this.checkOpen(),this.data.timeElapsed},Vt.prototype.handleCountChangeEvent=function(t){var e=t.get("0"),n=t.get("1");this.onCountChange(e,n)},Vt.prototype.handleFrequencyChangeEvent=function(t){this.data.frequency=t.get("0"),this.onFrequencyChange(this.data.frequency)},Vt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){default:return!1;case lt.BP_FREQUENCYDATA:var e,n,i,a,r=t.get("0"),o=t.get("1"),s=t.get("2");if(this.data.timeElapsed+=r,this.data.count+=o,0==o)return this.data.hasOwnProperty("totalTicksSinceLastCount")||(this.data.totalTicksSinceLastCount=0),!!Number.isNaN(this.data.totalTicksSinceLastCount)||(this.data.totalTicksSinceLastCount+=r,n=Math.round(1e3/this.data.frequencyCutoff),
this.data.totalTicksSinceLastCount>n&&(this.data.frequency=0,this.onCountChange(0,this.data.totalTicksSinceLastCount),this.onFrequencyChange(this.data.frequency),this.data.totalTicksSinceLastCount=Number.NaN),!0);if(Number.isNaN(this.data.totalTicksSinceLastCount))return this.data.totalTicksSinceLastCount=r-s,!0;for(e=this.data.totalTicksSinceLastCount+s,this.data.totalTicksSinceLastCount=r-s,a=this.data.frequencyCutoff,i=2;a<1;)i++,a*=10;return this.data.frequency=Number((o/(e/1e3)).toFixed(i)),this.onCountChange(o,e),this.onFrequencyChange(this.data.frequency),!0}},Vt.prototype.setFrequencyCutoff=function(t){this.data.frequencyCutoff=t},Vt.prototype.resetCount=function(){this.data.count=0,this.data.timeElapsed=0,this.data.frequency=1e300};var Ut=function(){Pt.apply(this,arguments),this.name="Generic",this["class"]=b.GENERIC,this.onPacket=function(t,e){},this.onError=function(t,e){}};Ut.prototype=Object.create(Pt.prototype),Ut.prototype.constructor=Ut,_.Generic=Ut,Ut.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ut.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ut.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_PACKET:this.handlePacketEvent(t)}return!0},Ut.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Ut.prototype.getINPacketLength=function(){return this.checkOpen(),this.data.INPacketLength},Ut.prototype.getOUTPacketLength=function(){return this.checkOpen(),this.data.OUTPacketLength},Ut.prototype.sendPacket=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"c",value:t}),e.set({name:"1",type:"d",value:packetLen}),e.send(this.channel,lt.BP_SENDPACKET)},Ut.prototype.handlePacketEvent=function(t){var e=t.get("0"),n=t.get("1");this.onPacket(e,n)};var bt=function(){Pt.apply(this,arguments),this.name="GPS",this["class"]=b.GPS,this.onPositionChange=function(t,e,n){},this.onHeadingChange=function(t,e){},this.onPositionFixStateChange=function(t){},this.onError=function(t,e){}};bt.prototype=Object.create(Pt.prototype),bt.prototype.constructor=bt,_.GPS=bt,bt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},bt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},bt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_HEADINGCHANGE:this.handleHeadingChangeEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case lt.BP_POSITIONFIXSTATUSCHANGE:this.handlePositionFixStateChangeEvent(t)}return!0},bt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},bt.prototype.getAltitude=function(){return this.checkOpen(),this.data.altitude},bt.prototype.getHeading=function(){return this.checkOpen(),this.data.heading},bt.prototype.getLatitude=function(){return this.checkOpen(),this.data.latitude},bt.prototype.getLongitude=function(){return this.checkOpen(),this.data.longitude},bt.prototype.getPositionFixState=function(){return this.checkOpen(),!!this.data.positionFixState},bt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},bt.prototype.handleHeadingChangeEvent=function(t){this.data.heading=t.get("0"),this.data.velocity=t.get("1"),this.onHeadingChange(this.data.heading,this.data.velocity)},bt.prototype.handlePositionChangeEvent=function(t){this.data.latitude=t.get("0"),this.data.longitude=t.get("1"),this.data.altitude=t.get("2"),this.onPositionChange(this.data.latitude,this.data.longitude,this.data.altitude)},bt.prototype.handlePositionFixStateChangeEvent=function(t){this.data.positionFixState=!!t.get("0"),this.onPositionFixStateChange(this.data.positionFixState)},bt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case lt.BP_DATA:this.data["GPGGA.altitude"]=t.entries["GPGGA.altitude"].v,this.data["GPGGA.latitude"]=t.entries["GPGGA.latitude"].v,this.data["GPGGA.longitude"]=t.entries["GPGGA.longitude"].v,this.data["GPVTG.speed"]=t.entries["GPVTG.speed"].v,this.data["GPVTG.trueHeading"]=t.entries["GPVTG.trueHeading"].v,this.data.altitude=t.entries["GPGGA.altitude"].v,this.data.latitude=t.entries["GPGGA.latitude"].v,this.data.longitude=t.entries["GPGGA.longitude"].v,this.data.velocity=t.entries["GPVTG.speed"].v,this.data.heading=t.entries["GPVTG.trueHeading"].v;break;case lt.BP_TIME:var e=this.convertToLocal(t.entries["GPSTime.tm_hour"].v);this.data["GPSTime.tm_ms"]=t.entries["GPSTime.tm_ms"].v,this.data["GPSTime.tm_sec"]=t.entries["GPSTime.tm_sec"].v,this.data["GPSTime.tm_min"]=t.entries["GPSTime.tm_min"].v,this.data["GPSTime.tm_hour"]=e,"function"==typeof this.onTimeChange&&this.onTimeChange(e,this.data["GPSTime.tm_min"],this.data["GPSTime.tm_sec"],this.data["GPSTime.tm_ms"]);break;case lt.BP_DATE:this.data["GPSDate.tm_mday"]=t.entries["GPSDate.tm_mday"].v,this.data["GPSDate.tm_mon"]=t.entries["GPSDate.tm_mon"].v,this.data["GPSDate.tm_year"]=t.entries["GPSDate.tm_year"].v,"function"==typeof this.onDateChange&&this.onDateChange(this.data["GPSDate.tm_year"],this.data["GPSDate.tm_mon"],this.data["GPSDate.tm_mday"]);break;default:return!1}return!0},bt.prototype.convertToLocal=function(t){var e=new Date,n=e.getTimezoneOffset()/60;return t-n};var Gt=function(){Pt.apply(this,arguments),this.name="Gyroscope",this["class"]=b.GYROSCOPE,this.onAngularRateUpdate=function(t,e){},this.onError=function(t,e){}};Gt.prototype=Object.create(Pt.prototype),Gt.prototype.constructor=Gt,_.Gyroscope=Gt,Gt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Gt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Gt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_ANGULARRATEUPDATE:this.handleAngularRateUpdateEvent(t)}return!0},Gt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},Gt.prototype.getAngularRate=function(){return this.checkOpen(),this.data.angularRate},Gt.prototype.getMinAngularRate=function(){return this.checkOpen(),this.data.minAngularRate},Gt.prototype.getMaxAngularRate=function(){return this.checkOpen(),this.data.maxAngularRate},Gt.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},Gt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Gt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Gt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Gt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Gt.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},Gt.prototype.zero=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_ZERO)},Gt.prototype.handleAngularRateUpdateEvent=function(t){this.data.angularRate=t.get("0"),this.data.timestamp=t.get("1"),this.onAngularRateUpdate(this.data.angularRate,this.data.timestamp)};var Ht=function(){Pt.apply(this,arguments),this.name="Hub",this["class"]=b.HUB,this.onError=function(t,e){}};Ht.prototype=Object.create(Pt.prototype),Ht.prototype.constructor=Ht,_.Hub=Ht,Ht.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ht.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ht.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},Ht.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Ht.prototype.setADCCalibrationValues=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"g",value:t}),n.set({name:"1",type:"g",value:e}),n.send(this.channel,lt.BP_SETCALIBRATIONVALUES)},Ht.prototype.setFirmwareUpgradeFlag=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"u",value:e}),n.send(this.channel,lt.BP_SETFIRMWAREUPGRADEFLAG)},Ht.prototype.setPortMode=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"d",value:e}),n.send(this.channel,lt.BP_SETPORTMODE)},Ht.prototype.setPortPower=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"d",value:t}),n.set({name:"1",type:"d",value:e}),n.send(this.channel,lt.BP_SETPORTPOWER)};var xt=function(){Pt.apply(this,arguments),this.name="HumiditySensor",this["class"]=b.HUMIDITY_SENSOR,this.onHumidityChange=function(t){},this.onError=function(t,e){}};xt.prototype=Object.create(Pt.prototype),xt.prototype.constructor=xt,_.HumiditySensor=xt,xt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},xt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},xt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_HUMIDITYCHANGE:this.handleHumidityChangeEvent(t)}return!0},xt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.humidityChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("HumidityChangeTrigger"),!0}},xt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},xt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},xt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},xt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},xt.prototype.getHumidity=function(){return this.checkOpen(),this.data.humidity},xt.prototype.getMinHumidity=function(){return this.checkOpen(),this.data.minHumidity},xt.prototype.getMaxHumidity=function(){return this.checkOpen(),this.data.maxHumidity},xt.prototype.getHumidityChangeTrigger=function(){return this.checkOpen(),this.data.humidityChangeTrigger},xt.prototype.setHumidityChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.humidityChangeTrigger=t})},xt.prototype.getMinHumidityChangeTrigger=function(){return this.checkOpen(),this.data.minHumidityChangeTrigger},xt.prototype.getMaxHumidityChangeTrigger=function(){return this.checkOpen(),this.data.maxHumidityChangeTrigger},xt.prototype.handleHumidityChangeEvent=function(t){this.data.humidity=t.get("0"),this.onHumidityChange(this.data.humidity)};var Ft=function(){Pt.apply(this,arguments),this.name="IR",this["class"]=b.IR,this.onCode=function(t,e,n){},this.onLearn=function(t,e){},this.onRawData=function(t,e){},this.onError=function(t,e){}};Ft.prototype=Object.create(Pt.prototype),Ft.prototype.constructor=Ft,_.IR=Ft,Ft.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Ft.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Ft.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_CODE:this.handleCodeEvent(t);break;case lt.BP_LEARN:this.handleLearnEvent(t);break;case lt.BP_RAWDATA:this.handleRawDataEvent(t)}return!0},_.RAW_DATA_LONG_SPACE=4294967295,_.MAX_CODE_BIT_COUNT=128,_.MAX_CODE_STRING_LENGTH=33,Ft.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1}},Ft.prototype.transmit=function(t,e){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var n=new gt(this.channel.conn);return n.set({name:"0",type:"s",value:t}),n.set({name:"1",type:"J",value:e}),n.send(this.channel,lt.BP_TRANSMIT)},Ft.prototype.transmitRaw=function(t,e,n,i){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var a=new gt(this.channel.conn);return a.set({name:"0",type:"u",value:t}),a.set({name:"1",type:"d",value:dataLen}),a.set({name:"2",type:"u",value:e}),a.set({name:"3",type:"g",value:n}),a.set({name:"4",type:"u",value:i}),a.send(this.channel,lt.BP_TRANSMITRAW)},Ft.prototype.transmitRepeat=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_TRANSMITREPEAT)},Ft.prototype.handleCodeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=!!t.get("2");this.onCode(e,n,i)},Ft.prototype.handleLearnEvent=function(t){var e=t.get("0"),n={bitCount:t.get("CodeInfo.bitCount"),encoding:t.get("CodeInfo.encoding"),length:t.get("CodeInfo.length"),gap:t.get("CodeInfo.gap"),trail:t.get("CodeInfo.trail"),header:t.get("CodeInfo.header"),one:t.get("CodeInfo.one"),zero:t.get("CodeInfo.zero"),repeat:t.get("CodeInfo.repeat"),minRepeat:t.get("CodeInfo.minRepeat"),dutyCycle:t.get("CodeInfo.dutyCycle"),carrierFrequency:t.get("CodeInfo.carrierFrequency"),toggleMask:t.get("CodeInfo.toggleMask")};this.onLearn(e,n)},Ft.prototype.handleRawDataEvent=function(t){var e=t.get("0"),n=t.get("1");this.onRawData(e,n)},Ft.prototype.transmit=function(t,e,n){var i=new gt(this.channel.conn);i.set({name:"code",type:"s",value:t}),i.set({name:"CodeInfo.bitCount",type:"u",value:e.bitCount}),i.set({name:"CodeInfo.encoding",type:"d",value:e.encoding}),i.set({name:"CodeInfo.length",type:"d",value:e.length}),i.set({name:"CodeInfo.gap",type:"u",value:e.gap}),i.set({name:"CodeInfo.trail",type:"u",value:e.trail}),i.set({name:"CodeInfo.header",type:"U",value:e.header}),i.set({name:"CodeInfo.one",type:"U",value:e.one}),i.set({name:"CodeInfo.zero",type:"U",value:e.zero}),i.set({name:"CodeInfo.repeat",type:"U",value:e.repeat}),i.set({name:"CodeInfo.minRepeat",type:"u",value:e.minRepeat}),i.set({name:"CodeInfo.dutyCycle",type:"g",value:e.dutyCycle}),i.set({name:"CodeInfo.carrierFrequency",type:"u",value:e.carrierFrequency}),i.set({name:"CodeInfo.toggleMask",type:"R",value:e.toggleMask}),i.send(this.channel,lt.BP_TRANSMIT,n)},Ft.prototype.transmitRaw=function(t,e,n,i,a){var r=new gt(this.channel.conn);r.set({name:"data",type:"U",value:t}),r.set({name:"carrierFrequency",type:"u",value:e}),r.set({name:"dutyCycle",type:"g",value:n}),r.set({name:"gap",type:"u",value:i}),r.send(this.channel,lt.BP_TRANSMITRAW,a)},Ft.prototype.handleCodeEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a={bitCount:n};this.data.lastCodeStr=e,this.data.lastCodeInfo=a,this.data.lastCodeKnown=!0,this.onCode(e,n,i)},Ft.prototype.handleLearnEvent=function(t){var e=t.get("0"),n={bitCount:t.get("CodeInfo.bitCount"),encoding:t.get("CodeInfo.encoding"),length:t.get("CodeInfo.length"),gap:t.get("CodeInfo.gap"),trail:t.get("CodeInfo.trail"),header:t.get("CodeInfo.header"),one:t.get("CodeInfo.one"),zero:t.get("CodeInfo.zero"),repeat:t.get("CodeInfo.repeat"),minRepeat:t.get("CodeInfo.minRepeat"),dutyCycle:t.get("CodeInfo.dutyCycle"),carrierFrequency:t.get("CodeInfo.carrierFrequency"),toggleMask:t.get("CodeInfo.toggleMask")};this.data.lastLearnedCodeStr=e,this.data.lastLearnedCodeInfo=n,this.data.lastLearnedCodeKnown=!0,this.onLearn(e,n)},Ft.prototype.getLastCode=function(){if("undefined"==typeof this.data.lastCodeKnown)throw new dt(w.UNKNOWN_VALUE);return{bitCount:this.data.lastCodeInfo.bitCount,code:this.data.lastCodeStr}},Ft.prototype.getLastLearnedCode=function(){if("undefined"==typeof this.data.lastLearnedCodeKnown)throw new dt(w.UNKNOWN_VALUE);return{code:this.data.lastLearnedCodeStr,codeInfo:this.data.lastLearnedCodeInfo}},Ft.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case lt.BP_REPEAT:this.onCode(this.data.lastCodeStr,this.data.lastCodeStr.bitCount,!0);break;default:return!1}return!0};var Yt=function(){Pt.apply(this,arguments),this.name="LCD",this["class"]=b.LCD,this.onError=function(t,e){}};Yt.prototype=Object.create(Pt.prototype),Yt.prototype.constructor=Yt,_.LCD=Yt,Yt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Yt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Yt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},Yt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETBACKLIGHT:return this.data.backlight=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Backlight"),!0;case lt.BP_SETCONTRAST:return this.data.contrast=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Contrast"),!0;case lt.BP_SETCURSORBLINK:return this.data.cursorBlink=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CursorBlink"),!0;case lt.BP_SETCURSORON:return this.data.cursorOn=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CursorOn"),!0;case lt.BP_SETFRAMEBUFFER:return this.data.frameBuffer=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FrameBuffer"),!0;case lt.BP_SETSCREENSIZE:return this.data.screenSize=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ScreenSize"),!0;case lt.BP_SETSLEEP:return this.data.sleeping=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Sleeping"),!0}},Yt.prototype.getBacklight=function(){return this.checkOpen(),this.data.backlight},Yt.prototype.setBacklight=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETBACKLIGHT).then(function(e){n.data.backlight=t})},Yt.prototype.getMinBacklight=function(){return this.checkOpen(),this.data.minBacklight},Yt.prototype.getMaxBacklight=function(){return this.checkOpen(),this.data.maxBacklight},Yt.prototype.setCharacterBitmap=function(t,e,n){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var i=new gt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"s",value:e}),i.set({name:"2",type:"c",value:n}),i.send(this.channel,lt.BP_SETCHARACTERBITMAP)},Yt.prototype.clear=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_CLEAR)},Yt.prototype.getContrast=function(){return this.checkOpen(),this.data.contrast},Yt.prototype.setContrast=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCONTRAST).then(function(e){n.data.contrast=t})},Yt.prototype.getMinContrast=function(){return this.checkOpen(),this.data.minContrast},Yt.prototype.getMaxContrast=function(){return this.checkOpen(),this.data.maxContrast},Yt.prototype.copy=function(t,e,n,i,a,r,o,s,h){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var c=new gt(this.channel.conn);return c.set({name:"0",type:"d",value:t}),c.set({name:"1",type:"d",value:e}),c.set({name:"2",type:"d",value:n}),c.set({name:"3",type:"d",value:i}),c.set({name:"4",type:"d",value:a}),c.set({name:"5",type:"d",value:r}),c.set({name:"6",type:"d",value:o}),c.set({name:"7",type:"d",value:s}),c.set({name:"8",type:"d",value:h}),c.send(this.channel,lt.BP_COPY)},Yt.prototype.getCursorBlink=function(){return this.checkOpen(),!!this.data.cursorBlink},Yt.prototype.setCursorBlink=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURSORBLINK).then(function(e){n.data.cursorBlink=t})},Yt.prototype.getCursorOn=function(){return this.checkOpen(),!!this.data.cursorOn},Yt.prototype.setCursorOn=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURSORON).then(function(e){n.data.cursorOn=t})},Yt.prototype.drawLine=function(t,e,n,i){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var a=new gt(this.channel.conn);return a.set({name:"0",type:"d",value:t}),a.set({name:"1",type:"d",value:e}),a.set({name:"2",type:"d",value:n}),a.set({name:"3",type:"d",value:i}),a.send(this.channel,lt.BP_DRAWLINE)},Yt.prototype.drawPixel=function(t,e,n){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var i=new gt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,lt.BP_DRAWPIXEL)},Yt.prototype.drawRect=function(t,e,n,i,a,r){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var o=new gt(this.channel.conn);return o.set({name:"0",type:"d",value:t}),o.set({name:"1",type:"d",value:e}),o.set({name:"2",type:"d",value:n}),o.set({name:"3",type:"d",value:i}),o.set({name:"4",type:"d",value:a}),o.set({name:"5",type:"d",value:r}),o.send(this.channel,lt.BP_DRAWRECT)},Yt.prototype.flush=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_FLUSH)},Yt.prototype.setFontSize=function(t,e,n){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var i=new gt(this.channel.conn);return i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,lt.BP_SETFONTSIZE)},Yt.prototype.getFrameBuffer=function(){return this.checkOpen(),this.data.frameBuffer},Yt.prototype.setFrameBuffer=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETFRAMEBUFFER).then(function(e){n.data.frameBuffer=t})},Yt.prototype.getHeight=function(){return this.checkOpen(),this.data.height},Yt.prototype.initialize=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_INITIALIZE)},Yt.prototype.saveFrameBuffer=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);return e.set({name:"0",type:"d",value:t}),e.send(this.channel,lt.BP_SAVEFRAMEBUFFER)},Yt.prototype.getScreenSize=function(){return this.checkOpen(),this.data.screenSize},Yt.prototype.setScreenSize=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSCREENSIZE).then(function(e){n.data.screenSize=t})},Yt.prototype.getSleeping=function(){return this.checkOpen(),!!this.data.sleeping},Yt.prototype.setSleeping=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSLEEP).then(function(e){n.data.sleeping=t})},Yt.prototype.getWidth=function(){return this.checkOpen(),this.data.width},Yt.prototype.writeBitmap=function(t,e,n,i,a){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var r=new gt(this.channel.conn);return r.set({name:"0",type:"d",value:t}),r.set({name:"1",type:"d",value:e}),r.set({name:"2",type:"d",value:n}),r.set({name:"3",type:"d",value:i}),r.set({name:"4",type:"c",value:a}),r.send(this.channel,lt.BP_WRITEBITMAP)},Yt.prototype.writeText=function(t,e,n,i){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var a=new gt(this.channel.conn);return a.set({name:"0",type:"d",value:t}),a.set({name:"1",type:"d",value:e}),a.set({name:"2",type:"d",value:n}),a.set({name:"3",type:"s",value:i}),a.send(this.channel,lt.BP_WRITETEXT)},Yt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETFONTSIZE:var e=t.get("0"),n=t.get("1"),i=t.get("2");return this.data.fontWidth[parseInt(e)]=n,this.data.fontHeight[parseInt(e)]=i,this.onPropertyChange&&this.onPropertyChange("FontSize"),!0}},Yt.prototype.setCharacterBitmap=function(t,e,n){var i=this.getFontSize(t),a=new gt(this.channel.conn);if(i.width<=0)return Promise.reject(new dt(w.INVALIDARG,"invalid arg (getFontSize): "+t));if(i.height<=0)return Promise.reject(new dt(w.INVALIDARG,"invalid arg (getFontSize): "+t));a.set({name:"font",type:"d",value:t}),a.set({name:"character",type:"s",value:e}),a.set({name:"bitmap",type:"R",value:n});var r=this;return a.send(this.channel,lt.BP_SETCHARACTERBITMAP,function(){"function"==typeof r.setCharacterBitmapSuccess&&r.setCharacterBitmapSuccess()}.bind(this))},Yt.prototype.getMaxCharacters=function(t){var e,n;switch(this.getDeviceID()){case V.PN_LCD1100:if(parseInt(t)<1||parseInt(t)>5)throw new dt(w.INVALIDARG,"invalid arg (getMaxCharacters): "+t);if(n=this.getFontSize(t),n.width<=0)throw new dt(w.INVALIDARG,"invalid arg (getFontSize): "+t);if(n.height<=0)throw new dt(w.INVALIDARG,"invalid arg (getFontSize): "+t);e=Math.min(255,this.data.width/n.width*(this.data.height/n.height));break;case V.PN_1202_1203:case V.PN_1204:case V.PN_1215__1218:case V.PN_1219__1222:e=255;break;default:throw new dt(w.UNEXPECTED)}return e},Yt.prototype.getFontSize=function(t){var e={width:0,height:0};window;switch(parseInt(t)){case J.DIMENSIONS_6X10:e.width=6,e.height=10;break;case J.DIMENSIONS_5X8:e.width=5,e.height=8;break;case J.DIMENSIONS_6X12:e.width=6,e.height=12;break;case J.USER1:case J.USER2:e.width=this.data.fontWidth[parseInt(t)],e.height=this.data.fontHeight[parseInt(t)];break;default:throw new dt(w.INVALIDARG,"invalid arg (getFontSize): "+t)}return e},Yt.prototype.setFontSize=function(t,e,n){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var i=new gt(this.channel.conn);i.set({name:"0",type:"d",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n});var a=this;return i.send(this.channel,lt.BP_SETFONTSIZE).then(function(i){a.data.fontWidth[t]=e,a.data.fontHeight[t]=n})},Yt.prototype.writeBitmap=function(t,e,n,i,a){var r=new gt(this.channel.conn);if(n<=0||i<=0)return Promise.reject(new dt(w.INVALIDARG,"invalid arg (size cannot be <=0) "+font));r.set({name:"xpos",type:"d",value:t}),r.set({name:"ypos",type:"d",value:e}),r.set({name:"xsize",type:"d",value:n}),r.set({name:"ysize",type:"d",value:i}),r.set({name:"bitmap",type:"R",value:a});var o=this;return r.send(this.channel,lt.BP_WRITEBITMAP,function(){"function"==typeof o.setCharacterBitmapSuccess&&o.setCharacterBitmapSuccess()}.bind(this))};var Wt=function(){Pt.apply(this,arguments),this.name="LightSensor",this["class"]=b.LIGHT_SENSOR,this.onIlluminanceChange=function(t){},this.onError=function(t,e){}};Wt.prototype=Object.create(Pt.prototype),Wt.prototype.constructor=Wt,_.LightSensor=Wt,Wt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Wt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Wt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_ILLUMINANCECHANGE:this.handleIlluminanceChangeEvent(t)}return!0},Wt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.illuminanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IlluminanceChangeTrigger"),!0}},Wt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Wt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Wt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Wt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Wt.prototype.getIlluminance=function(){return this.checkOpen(),this.data.illuminance},Wt.prototype.getMinIlluminance=function(){return this.checkOpen(),this.data.minIlluminance},Wt.prototype.getMaxIlluminance=function(){return this.checkOpen(),this.data.maxIlluminance},Wt.prototype.getIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.illuminanceChangeTrigger},Wt.prototype.setIlluminanceChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.illuminanceChangeTrigger=t})},Wt.prototype.getMinIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.minIlluminanceChangeTrigger},Wt.prototype.getMaxIlluminanceChangeTrigger=function(){return this.checkOpen(),this.data.maxIlluminanceChangeTrigger},Wt.prototype.handleIlluminanceChangeEvent=function(t){this.data.illuminance=t.get("0"),this.onIlluminanceChange(this.data.illuminance)};var qt=function(){Pt.apply(this,arguments),this.name="Magnetometer",this["class"]=b.MAGNETOMETER,this.onMagneticFieldChange=function(t,e){},this.onError=function(t,e){}};qt.prototype=Object.create(Pt.prototype),qt.prototype.constructor=qt,_.Magnetometer=qt,qt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},qt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},qt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:
this.handleErrorEvent(t);break;case lt.BP_FIELDSTRENGTHCHANGE:this.handleMagneticFieldChangeEvent(t)}return!0},qt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.magneticFieldChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MagneticFieldChangeTrigger"),!0}},qt.prototype.getAxisCount=function(){return this.checkOpen(),this.data.axisCount},qt.prototype.setCorrectionParameters=function(t,e,n,i,a,r,o,s,h,c,p,u,d){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var l=new gt(this.channel.conn);return l.set({name:"0",type:"g",value:t}),l.set({name:"1",type:"g",value:e}),l.set({name:"2",type:"g",value:n}),l.set({name:"3",type:"g",value:i}),l.set({name:"4",type:"g",value:a}),l.set({name:"5",type:"g",value:r}),l.set({name:"6",type:"g",value:o}),l.set({name:"7",type:"g",value:s}),l.set({name:"8",type:"g",value:h}),l.set({name:"9",type:"g",value:c}),l.set({name:"10",type:"g",value:p}),l.set({name:"11",type:"g",value:u}),l.set({name:"12",type:"g",value:d}),l.send(this.channel,lt.BP_SETCORRECTIONPARAMETERS)},qt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},qt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},qt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},qt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},qt.prototype.getMagneticField=function(){return this.checkOpen(),this.data.magneticField},qt.prototype.getMinMagneticField=function(){return this.checkOpen(),this.data.minMagneticField},qt.prototype.getMaxMagneticField=function(){return this.checkOpen(),this.data.maxMagneticField},qt.prototype.getMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.magneticFieldChangeTrigger},qt.prototype.setMagneticFieldChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.magneticFieldChangeTrigger=t})},qt.prototype.getMinMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.minMagneticFieldChangeTrigger},qt.prototype.getMaxMagneticFieldChangeTrigger=function(){return this.checkOpen(),this.data.maxMagneticFieldChangeTrigger},qt.prototype.resetCorrectionParameters=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_RESETCORRECTIONPARAMETERS)},qt.prototype.saveCorrectionParameters=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_SAVECORRECTIONPARAMETERS)},qt.prototype.getTimestamp=function(){return this.checkOpen(),this.data.timestamp},qt.prototype.handleMagneticFieldChangeEvent=function(t){this.data.magneticField=t.get("0"),this.data.timestamp=t.get("1"),this.onMagneticFieldChange(this.data.magneticField,this.data.timestamp)};var Kt=function(){Pt.apply(this,arguments),this.name="MotorPositionController",this["class"]=b.MOTOR_POSITION_CONTROLLER,this.onPositionChange=function(t){},this.onDutyCycleUpdate=function(t){},this.onError=function(t,e){}};Kt.prototype=Object.create(Pt.prototype),Kt.prototype.constructor=Kt,_.MotorPositionController=Kt,Kt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Kt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Kt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_DUTYCYCLECHANGE:this.handleDutyCycleUpdateEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t)}return!0},Kt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case lt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case lt.BP_SETCURRENTREGULATORGAIN:return this.data.currentRegulatorGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentRegulatorGain"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETDEADBAND:return this.data.deadBand=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DeadBand"),!0;case lt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case lt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case lt.BP_SETIOMODE:return this.data.IOMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("IOMode"),!0;case lt.BP_SETKD:return this.data.kd=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Kd"),!0;case lt.BP_SETKI:return this.data.ki=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Ki"),!0;case lt.BP_SETKP:return this.data.kp=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Kp"),!0;case lt.BP_SETSTALLVELOCITY:return this.data.stallVelocity=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("StallVelocity"),!0;case lt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case lt.BP_SETDUTYCYCLE:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0}},Kt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Kt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Kt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Kt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Kt.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},Kt.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},Kt.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},Kt.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},Kt.prototype.getCurrentRegulatorGain=function(){return this.checkOpen(),this.data.currentRegulatorGain},Kt.prototype.setCurrentRegulatorGain=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURRENTREGULATORGAIN).then(function(e){n.data.currentRegulatorGain=t})},Kt.prototype.getMinCurrentRegulatorGain=function(){return this.checkOpen(),this.data.minCurrentRegulatorGain},Kt.prototype.getMaxCurrentRegulatorGain=function(){return this.checkOpen(),this.data.maxCurrentRegulatorGain},Kt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Kt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Kt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Kt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Kt.prototype.getDeadBand=function(){return this.checkOpen(),this.data.deadBand},Kt.prototype.setDeadBand=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDEADBAND).then(function(e){n.data.deadBand=t})},Kt.prototype.getDutyCycle=function(){return this.checkOpen(),this.data.dutyCycle},Kt.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},Kt.prototype.setEngaged=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},Kt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},Kt.prototype.setFanMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},Kt.prototype.getIOMode=function(){return this.checkOpen(),this.data.IOMode},Kt.prototype.setIOMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETIOMODE).then(function(e){n.data.IOMode=t})},Kt.prototype.getKd=function(){return this.checkOpen(),this.data.kd},Kt.prototype.setKd=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETKD).then(function(e){n.data.kd=t})},Kt.prototype.getKi=function(){return this.checkOpen(),this.data.ki},Kt.prototype.setKi=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETKI).then(function(e){n.data.ki=t})},Kt.prototype.getKp=function(){return this.checkOpen(),this.data.kp},Kt.prototype.setKp=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETKP).then(function(e){n.data.kp=t})},Kt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Kt.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},Kt.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},Kt.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},Kt.prototype.getStallVelocity=function(){return this.checkOpen(),this.data.stallVelocity},Kt.prototype.setStallVelocity=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETSTALLVELOCITY).then(function(e){n.data.stallVelocity=t})},Kt.prototype.getMinStallVelocity=function(){return this.checkOpen(),this.data.minStallVelocity},Kt.prototype.getMaxStallVelocity=function(){return this.checkOpen(),this.data.maxStallVelocity},Kt.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},Kt.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"l",value:t});var n=this;return e.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},Kt.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},Kt.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETDUTYCYCLE).then(function(e){n.data.velocityLimit=t})},Kt.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},Kt.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},Kt.prototype.handleDutyCycleUpdateEvent=function(t){this.data.dutyCycle=t.get("0"),this.onDutyCycleUpdate(this.data.dutyCycle)},Kt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},Kt.prototype.getAcceleration=function(){if(1e300==this.data.acceleration)throw new dt(w.UNKNOWN_VALUE);return this.data.acceleration*this.data.rescaleFactor},Kt.prototype.setAcceleration=function(t){var e=new gt(this.channel.conn);e.set({name:"acceleration",type:"g",value:t}),e.send(this.channel,lt.BP_SETACCELERATION,function(){this.data.acceleration=t/this.data.rescaleFactor,"function"==typeof this.setAccelerationSuccess&&this.setAccelerationSuccess(t)}.bind(this))},Kt.prototype.getMinAcceleration=function(){return this.data.minAcceleration*this.data.rescaleFactor},Kt.prototype.getMaxAcceleration=function(){return this.data.maxAcceleration*this.data.rescaleFactor},Kt.prototype.addPositionOffset=function(t){this.data.positionOffset+=t/this.data.rescaleFactor},Kt.prototype.getDeadBand=function(){return this.data.deadBand*this.data.rescaleFactor},Kt.prototype.setDeadBand=function(t){var e=new gt(this.channel.conn);e.set({name:"deadBand",type:"u",value:t}),e.send(this.channel,lt.BP_SETDEADBAND,function(){this.data.deadBand=t/this.data.rescaleFactor,"function"==typeof this.setDeadBandSuccess&&this.setDeadBandSuccess(t)}.bind(this))},Kt.prototype.getPosition=function(){return(this.data.position+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.getMinPosition=function(){return(this.data.minPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.getMaxPosition=function(){return(this.data.maxPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},Kt.prototype.getTargetPosition=function(){return(this.data.targetPosition+this.data.positionOffset)*this.data.rescaleFactor},Kt.prototype.setTargetPosition=function(t){var e=t/this.data.rescaleFactor-this.data.positionOffset,n=new gt(this.channel.conn);n.set({name:"targetPosition",type:"l",value:e}),n.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(){this.data.targetPosition=e,"function"==typeof this.setTargetPositionSuccess&&this.setTargetPositionSuccess(e)}.bind(this))},Kt.prototype.getVelocityLimit=function(){return this.data.velocityLimit*this.data.rescaleFactor},Kt.prototype.getStallVelocity=function(){return this.data.stallVelocity*this.data.rescaleFactor},Kt.prototype.setStallVelocity=function(t){var e=t/this.data.rescaleFactor,n=new gt(this.channel.conn);n.set({name:"stallVelocity",type:"g",value:e}),n.send(this.channel,lt.BP_SETSTALLVELOCITY,function(){this.data.stallVelocity=e,"function"==typeof this.setStallVelocitySuccess&&this.setStallVelocitySuccess(e)}.bind(this))},Kt.prototype.setVelocityLimit=function(t){var e=t/this.data.rescaleFactor,n=new gt(this.channel.conn);n.set({name:"velocityLimit",type:"g",value:e}),n.send(this.channel,lt.BP_SETDUTYCYCLE,function(){this.data.velocityLimit=e,"function"==typeof this.setVelocityLimitSuccess&&this.setVelocityLimitSuccess(e)}.bind(this))},Kt.prototype.getMinStallVelocity=function(){return this.data.minStallVelocity*this.data.rescaleFactor},Kt.prototype.getMaxStallVelocity=function(){return this.data.maxStallVelocity*this.data.rescaleFactor},Kt.prototype.getMinVelocityLimit=function(){return this.data.minVelocityLimit*this.data.rescaleFactor},Kt.prototype.getMaxVelocityLimit=function(){return this.data.maxVelocityLimit*this.data.rescaleFactor},Kt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange((this.data.position+this.data.positionOffset)*this.data.rescaleFactor)};var Xt=function(){Pt.apply(this,arguments),this.name="PHSensor",this["class"]=b.PH_SENSOR,this.onPHChange=function(t){},this.onError=function(t,e){}};Xt.prototype=Object.create(Pt.prototype),Xt.prototype.constructor=Xt,_.PHSensor=Xt,Xt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Xt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Xt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_PHCHANGE:this.handlePHChangeEvent(t)}return!0},Xt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETCORRECTIONTEMPERATURE:return this.data.correctionTemperature=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CorrectionTemperature"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.PHChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PHChangeTrigger"),!0}},Xt.prototype.getCorrectionTemperature=function(){return this.checkOpen(),this.data.correctionTemperature},Xt.prototype.setCorrectionTemperature=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCORRECTIONTEMPERATURE).then(function(e){n.data.correctionTemperature=t})},Xt.prototype.getMinCorrectionTemperature=function(){return this.checkOpen(),this.data.minCorrectionTemperature},Xt.prototype.getMaxCorrectionTemperature=function(){return this.checkOpen(),this.data.maxCorrectionTemperature},Xt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Xt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Xt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Xt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Xt.prototype.getPH=function(){return this.checkOpen(),this.data.PH},Xt.prototype.getMinPH=function(){return this.checkOpen(),this.data.minPH},Xt.prototype.getMaxPH=function(){return this.checkOpen(),this.data.maxPH},Xt.prototype.getPHChangeTrigger=function(){return this.checkOpen(),this.data.PHChangeTrigger},Xt.prototype.setPHChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.PHChangeTrigger=t})},Xt.prototype.getMinPHChangeTrigger=function(){return this.checkOpen(),this.data.minPHChangeTrigger},Xt.prototype.getMaxPHChangeTrigger=function(){return this.checkOpen(),this.data.maxPHChangeTrigger},Xt.prototype.handlePHChangeEvent=function(t){this.data.PH=t.get("0"),this.onPHChange(this.data.PH)};var jt=function(){Pt.apply(this,arguments),this.name="PowerGuard",this["class"]=b.POWER_GUARD,this.onError=function(t,e){}};jt.prototype=Object.create(Pt.prototype),jt.prototype.constructor=jt,_.PowerGuard=jt,jt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},jt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},jt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},jt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETFANMODE:return this.data.fanMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("FanMode"),!0;case lt.BP_SETOVERVOLTAGE:return this.data.overVoltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("OverVoltage"),!0;case lt.BP_SETENABLED:return this.data.powerEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerEnabled"),!0}},jt.prototype.getFanMode=function(){return this.checkOpen(),this.data.fanMode},jt.prototype.setFanMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETFANMODE).then(function(e){n.data.fanMode=t})},jt.prototype.getOverVoltage=function(){return this.checkOpen(),this.data.overVoltage},jt.prototype.setOverVoltage=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETOVERVOLTAGE).then(function(e){n.data.overVoltage=t})},jt.prototype.getMinOverVoltage=function(){return this.checkOpen(),this.data.minOverVoltage},jt.prototype.getMaxOverVoltage=function(){return this.checkOpen(),this.data.maxOverVoltage},jt.prototype.getPowerEnabled=function(){return this.checkOpen(),!!this.data.powerEnabled},jt.prototype.setPowerEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENABLED).then(function(e){n.data.powerEnabled=t})};var zt=function(){Pt.apply(this,arguments),this.name="PressureSensor",this["class"]=b.PRESSURE_SENSOR,this.onPressureChange=function(t){},this.onError=function(t,e){}};zt.prototype=Object.create(Pt.prototype),zt.prototype.constructor=zt,_.PressureSensor=zt,zt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},zt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},zt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_PRESSURECHANGE:this.handlePressureChangeEvent(t)}return!0},zt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.pressureChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PressureChangeTrigger"),!0}},zt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},zt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},zt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},zt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},zt.prototype.getPressure=function(){return this.checkOpen(),this.data.pressure},zt.prototype.getMinPressure=function(){return this.checkOpen(),this.data.minPressure},zt.prototype.getMaxPressure=function(){return this.checkOpen(),this.data.maxPressure},zt.prototype.getPressureChangeTrigger=function(){return this.checkOpen(),this.data.pressureChangeTrigger},zt.prototype.setPressureChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.pressureChangeTrigger=t})},zt.prototype.getMinPressureChangeTrigger=function(){return this.checkOpen(),this.data.minPressureChangeTrigger},zt.prototype.getMaxPressureChangeTrigger=function(){return this.checkOpen(),this.data.maxPressureChangeTrigger},zt.prototype.handlePressureChangeEvent=function(t){this.data.pressure=t.get("0"),this.onPressureChange(this.data.pressure)};var Qt=function(){Pt.apply(this,arguments),this.name="RCServo",this["class"]=b.RC_SERVO,this.onPositionChange=function(t){},this.onVelocityChange=function(t){},this.onTargetPositionReached=function(t){},this.onError=function(t,e){}};Qt.prototype=Object.create(Pt.prototype),Qt.prototype.constructor=Qt,_.RCServo=Qt,Qt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Qt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Qt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,3);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case lt.BP_TARGETPOSITIONREACHED:this.handleTargetPositionReachedEvent(t);break;case lt.BP_VELOCITYCHANGE:this.handleVelocityChangeEvent(t)}return!0},Qt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case lt.BP_SETMINPULSEWIDTH:return this.data.minPulseWidth=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MinPulseWidth"),!0;case lt.BP_SETMAXPULSEWIDTH:return this.data.maxPulseWidth=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("MaxPulseWidth"),!0;case lt.BP_SETSPEEDRAMPINGSTATE:return this.data.speedRampingState=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SpeedRampingState"),!0;case lt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case lt.BP_SETDUTYCYCLE:return this.data.torque=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Torque"),!0;case lt.BP_SETVELOCITYLIMIT:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0;case lt.BP_SETVOLTAGE:return this.data.voltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Voltage"),!0}},Qt.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},Qt.prototype.setAcceleration=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},Qt.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},Qt.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},Qt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Qt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Qt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Qt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Qt.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},Qt.prototype.setEngaged=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},Qt.prototype.getIsMoving=function(){return this.checkOpen(),!!this.data.isMoving},Qt.prototype.getPosition=function(){return this.checkOpen(),this.data.position},Qt.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},Qt.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},Qt.prototype.setMinPulseWidth=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETMINPULSEWIDTH).then(function(e){n.data.minPulseWidth=t})},Qt.prototype.getMinPulseWidth=function(){return this.checkOpen(),this.data.minPulseWidth},Qt.prototype.setMaxPulseWidth=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETMAXPULSEWIDTH).then(function(e){n.data.maxPulseWidth=t})},Qt.prototype.getMaxPulseWidth=function(){return this.checkOpen(),this.data.maxPulseWidth},Qt.prototype.getMinPulseWidthLimit=function(){return this.checkOpen(),this.data.minPulseWidthLimit},Qt.prototype.getMaxPulseWidthLimit=function(){return this.checkOpen(),this.data.maxPulseWidthLimit},Qt.prototype.getSpeedRampingState=function(){return this.checkOpen(),!!this.data.speedRampingState},Qt.prototype.setSpeedRampingState=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSPEEDRAMPINGSTATE).then(function(e){n.data.speedRampingState=t})},Qt.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},Qt.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},Qt.prototype.getTorque=function(){return this.checkOpen(),this.data.torque},Qt.prototype.setTorque=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETDUTYCYCLE).then(function(e){n.data.torque=t})},Qt.prototype.getMinTorque=function(){return this.checkOpen(),this.data.minTorque},Qt.prototype.getMaxTorque=function(){return this.checkOpen(),this.data.maxTorque},Qt.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},Qt.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},Qt.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETVELOCITYLIMIT).then(function(e){n.data.velocityLimit=t})},Qt.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},Qt.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},Qt.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},Qt.prototype.setVoltage=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETVOLTAGE).then(function(e){n.data.voltage=t})},Qt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position);
},Qt.prototype.handleTargetPositionReachedEvent=function(t){this.data.position=t.get("0"),this.onTargetPositionReached(this.data.position)},Qt.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity)},Qt.prototype.positionUser=function(t){return this.data.minPosition+(t-this.data.minPulseWidth)/(this.data.maxPulseWidth-this.data.minPulseWidth)*this.data.maxPosition-this.data.minPosition},Qt.prototype.positionUS=function(t){return this.data.maxPosition>this.data.minPosition?this.data.minPulseWidth+(this.data.maxPulseWidth-this.data.minPulseWidth)*(t-this.data.minPosition)/(this.data.maxPosition-this.data.minPosition):this.data.maxPulseWidth+(this.data.maxPulseWidth-this.data.minPulseWidth)*(t-this.data.maxPosition)/(this.data.maxPosition-this.data.minPosition)},Qt.prototype.velocityUser=function(t){return Math.abs(this.data.maxPosition-this.data.minPosition)*t/(this.data.maxPulseWidth-this.data.minPulseWidth)},Qt.prototype.velocityUS=function(t){return(this.data.maxPulseWidth-this.data.minPulseWidth)*t/Math.abs(this.data.maxPosition-this.data.minPosition)},Qt.prototype.accelUser=function(t){return Math.abs(this.data.maxPosition-this.data.minPosition)*t/(this.data.maxPulseWidth-this.data.minPulseWidth)},Qt.prototype.accelUS=function(t){return(this.data.maxPulseWidth-this.data.minPulseWidth)*t/Math.abs(this.data.maxPosition-this.data.minPosition)},Qt.prototype.getAcceleration=function(){return this.accelUser(this.data.acceleration)},Qt.prototype.getMinAcceleration=function(){return this.accelUser(this.data.minAcceleration)},Qt.prototype.getMaxAcceleration=function(){return this.accelUser(this.data.maxAcceleration)},Qt.prototype.getPosition=function(){return this.positionUser(this.data.position)},Qt.prototype.setMaxPosition=function(t){this.data.maxPosition=t},Qt.prototype.setMinPosition=function(t){this.data.minPosition=t},Qt.prototype.getTargetPosition=function(){return this.positionUser(this.data.targetPosition)},Qt.prototype.getVelocity=function(){return this.velocityUser(this.data.velocity)},Qt.prototype.getMinVelocity=function(){return this.velocityUser(this.data.minVelocity)},Qt.prototype.getMaxVelocity=function(){return this.velocityUser(this.data.maxVelocity)},Qt.prototype.getVelocityLimit=function(){return this.velocityUser(this.data.velocityLimit)},Qt.prototype.getMinVelocityLimit=function(){return this.velocityUser(this.data.minVelocityLimit)},Qt.prototype.getMaxVelocityLimit=function(){return this.velocityUser(this.data.maxVelocityLimit)},Qt.prototype.setAcceleration=function(t){var e=this;t=this.accelUS(t);var n=new gt(this.channel.conn);return n.set({name:"acceleration",type:"g",value:t}),n.send(this.channel,lt.BP_SETACCELERATION).then(function(){e.data.acceleration=t})},Qt.prototype.setTargetPosition=function(t){var e=this;t=this.positionUS(t);var n=new gt(this.channel.conn);return n.set({name:"targetPosition",type:"g",value:t}),n.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(){e.data.targetPosition=t,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},Qt.prototype.setVelocityLimit=function(t){var e=this;t=this.velocityUS(t);var n=new gt(this.channel.conn);return n.set({name:"velocityLimit",type:"g",value:t}),n.send(this.channel,lt.BP_SETVELOCITYLIMIT).then(function(){e.data.velocityLimit=t})},Qt.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.positionUser(this.data.position))},Qt.prototype.handleTargetPositionReachedEvent=function(t){this.data.position=t.get("0"),this.data.isMoving=!1,this.onTargetPositionReached(this.positionUser(this.data.position))},Qt.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.velocityUser(this.data.velocity))};var Jt=function(){Pt.apply(this,arguments),this.name="ResistanceInput",this["class"]=b.RESISTANCE_INPUT,this.onResistanceChange=function(t){},this.onError=function(t,e){}};Jt.prototype=Object.create(Pt.prototype),Jt.prototype.constructor=Jt,_.ResistanceInput=Jt,Jt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Jt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Jt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_RESISTANCECHANGE:this.handleResistanceChangeEvent(t)}return!0},Jt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.resistanceChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ResistanceChangeTrigger"),!0;case lt.BP_SETRTDWIRESETUP:return this.data.RTDWireSetup=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDWireSetup"),!0}},Jt.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},Jt.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},Jt.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},Jt.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},Jt.prototype.getResistance=function(){return this.checkOpen(),this.data.resistance},Jt.prototype.getMinResistance=function(){return this.checkOpen(),this.data.minResistance},Jt.prototype.getMaxResistance=function(){return this.checkOpen(),this.data.maxResistance},Jt.prototype.getResistanceChangeTrigger=function(){return this.checkOpen(),this.data.resistanceChangeTrigger},Jt.prototype.setResistanceChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.resistanceChangeTrigger=t})},Jt.prototype.getMinResistanceChangeTrigger=function(){return this.checkOpen(),this.data.minResistanceChangeTrigger},Jt.prototype.getMaxResistanceChangeTrigger=function(){return this.checkOpen(),this.data.maxResistanceChangeTrigger},Jt.prototype.getRTDWireSetup=function(){return this.checkOpen(),this.data.RTDWireSetup},Jt.prototype.setRTDWireSetup=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETRTDWIRESETUP).then(function(e){n.data.RTDWireSetup=t})},Jt.prototype.handleResistanceChangeEvent=function(t){this.data.resistance=t.get("0"),this.onResistanceChange(this.data.resistance)};var Zt=function(){Pt.apply(this,arguments),this.name="RFID",this["class"]=b.RFID,this.onTag=function(t,e){},this.onTagLost=function(t,e){},this.onError=function(t,e){}};Zt.prototype=Object.create(Pt.prototype),Zt.prototype.constructor=Zt,_.RFID=Zt,Zt.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},Zt.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},Zt.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_TAG:this.handleTagEvent(t);break;case lt.BP_TAGLOST:this.handleTagLostEvent(t)}return!0},Zt.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETANTENNAON:return this.data.antennaEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("AntennaEnabled"),!0}},Zt.prototype.getAntennaEnabled=function(){return this.checkOpen(),!!this.data.antennaEnabled},Zt.prototype.setAntennaEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETANTENNAON).then(function(e){n.data.antennaEnabled=t})},Zt.prototype.getTagPresent=function(){return this.checkOpen(),!!this.data.tagPresent},Zt.prototype.write=function(t,e,n){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var i=new gt(this.channel.conn);return i.set({name:"0",type:"s",value:t}),i.set({name:"1",type:"d",value:e}),i.set({name:"2",type:"d",value:n}),i.send(this.channel,lt.BP_WRITE)},Zt.prototype.handleTagEvent=function(t){var e=t.get("0"),n=t.get("1");this.onTag(e,n)},Zt.prototype.handleTagLostEvent=function(t){var e=t.get("0"),n=t.get("1");this.onTagLost(e,n)},Zt.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case lt.BP_TAG:this.data.tagPresent=!0,this.handleTagEvent(t),this.data.lastTagString=t.get("0"),this.data.lastTagProtocol=t.get("1");break;case lt.BP_TAGLOST:this.data.tagPresent=!1,this.handleTagLostEvent(t);break;default:return!1}return!0},Zt.prototype.getLastTag=function(){if(this.checkOpen(),void 0===this.data.lastTagProtocol)throw new dt(w.UNKNOWN_VALUE);return{tagString:this.data.lastTagString,protocol:this.data.lastTagProtocol}};var $t=function(){Pt.apply(this,arguments),this.name="SoundSensor",this["class"]=b.SOUND_SENSOR,this.onSPLChange=function(t,e,n,i){},this.onError=function(t,e){}};$t.prototype=Object.create(Pt.prototype),$t.prototype.constructor=$t,_.SoundSensor=$t,$t.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},$t.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},$t.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_DBCHANGE:this.handleSPLChangeEvent(t)}return!0},$t.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.SPLChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SPLChangeTrigger"),!0;case lt.BP_SETSPLRANGE:return this.data.SPLRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SPLRange"),!0}},$t.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},$t.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},$t.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},$t.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},$t.prototype.getdB=function(){return this.checkOpen(),this.data.dB},$t.prototype.getMaxdB=function(){return this.checkOpen(),this.data.maxdB},$t.prototype.getdBA=function(){return this.checkOpen(),this.data.dBA},$t.prototype.getdBC=function(){return this.checkOpen(),this.data.dBC},$t.prototype.getNoiseFloor=function(){return this.checkOpen(),this.data.noiseFloor},$t.prototype.getOctaves=function(){return this.checkOpen(),this.data.octaves},$t.prototype.getSPLChangeTrigger=function(){return this.checkOpen(),this.data.SPLChangeTrigger},$t.prototype.setSPLChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.SPLChangeTrigger=t})},$t.prototype.getMinSPLChangeTrigger=function(){return this.checkOpen(),this.data.minSPLChangeTrigger},$t.prototype.getMaxSPLChangeTrigger=function(){return this.checkOpen(),this.data.maxSPLChangeTrigger},$t.prototype.getSPLRange=function(){return this.checkOpen(),this.data.SPLRange},$t.prototype.setSPLRange=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSPLRANGE).then(function(e){n.data.SPLRange=t})},$t.prototype.handleSPLChangeEvent=function(t){this.data.dB=t.get("0"),this.data.dBA=t.get("1"),this.data.dBC=t.get("2"),this.data.octaves=t.get("3"),this.onSPLChange(this.data.dB,this.data.dBA,this.data.dBC,this.data.octaves)};var te=function(){Pt.apply(this,arguments),this.name="Spatial",this["class"]=b.SPATIAL,this.onSpatialData=function(t,e,n,i){},this.onError=function(t,e){}};te.prototype=Object.create(Pt.prototype),te.prototype.constructor=te,_.Spatial=te,te.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},te.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},te.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,1);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_SPATIALDATA:this.handleSpatialDataEvent(t)}return!0},te.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0}},te.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},te.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},te.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},te.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},te.prototype.setMagnetometerCorrectionParameters=function(t,e,n,i,a,r,o,s,h,c,p,u,d){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var l=new gt(this.channel.conn);return l.set({name:"0",type:"g",value:t}),l.set({name:"1",type:"g",value:e}),l.set({name:"2",type:"g",value:n}),l.set({name:"3",type:"g",value:i}),l.set({name:"4",type:"g",value:a}),l.set({name:"5",type:"g",value:r}),l.set({name:"6",type:"g",value:o}),l.set({name:"7",type:"g",value:s}),l.set({name:"8",type:"g",value:h}),l.set({name:"9",type:"g",value:c}),l.set({name:"10",type:"g",value:p}),l.set({name:"11",type:"g",value:u}),l.set({name:"12",type:"g",value:d}),l.send(this.channel,lt.BP_SETCORRECTIONPARAMETERS)},te.prototype.resetMagnetometerCorrectionParameters=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_RESETCORRECTIONPARAMETERS)},te.prototype.saveMagnetometerCorrectionParameters=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_SAVECORRECTIONPARAMETERS)},te.prototype.zeroGyro=function(){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var t=new gt(this.channel.conn);return t.send(this.channel,lt.BP_ZERO)},te.prototype.handleSpatialDataEvent=function(t){var e=t.get("0"),n=t.get("1"),i=t.get("2"),a=t.get("3");this.onSpatialData(e,n,i,a)};var ee=function(){Pt.apply(this,arguments),this.name="Stepper",this["class"]=b.STEPPER,this.onPositionChange=function(t){},this.onVelocityChange=function(t){},this.onStopped=function(){},this.onError=function(t,e){}};ee.prototype=Object.create(Pt.prototype),ee.prototype.constructor=ee,_.Stepper=ee,ee.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ee.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ee.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,2);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_POSITIONCHANGE:this.handlePositionChangeEvent(t);break;case lt.BP_STOPPED:this.handleStoppedEvent(t);break;case lt.BP_VELOCITYCHANGE:this.handleVelocityChangeEvent(t)}return!0},ee.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETACCELERATION:return this.data.acceleration=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Acceleration"),!0;case lt.BP_SETCONTROLMODE:return this.data.controlMode=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ControlMode"),!0;case lt.BP_SETCURRENTLIMIT:return this.data.currentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("CurrentLimit"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETENGAGED:return this.data.engaged=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Engaged"),!0;case lt.BP_SETHOLDINGCURRENTLIMIT:return this.data.holdingCurrentLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("HoldingCurrentLimit"),!0;case lt.BP_SETTARGETPOSITION:return this.data.targetPosition=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TargetPosition"),!0;case lt.BP_SETVELOCITYLIMIT:return this.data.velocityLimit=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VelocityLimit"),!0}},ee.prototype.getAcceleration=function(){return this.checkOpen(),this.data.acceleration},ee.prototype.setAcceleration=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETACCELERATION).then(function(e){n.data.acceleration=t})},ee.prototype.getMinAcceleration=function(){return this.checkOpen(),this.data.minAcceleration},ee.prototype.getMaxAcceleration=function(){return this.checkOpen(),this.data.maxAcceleration},ee.prototype.getControlMode=function(){return this.checkOpen(),this.data.controlMode},ee.prototype.setControlMode=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETCONTROLMODE).then(function(e){n.data.controlMode=t})},ee.prototype.getCurrentLimit=function(){return this.checkOpen(),this.data.currentLimit},ee.prototype.setCurrentLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCURRENTLIMIT).then(function(e){n.data.currentLimit=t})},ee.prototype.getMinCurrentLimit=function(){return this.checkOpen(),this.data.minCurrentLimit},ee.prototype.getMaxCurrentLimit=function(){return this.checkOpen(),this.data.maxCurrentLimit},ee.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ee.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},ee.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ee.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ee.prototype.getEngaged=function(){return this.checkOpen(),!!this.data.engaged},ee.prototype.setEngaged=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENGAGED).then(function(e){n.data.engaged=t})},ee.prototype.getHoldingCurrentLimit=function(){return this.checkOpen(),this.data.holdingCurrentLimit},ee.prototype.setHoldingCurrentLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETHOLDINGCURRENTLIMIT).then(function(e){n.data.holdingCurrentLimit=t})},ee.prototype.getIsMoving=function(){return this.checkOpen(),!!this.data.isMoving},ee.prototype.getPosition=function(){return this.checkOpen(),this.data.position},ee.prototype.getMinPosition=function(){return this.checkOpen(),this.data.minPosition},ee.prototype.getMaxPosition=function(){return this.checkOpen(),this.data.maxPosition},ee.prototype.getRescaleFactor=function(){return this.checkOpen(),this.data.rescaleFactor},ee.prototype.getTargetPosition=function(){return this.checkOpen(),this.data.targetPosition},ee.prototype.setTargetPosition=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"l",value:t});var n=this;return e.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(e){n.data.targetPosition=t})},ee.prototype.getVelocity=function(){return this.checkOpen(),this.data.velocity},ee.prototype.getVelocityLimit=function(){return this.checkOpen(),this.data.velocityLimit},ee.prototype.setVelocityLimit=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETVELOCITYLIMIT).then(function(e){n.data.velocityLimit=t})},ee.prototype.getMinVelocityLimit=function(){return this.checkOpen(),this.data.minVelocityLimit},ee.prototype.getMaxVelocityLimit=function(){return this.checkOpen(),this.data.maxVelocityLimit},ee.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange(this.data.position)},ee.prototype.handleStoppedEvent=function(t){this.onStopped()},ee.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity)},ee.prototype.getAcceleration=function(){if(1e300==this.data.acceleration)throw new dt(w.UNKNOWN_VALUE);return this.data.acceleration*this.data.rescaleFactor},ee.prototype.setAcceleration=function(t){var e=new gt(this.channel.conn);e.set({name:"acceleration",type:"g",value:t}),e.send(this.channel,lt.BP_SETACCELERATION,function(){this.data.acceleration=t/this.data.rescaleFactor,"function"==typeof this.setAccelerationSuccess&&this.setAccelerationSuccess(t)}.bind(this))},ee.prototype.getMinAcceleration=function(){return this.data.minAcceleration*this.data.rescaleFactor},ee.prototype.getMaxAcceleration=function(){return this.data.maxAcceleration*this.data.rescaleFactor},ee.prototype.getPosition=function(){return(this.data.position+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.getMinPosition=function(){return(this.data.minPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.getMaxPosition=function(){return(this.data.maxPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.setRescaleFactor=function(t){this.data.rescaleFactor=t},ee.prototype.getTargetPosition=function(){return(this.data.targetPosition+this.data.positionOffset)*this.data.rescaleFactor},ee.prototype.setTargetPosition=function(t){var e=this,n=t/this.data.rescaleFactor-this.data.positionOffset,i=new gt(this.channel.conn);return i.set({name:"targetPosition",type:"l",value:n}),i.send(this.channel,lt.BP_SETTARGETPOSITION).then(function(){e.data.targetPosition=n,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},ee.prototype.getVelocity=function(){return this.data.velocity*this.data.rescaleFactor},ee.prototype.getMaxVelocity=function(){return this.data.maxVelocity*this.data.rescaleFactor},ee.prototype.getVelocityLimit=function(){if(1e300==this.data.velocityLimit)throw new dt(w.UNKNOWN_VALUE);return this.data.velocityLimit*this.data.rescaleFactor},ee.prototype.setVelocityLimit=function(t){var e=this,n=t/this.data.rescaleFactor,i=new gt(this.channel.conn);return i.set({name:"velocityLimit",type:"g",value:n}),i.send(this.channel,lt.BP_SETVELOCITYLIMIT).then(function(){e.data.velocityLimit=n,e.getEngaged()===!0&&0!==e.getVelocityLimit()&&e.getPosition()!==e.getTargetPosition()&&(e.data.isMoving=!0)})},ee.prototype.getMaxVelocityLimit=function(){return this.data.maxVelocityLimit*this.data.rescaleFactor},ee.prototype.getMinVelocityLimit=function(){return this.data.minVelocityLimit*this.data.rescaleFactor},ee.prototype.addPositionOffset=function(t){this.data.positionOffset+=t/this.data.rescaleFactor},ee.prototype.handleStoppedEvent=function(t){this.data.isMoving=!1,this.onStopped()},ee.prototype.handlePositionChangeEvent=function(t){this.data.position=t.get("0"),this.onPositionChange((this.data.position+this.data.positionOffset)*this.data.rescaleFactor)},ee.prototype.handleVelocityChangeEvent=function(t){this.data.velocity=t.get("0"),this.onVelocityChange(this.data.velocity*this.data.rescaleFactor)};var ne=function(){Pt.apply(this,arguments),this.name="TemperatureSensor",this["class"]=b.TEMPERATURE_SENSOR,this.onTemperatureChange=function(t){},this.onError=function(t,e){}};ne.prototype=Object.create(Pt.prototype),ne.prototype.constructor=ne,_.TemperatureSensor=ne,ne.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ne.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ne.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_TEMPERATURECHANGE:this.handleTemperatureChangeEvent(t)}return!0},ne.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETRTDTYPE:return this.data.RTDType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDType"),!0;case lt.BP_SETRTDWIRESETUP:return this.data.RTDWireSetup=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("RTDWireSetup"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.temperatureChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("TemperatureChangeTrigger"),!0;case lt.BP_SETTHERMOCOUPLETYPE:return this.data.thermocoupleType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("ThermocoupleType"),!0}},ne.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ne.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},ne.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ne.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ne.prototype.getRTDType=function(){return this.checkOpen(),this.data.RTDType},ne.prototype.setRTDType=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETRTDTYPE).then(function(e){n.data.RTDType=t})},ne.prototype.getRTDWireSetup=function(){return this.checkOpen(),this.data.RTDWireSetup},ne.prototype.setRTDWireSetup=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETRTDWIRESETUP).then(function(e){n.data.RTDWireSetup=t})},ne.prototype.getTemperature=function(){return this.checkOpen(),this.data.temperature},ne.prototype.getMinTemperature=function(){return this.checkOpen(),this.data.minTemperature},ne.prototype.getMaxTemperature=function(){return this.checkOpen(),this.data.maxTemperature},ne.prototype.getTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.temperatureChangeTrigger},ne.prototype.setTemperatureChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.temperatureChangeTrigger=t})},ne.prototype.getMinTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.minTemperatureChangeTrigger},ne.prototype.getMaxTemperatureChangeTrigger=function(){return this.checkOpen(),this.data.maxTemperatureChangeTrigger},ne.prototype.getThermocoupleType=function(){return this.checkOpen(),this.data.thermocoupleType},ne.prototype.setThermocoupleType=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETTHERMOCOUPLETYPE).then(function(e){n.data.thermocoupleType=t})},ne.prototype.handleTemperatureChangeEvent=function(t){this.data.temperature=t.get("0"),this.onTemperatureChange(this.data.temperature)};var ie=function(){Pt.apply(this,arguments),this.name="VoltageInput",this["class"]=b.VOLTAGE_INPUT,this.onVoltageChange=function(t){},this.onSensorChange=function(t,e){},this.onError=function(t,e){}};ie.prototype=Object.create(Pt.prototype),ie.prototype.constructor=ie,_.VoltageInput=ie,ie.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ie.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ie.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_SENSORCHANGE:this.handleSensorChangeEvent(t);break;case lt.BP_VOLTAGECHANGE:this.handleVoltageChangeEvent(t)}return!0},ie.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETPOWERSUPPLY:return this.data.powerSupply=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("PowerSupply"),!0;case lt.BP_SETSENSORTYPE:return this.data.sensorType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorType"),!0;case lt.BP_SETSENSORVALUECHANGETRIGGER:return this.data.sensorValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorValueChangeTrigger"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.voltageChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageChangeTrigger"),!0;case lt.BP_SETVOLTAGERANGE:return this.data.voltageRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageRange"),!0}},ie.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},ie.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t;
})},ie.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},ie.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},ie.prototype.getPowerSupply=function(){return this.checkOpen(),this.data.powerSupply},ie.prototype.setPowerSupply=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETPOWERSUPPLY).then(function(e){n.data.powerSupply=t})},ie.prototype.getSensorType=function(){return this.checkOpen(),this.data.sensorType},ie.prototype.setSensorType=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSENSORTYPE).then(function(e){n.data.sensorType=t})},ie.prototype.getSensorUnit=function(){return this.checkOpen(),this.data.sensorUnit},ie.prototype.getSensorValue=function(){return this.checkOpen(),this.data.sensorValue},ie.prototype.getSensorValueChangeTrigger=function(){return this.checkOpen(),this.data.sensorValueChangeTrigger},ie.prototype.setSensorValueChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETSENSORVALUECHANGETRIGGER).then(function(e){n.data.sensorValueChangeTrigger=t})},ie.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},ie.prototype.getMinVoltage=function(){return this.checkOpen(),this.data.minVoltage},ie.prototype.getMaxVoltage=function(){return this.checkOpen(),this.data.maxVoltage},ie.prototype.getVoltageChangeTrigger=function(){return this.checkOpen(),this.data.voltageChangeTrigger},ie.prototype.setVoltageChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.voltageChangeTrigger=t})},ie.prototype.getMinVoltageChangeTrigger=function(){return this.checkOpen(),this.data.minVoltageChangeTrigger},ie.prototype.getMaxVoltageChangeTrigger=function(){return this.checkOpen(),this.data.maxVoltageChangeTrigger},ie.prototype.getVoltageRange=function(){return this.checkOpen(),this.data.voltageRange},ie.prototype.setVoltageRange=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETVOLTAGERANGE).then(function(e){n.data.voltageRange=t})},ie.prototype.handleSensorChangeEvent=function(t){this.data.sensorValue=t.get("0");var e={unit:t.get("UnitInfo.unit"),name:t.get("UnitInfo.name"),symbol:t.get("UnitInfo.symbol")};this.data.sensorUnit=e,this.onSensorChange(this.data.sensorValue,this.data.sensorUnit)},ie.prototype.handleVoltageChangeEvent=function(t){this.data.voltage=t.get("0"),this.onVoltageChange(this.data.voltage)};var ae=function(){Pt.apply(this,arguments),this.name="VoltageOutput",this["class"]=b.VOLTAGE_OUTPUT,this.onError=function(t,e){}};ae.prototype=Object.create(Pt.prototype),ae.prototype.constructor=ae,_.VoltageOutput=ae,ae.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},ae.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},ae.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t)}return!0},ae.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETENABLED:return this.data.enabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Enabled"),!0;case lt.BP_SETVOLTAGE:return this.data.voltage=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("Voltage"),!0;case lt.BP_SETVOLTAGERANGE:return this.data.voltageOutputRange=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageOutputRange"),!0}},ae.prototype.setEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENABLED).then(function(e){n.data.enabled=t})},ae.prototype.getEnabled=function(){return this.checkOpen(),!!this.data.enabled},ae.prototype.getVoltage=function(){return this.checkOpen(),this.data.voltage},ae.prototype.setVoltage=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETVOLTAGE).then(function(e){n.data.voltage=t})},ae.prototype.getMinVoltage=function(){return this.checkOpen(),this.data.minVoltage},ae.prototype.getMaxVoltage=function(){return this.checkOpen(),this.data.maxVoltage},ae.prototype.getVoltageOutputRange=function(){return this.checkOpen(),this.data.voltageOutputRange},ae.prototype.setVoltageOutputRange=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETVOLTAGERANGE).then(function(e){n.data.voltageOutputRange=t})},ae.prototype.setVoltageOutputRangeSuccess=function(t){switch(parseInt(t)){case ht.VOLTS_10:this.data.minVoltage=-10,this.data.maxVoltage=10;break;case ht.VOLTS_5:this.data.minVoltage=0,this.data.maxVoltage=5}};var re=function(){Pt.apply(this,arguments),this.name="VoltageRatioInput",this["class"]=b.VOLTAGE_RATIO_INPUT,this.onVoltageRatioChange=function(t){},this.onSensorChange=function(t,e){},this.onError=function(t,e){}};return re.prototype=Object.create(Pt.prototype),re.prototype.constructor=re,_.VoltageRatioInput=re,re.prototype.handleErrorEvent=function(t){this.onError(t.entries[0].v,t.entries[1].v)},re.prototype.bridgeInput=function(t){var e;if((!this.handleUnsupportedBridgePacket||(e=this.handleUnsupportedBridgePacket(t),e!==!0))&&(e=this._event(t),e!==!0&&(e=this._bridgeInput(t),e!==!0)))throw new dt(w.INVALID_PACKET,"unsupported bridge packet: 0x"+t.vpkt.toString(16))},re.prototype._event=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETSTATUS:this.handleSetStatus(t,0);break;case lt.BP_ERROREVENT:this.handleErrorEvent(t);break;case lt.BP_SENSORCHANGE:this.handleSensorChangeEvent(t);break;case lt.BP_VOLTAGERATIOCHANGE:this.handleVoltageRatioChangeEvent(t)}return!0},re.prototype._bridgeInput=function(t){switch(t.vpkt){default:return!1;case lt.BP_SETENABLED:return this.data.bridgeEnabled=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BridgeEnabled"),!0;case lt.BP_SETBRIDGEGAIN:return this.data.bridgeGain=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("BridgeGain"),!0;case lt.BP_SETDATAINTERVAL:return this.data.dataInterval=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("DataInterval"),!0;case lt.BP_SETSENSORTYPE:return this.data.sensorType=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorType"),!0;case lt.BP_SETSENSORVALUECHANGETRIGGER:return this.data.sensorValueChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("SensorValueChangeTrigger"),!0;case lt.BP_SETCHANGETRIGGER:return this.data.voltageRatioChangeTrigger=+t.entries[0].v,this.onPropertyChange&&this.onPropertyChange("VoltageRatioChangeTrigger"),!0}},re.prototype.getBridgeEnabled=function(){return this.checkOpen(),!!this.data.bridgeEnabled},re.prototype.setBridgeEnabled=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETENABLED).then(function(e){n.data.bridgeEnabled=t})},re.prototype.getBridgeGain=function(){return this.checkOpen(),this.data.bridgeGain},re.prototype.setBridgeGain=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETBRIDGEGAIN).then(function(e){n.data.bridgeGain=t})},re.prototype.getDataInterval=function(){return this.checkOpen(),this.data.dataInterval},re.prototype.setDataInterval=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"u",value:t});var n=this;return e.send(this.channel,lt.BP_SETDATAINTERVAL).then(function(e){n.data.dataInterval=t})},re.prototype.getMinDataInterval=function(){return this.checkOpen(),this.data.minDataInterval},re.prototype.getMaxDataInterval=function(){return this.checkOpen(),this.data.maxDataInterval},re.prototype.getSensorType=function(){return this.checkOpen(),this.data.sensorType},re.prototype.setSensorType=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"d",value:t});var n=this;return e.send(this.channel,lt.BP_SETSENSORTYPE).then(function(e){n.data.sensorType=t})},re.prototype.getSensorUnit=function(){return this.checkOpen(),this.data.sensorUnit},re.prototype.getSensorValue=function(){return this.checkOpen(),this.data.sensorValue},re.prototype.getSensorValueChangeTrigger=function(){return this.checkOpen(),this.data.sensorValueChangeTrigger},re.prototype.setSensorValueChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETSENSORVALUECHANGETRIGGER).then(function(e){n.data.sensorValueChangeTrigger=t})},re.prototype.getVoltageRatio=function(){return this.checkOpen(),this.data.voltageRatio},re.prototype.getMinVoltageRatio=function(){return this.checkOpen(),this.data.minVoltageRatio},re.prototype.getMaxVoltageRatio=function(){return this.checkOpen(),this.data.maxVoltageRatio},re.prototype.getVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.voltageRatioChangeTrigger},re.prototype.setVoltageRatioChangeTrigger=function(t){if(this.isopen!==!0)return v(w.NOT_ATTACHED);var e=new gt(this.channel.conn);e.set({name:"0",type:"g",value:t});var n=this;return e.send(this.channel,lt.BP_SETCHANGETRIGGER).then(function(e){n.data.voltageRatioChangeTrigger=t})},re.prototype.getMinVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.minVoltageRatioChangeTrigger},re.prototype.getMaxVoltageRatioChangeTrigger=function(){return this.checkOpen(),this.data.maxVoltageRatioChangeTrigger},re.prototype.handleSensorChangeEvent=function(t){this.data.sensorValue=t.get("0");var e={unit:t.get("UnitInfo.unit"),name:t.get("UnitInfo.name"),symbol:t.get("UnitInfo.symbol")};this.data.sensorUnit=e,this.onSensorChange(this.data.sensorValue,this.data.sensorUnit)},re.prototype.handleVoltageRatioChangeEvent=function(t){this.data.voltageRatio=t.get("0"),this.onVoltageRatioChange(this.data.voltageRatio)},re.prototype.handleUnsupportedBridgePacket=function(t){switch(t.vpkt){case lt.BP_DATAINTERVALCHANGE:this.data.dataInterval=t.get("0");break;case lt.BP_MINDATAINTERVALCHANGE:this.data.minDataInterval=t.get("0");break;default:return!1}return!0},_};a?module.exports=new v:window.phidget22=new v}).call(this);